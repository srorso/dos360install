
// JOB DEMOBTAM SUN LOCATION - SAMPLE DOS BTAM LOCAL 3270 PROGRAM       12.17.38
// OPTION LINK,NOXREF
// PAUSE
// EXEC ASSEMBLY

                                              EXTERNAL SYMBOL DICTIONARY                                       PAGE    1


SYMBOL   TYPE ID  ADDR  LENGTH LD ID

ECLIPTIC  SD  01 000000 000D7C
TERMS     ER  02
TERMS     SD  03 000D80 0000A8
IJL0HZ    ER  04
IJLBTM    ER  05
IJL@0HZ   ER  06
IJLBTIH   ER  07
IJLBTM22  SD  08 000E28 0007EB
IJLCANCL  LD     0015A0         08
IJLUSERB  LD     0015C6         08
IJLUSER   LD     0015CA         08
IJLPTLCB  LD     001540         08
IJLCNOER  LD     0021E8         0B
IJLCKIOE  LD     0021D8         0B
IJLCLEAR  LD     00220A         0B
IJLPOST   LD     002214         0B
IJLBTM    LD     000E28         08
IJLMWAIT  LD     000E88         08
IJLSGEN   ER  09
IJLSGEN   SD  0A 001618 0000F8
IJLBTIH   SD  0B 001710 000CA1
IJLZ2NR2  SD  0C 0023B8 0000D2
IJLTRSC1  SD  0D 002490 000050
IJLRSPCK  LD     002490         0D
IJL277IP  SD  0E 0024E0 000531
IJLBTEIH  SD  0F 002A18 0001AD
IJLBTDIA  SD  10 002BC8 000128
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    1


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                      2 * THIS PROGRAM WILL CALCULATE AN APPROXIMATE LOCATION FOR THE SUN
                                      3 *   BASED ON AN INPUTTED DATE AND TIME.
                                      4 *
                                      5 * SAMPLE DOS BTAM LOCAL 3270 APPLICATION USING UNFORMATTED SCREENS,
                                      6 *   FLOATING-POINT OPERATIONS, TABLE SEARCH, AND THE FORTRAN
                                      7 *   SINE/COSINE FUNCTIONS.  IT WILL SUPPORT A MAXIMUM OF TEN
                                      8 *   TERMINALS (0-9) AS INDICATED BY THE NUMBER OF PROGRAMMER
                                      9 *   LOGICAL UNITS SPECIFIED IN THE DTFBT LINELST OPERAND.
                                     10 *   TERM. 0 IS CONSIDERED A MASTER TERMINAL WITH ADDITIONAL AUTHORITY.
                                     11 *      DISABLE1 - PREVENT ANYBODY FROM USING TERMINAL 1
                                     12 *      ENABLE1 - ALLOW THE USE OF TERMINAL 1 AND NOTIFY USER
                                     13 *      SPYTERM1 - WATCH WHAT TERMINAL 1 IS DOING
                                     14 *   PF3 - TO END THE APPLICATION FROM THE MASTER TERMINAL
                                     15 *   EXTERNAL INTERRUPT - TO END THE APPLICATION FROM THE CONSOLE
                                     16 *
                                     17 *  BTAM RETURN CODES (R15) FOR A READ OR WRITE MACRO - ONLY X'00' AND
                                     18 *       CONDITION CODE 0 ARE ACCEPTABLE, THE OTHERS ARE 'SHOULD NOT
                                     19 *       OCCUR' CONDITIONS FOR THIS PROGRAM.
                                     20 *    X'00' - NORMAL RETURN.
                                     21 *    X'01' - CANCEL CONDITION DETECTED (NON-OPEN DTFBT)
                                     22 *    X'04' - DTFBT IS IN USE WITH ANOTHER I/O OPERATION (DECB ADDRESS
                                     23 *                 IN DTFBT NOT ZERO), NOT POSSIBLE IN THIS PROGRAM
                                     24 *                 SINCE NO I/O OVERLAP IS ATTEMPTED.
                                     25 *    X'08' - INVALID RELATIVE LINE NUMBER.
                                     26 *    X'0C' - INVALID OPTYPE CODE.
                                     27 *    X'10' - SKIP BITS ARE ON IN ALL LINE CONTROL BLOCKS (LCB'S),
                                     28 *                 RETURNED AFTER READ TI ONLY.
                                     29 *    X'18, X'1C', X'20' - CONCERNS BUFFER MANAGEMENT.
                                     30 *    X'28' - PRINTER BUSY (WRITE)
                                     31 *    X'2C' - NO SBA ORDER WHERE EXPECTED (READ BUFFER FROM POSITION)
                                     32 *    X'30' - I/O ERROR (BUFFER UNRELIABLE) (ASYNCH ERROR) (EQUIP.CHK.)
                                     33 *    X'34' - OLTEP OWNS THE DEVICE
                                     34 *  BTAM COMPLETION CODES FOR READ OR WRITE MACROS (POSTED BY THE
                                     35 *       INTERRUPT HANDLER TO THE DECB).
                                     36 *    X'7F' - NORMAL COMPLETION.
                                     37 *    X'41' - I/O ERROR DETECTED (FURTHER INFORMATION IN DECB).
                                     38 *    X'48' - HALT I/O ISSUED
                                     39 *    X'64' - I/O ERROR (BUFFER UNRELIABLE) (ASYNCH ERROR) (EQUIP.CHK.)
                                     40 *       ALL OTHERS ARE 'SHOULD NOT OCCUR' CONDITIONS FOR THIS PROGRAM.
                                     41 *  BTAM RESETPL CLEARS THE DECB ADDRESS IN THE DTFBT.
                                     42 *    RETURN CODE FOR RESETPL WILL ALWAYS BE X'00' FOR 3270 LOCAL.
                                     43 *    COMPLETION CODE FOR RESETPL WILL NOT BE CHANGED WITH ONE
                                     44 *         EXCEPTION--X'00' WILL BE REPLACED BY X'54'.
                                     45 *         PRINT NOGEN
000000                               46 ECLIPTIC CSECT
000001                               47 R1       EQU   1
000002                               48 R2       EQU   2
000003                               49 R3       EQU   3
000005                               50 R5       EQU   5
000006                               51 R6       EQU   6
000009                               52 R9       EQU   9       RELATIVE LINE NUMBER (RLN)
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    2


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00000B                               53 R11      EQU   11      TEMPORARY BASE FOR OC
00000C                               54 R12      EQU   12      BASE
000000                               55 FR0      EQU   0
000002                               56 FR2      EQU   2
000004                               57 FR4      EQU   4
000006                               58 FR6      EQU   6
000000 05C0                          59          BALR  R12,0
000002                               60          USING *,R12
000002 50C0 C60E            00610    61          ST    R12,SAVEBASE
                                     62          OPEN  TERMS
                                     63+* 360N-CL-453 OPEN     CHANGE LEVEL 3-3                             3-3
000006 0700                          64+         CNOP  0,4
000008                               65+         DC    0F'0'
000008 4110 C6BE            006C0    66+         LA    1,=C'$$BOPEN '
00000C 4500 C012            00014    67+IJJO0001 BAL   0,*+4+4*(2-1)
000010 00000D80                      68+         DC    A(TERMS)
000014 0A02                          69+         SVC   2
000016 5810 C6EE            006F0    70          L     R1,=A(TERMS)
00001A 1B22                          71          SR    R2,R2
00001C 4321 0000            00000    72          IC    R2,0(R1)        GET NUMBER OF LINE CONTROL BLOCKS
000020 0620                          73          BCTR  R2,0            REDUCE BY ONE
000022 4020 C65A            0065C    74          STH   R2,MAXRLN         TO GET THE MAX RLN ALLOWED
000026 4520 C3F6            003F8    75          BAL   R2,BLANK        CLEAR OUTPUT BUFFER
00002A 4860 C65A            0065C    76          LH    R6,MAXRLN
00002E 4166 0001            00001    77          LA    R6,1(R6)        GET NUMBER OF TERMINALS
000032 1799                          78          XR    R9,R9           START WITH RLN 0
000034 4520 C4F2            004F4    79 INITLOOP BAL   R2,WRITINIT     WRITE INITAL MESSAGE ON TERMINAL
000038 4520 C3F6            003F8    80          BAL   R2,BLANK
00003C 4199 0001            00001    81          LA    R9,1(R9)        POINT TO NEXT RLN
000040 4660 C032            00034    82          BCT   R6,INITLOOP
                                     83          STXIT OC,OCEXIT,OCSAVE    ACCEPT EXTERNAL INTERRUPTS
                                     84+* 360N-CL-453  STXIT  CHANGE LEVEL 3-3                              3-3
000044                               85+         DC    0H'0'
000044 5810 C6F2            006F4    86+         L     1,=A(OCSAVE)
000048 5800 C6F6            006F8    87+         L     0,=A(OCEXIT)
00004C 0A14                          88+         SVC   20
                                     89 *
00004E 9240 C966      00968          90 READATA  MVI   INPDATA,C' '    CLEAR INPUT BUFFER
000052 D226 C967 C966 00969 00968    91          MVC   INPDATA+1(39),INPDATA
000058 4520 C594            00596    92          BAL   R2,READ         WAIT FOR ENTER AND READ TERMINAL
00005C 4520 C3F6            003F8    93          BAL   R2,BLANK        CLEAR OUTPUT BUFFER
000060 D606 C966 C793 00968 00795    94          OC    INPDATA(7),BLANKS  TRAN. LC TO UC
000066 1299                          95          LTR   R9,R9           IS IT MASTER TERMINAL
000068 4770 C090            00092    96          BNZ   IGNMAST
00006C 95F3 C963      00965          97          CLI   AIDCA,C'3'      PF3 TO END APPLICATION
000070 4780 C254            00256    98          BE    ENDOFJOB
000074 D506 C966 C75E 00968 00760    99          CLC   INPDATA(7),=C'SPYTERM'
00007A 4780 C414            00416   100          BE    SPYTERM
00007E D506 C966 C765 00968 00767   101          CLC   INPDATA(7),=C'DISABLE'
000084 4780 C444            00446   102          BE    DEACTIVE
000088 D505 C966 C73A 00968 0073C   103          CLC   INPDATA(6),=C'ENABLE'
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    3


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00008E 4780 C49A            0049C   104          BE    REACTIVE
000092 4150 C65E            00660   105 IGNMAST  LA    R5,MONTHS           VALIDATE MONTH
000096 4160 000C            0000C   106          LA    R6,12
000000                              107          USING MONTHTAB,R5
00009A D502 C966 5000 00968 00000   108 LOOP     CLC   INPDATA(3),MONTH    IS THIS THE MONTH
0000A0 4780 C0CE            000D0   109          BE    FOUND
0000A4 4155 0008            00008   110          LA    R5,L'MONTHS(R5)     TRY NEXT MONTH
0000A8 4660 C098            0009A   111          BCT   R6,LOOP             LOOP FOR 12 MONTHS
0000AC                              112 BADATA   EQU   *
0000AC D205 C9E1 C966 009E3 00968   113          MVC   LINE2(6),INPDATA
0000B2 9240 C9E4      009E6         114          MVI   LINE2+3,C' '
0000B6 D203 C9EB C970 009ED 00972   115          MVC   LINE2+10(4),INPDATA+10
0000BC D220 CA31 C911 00A33 00913   116          MVC   LINE3(L'INVALID),INVALID
0000C2 D60D C9E1 C793 009E3 00795   117          OC    LINE2(14),BLANKS
0000C8 4520 C4F2            004F4   118          BAL   R2,WRITINIT         WRITE ERROR MESSAGE
0000CC 47F0 C04C            0004E   119          B     READATA
0000D0 D501 C96A 5003 0096C 00003   120 FOUND    CLC   INPDATA+4(2),DAYS   VALIDATE MAX DAYS IN MONTH
0000D6 4720 C0AA            000AC   121          BH    BADATA
0000DA D501 C96A C740 0096C 00742   122          CLC   INPDATA+4(2),=C'01'
0000E0 4740 C0AA            000AC   123          BL    BADATA
0000E4 95F0 C96B      0096D         124          CLI   INPDATA+5,C'0'
0000E8 4740 C0AA            000AC   125          BL    BADATA
0000EC D503 C970 C6FA 00972 006FC   126          CLC   INPDATA+10(4),=C'2359' VALIDATE TIME
0000F2 4720 C0AA            000AC   127          BH    BADATA
0000F6 95F0 C970      00972         128          CLI   INPDATA+10,C'0'
0000FA 4740 C0AA            000AC   129          BL    BADATA
0000FE 95F0 C971      00973         130          CLI   INPDATA+11,C'0'
000102 4740 C0AA            000AC   131          BL    BADATA
000106 95F0 C972      00974         132          CLI   INPDATA+12,C'0'
00010A 4740 C0AA            000AC   133          BL    BADATA
00010E 95F5 C972      00974         134          CLI   INPDATA+12,C'5'
000112 4720 C0AA            000AC   135          BH    BADATA
000116 95F0 C973      00975         136          CLI   INPDATA+13,C'0'
00011A 4740 C0AA            000AC   137          BL    BADATA
00011E F272 C606 5005 00608 00005   138          PACK  DOUBLE,YTD          CALC DAYS SINCE SPRING EQUINOX
                                    139          DROP  R5
000124 F211 C65C C96A 0065E 0096C   140          PACK  PACKWORK,INPDATA+4(2)
00012A FA71 C606 C65C 00608 0065E   141          AP    DOUBLE,PACKWORK
000130 F971 C606 C742 00608 00744   142          CP    DOUBLE,=P'366'      IF NECESSARY,
000136 4740 C13E            00140   143          BL    *+10
00013A FB71 C606 C742 00608 00744   144          SP    DOUBLE,=P'366'        ADJUST FOR WRAPAROUND
000140 D205 CAD1 C966 00AD3 00968   145          MVC   LINE5(6),INPDATA
000146 9240 CAD4      00AD6         146          MVI   LINE5+3,C' '
00014A D203 CB21 C970 00B23 00972   147          MVC   LINE6(4),INPDATA+10
000150 4520 C35E            00360   148          BAL   R2,PKFLT            CONVERT DAYS TO FLT.PT.
000154 2B00                         149          SDR   FR0,FR0             CLEAR LAST HALF OF FR0
000156 7800 C606            00608   150          LE    FR0,DOUBLE          LOAD DAYS IN FIRST HALF OF FR0
00015A 7C00 C6FE            00700   151          ME    FR0,=E'360'         ADJUST TO PCT. OF CIRCLE (DEGREES)
00015E 7D00 C702            00704   152          DE    FR0,=E'366'           FROM PCT. OF YEAR (DAYS)
000162 2860                         153          LDR   FR6,FR0             SAVE DEGREES SINCE SPRING EQUINOX
000164 7D00 C706            00708   154          DE    FR0,=E'15'          CONVERT DEGREES TO HOURS (/360*24)
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    4


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000168 7C00 C70A            0070C   155          ME    FR0,=E'60'          CONVERT HOURS TO MINUTES
00016C 6000 C606            00608   156          STD   FR0,DOUBLE
000170 4160 CADB            00ADD   157          LA    R6,LINE5+10         MOVE R.A. (HH:MM) TO OUTPUT BUFFER
000174 4520 C39C            0039E   158          BAL   R2,EDIT
000178 7D60 C70E            00710   159          DE    FR6,=E'180'         CONVERT DEGREES TO RADIANS
00017C 7C60 C712            00714   160          ME    FR6,=E'3.14159'
000180 7060 C606            00608   161          STE   FR6,DOUBLE
000184 4520 C296            00298   162          BAL   R2,SIN              GET SINE
000188 7C00 C716            00718   163          ME    FR0,=E'23.445'      ADJUST FOR EARTH'S TILT (AMPLITUDE)
00018C 2860                         164          LDR   FR6,FR0             SAVE DECLINATION
00018E 7C00 C70A            0070C   165          ME    FR0,=E'60'          CONVERT TO DEG.MIN.
000192 6000 C606            00608   166          STD   FR0,DOUBLE
000196 4160 CAE6            00AE8   167          LA    R6,LINE5+21         MOVE DECL. (DDD:MM) TO OUTPUT BUFFER
00019A 4520 C39C            0039E   168          BAL   R2,EDIT
00019E F271 C606 C970 00608 00972   169          PACK  DOUBLE,INPDATA+10(2)    GET INPUT HOURS
0001A4 FC71 C606 C744 00608 00746   170          MP    DOUBLE,=P'60'           CONVERT TO MINUTES
0001AA F211 C65C C972 0065E 00974   171          PACK  PACKWORK,INPDATA+12(2)
0001B0 FA71 C606 C65C 00608 0065E   172          AP    DOUBLE,PACKWORK         ADD INPUT MINUTES
0001B6 4520 C35E            00360   173          BAL   R2,PKFLT                CONVERT TO FLOATING-POINT
0001BA 7800 C606            00608   174          LE    FR0,DOUBLE
0001BE 7D00 C70A            0070C   175          DE    FR0,=E'60'          CONVERT MINUTES TO HOURS
0001C2 7C00 C706            00708   176          ME    FR0,=E'15'          CONVERT HOURS TO DEGREES (/24*360)
0001C6 7A00 C71A            0071C   177          AE    FR0,=E'2'       ADJUST FOR DISTANCE FROM HOUR MERIDIAN
0001CA 3840                         178          LER   FR4,FR0             SAVE AZIMUTH DEGREES
0001CC 7C00 C70A            0070C   179          ME    FR0,=E'60'          CONVERT TO DEGREE MINUTES
0001D0 6000 C606            00608   180          STD   FR0,DOUBLE
0001D4 4160 CAF2            00AF4   181          LA    R6,LINE5+33     MOVE AZIMUTH (DDD:MM) TO OUTPUT BUFFER
0001D8 4520 C39C            0039E   182          BAL   R2,EDIT
0001DC 3804                         183          LER   FR0,FR4             RESTORE AZIMUTH DEGREES
0001DE 7D00 C70E            00710   184          DE    FR0,=E'180'         CONVERT DEGREES TO RADIANS
0001E2 7C00 C712            00714   185          ME    FR0,=E'3.14159'
0001E6 7000 C606            00608   186          STE   FR0,DOUBLE
0001EA 4520 C28E            00290   187          BAL   R2,COS              GET COSINE
0001EE 3300                         188          LCER  FR0,FR0             TAKE COMPLEMENT
0001F0 7C00 C71E            00720   189          ME    FR0,=E'48'          90-LATITUDE (AMPLITUDE)
0001F4 3A06                         190          AER   FR0,FR6             ADD TO DECLINATION
0001F6 7C00 C70A            0070C   191          ME    FR0,=E'60'          CONVERT TO DEGREE MINUTES
0001FA 6000 C606            00608   192          STD   FR0,DOUBLE
0001FE 4160 CAFD            00AFF   193          LA    R6,LINE5+44     MOVE ALTITUDE (DD:MM) TO OUTPUT BUFFER
000202 4520 C39C            0039E   194          BAL   R2,EDIT
000206 D225 C9ED C89A 009EF 0089C   195          MVC   LINE2+12(L'MESS22),MESS22   MOVE INSTRUCTIONS
00020C D229 CA3B C8C0 00A3D 008C2   196          MVC   LINE3+10(L'MESS23),MESS23
000212 D226 CA8D C8EA 00A8F 008EC   197          MVC   LINE4+12(L'MESS24),MESS24
000218 4520 C4F2            004F4   198          BAL   R2,WRITINIT     WRITE RESULTS TO SCREEN
00021C 47F0 C04C            0004E   199          B     READATA
                                    200 *
000220 05B0                         201 OCEXIT   BALR  R11,0
000222                              202          USING *,R11
000222 58C0 B3EE            00610   203          L     R12,SAVEBASE
                                    204          DROP  R11
                                    205          RESETPL DECB
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    5


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                    206+* 360N-CQ-469 RESETPL  CHANGE LEVEL 3-5                             3-5
000226 5800 C722            00724   207+         L     0,=A(DECB) PUT DECB ADDRESS IN (0)              3-1
00022A 4110 C6C6            006C8   208+         LA    1,=CL8'$$BRESPL' LOAD $$BRESPL MODULE INTO (1)   3-1
00022E 0A02                         209+         SVC   2 FETCH RESETPL LOGIC                      3-1
000230 1810                         210+         LR    1,0 LOAD DECB ADDRESS INTO (1)             3-1
000232 1BFF                         211+         SR    15,15 CLEAR REGISTER 15                      3-1
000234 43F1 0020            00020   212+         IC    15,32(1) PUT RETURN CODE INTO (15)              3-1
000238 12FF                         213+         LTR   15,15 SET CONDITION CODE                     3-1
00023A 4770 C28A            0028C   214          BNZ   CANCEL
00023E 4530 C5D8            005DA   215          BAL   R3,WAIT
000242 4520 C3F6            003F8   216          BAL   R2,BLANK        CLEAR OUTPUT BUFFER
000246 D211 C991 C932 00993 00934   217          MVC   LINE1(L'MESSCLS),MESSCLS    CLOSED BY OPERATOR
00024C D20F C9A4 C953 009A6 00955   218          MVC   LINE1+L'MESSCLS+1(L'MESSCLSC),MESSCLSC
000252 47F0 C264            00266   219          B     CLOSTERM
000256 4520 C3F6            003F8   220 ENDOFJOB BAL   R2,BLANK        CLEAR OUTPUT BUFFER
00025A D211 C991 C932 00993 00934   221          MVC   LINE1(L'MESSCLS),MESSCLS    CLOSED BY MASTER TERM.
000260 D20E C9A4 C944 009A6 00946   222          MVC   LINE1+L'MESSCLS+1(L'MESSCLSM),MESSCLSM
000266 4860 C65A            0065C   223 CLOSTERM LH    R6,MAXRLN
00026A 4166 0001            00001   224          LA    R6,1(R6)        GET NUMBER OF TERMINALS
00026E 1799                         225          XR    R9,R9           START AT RLN 0
000270 4520 C516            00518   226 CLOSLOOP BAL   R2,ERSEWRIT     WRITE CLOSED MESSAGE
000274 4199 0001            00001   227          LA    R9,1(R9)        GET NEXT RLN
000278 4660 C26E            00270   228          BCT   R6,CLOSLOOP
                                    229          CLOSE TERMS
                                    230+* 360N-CL-453 CLOSE    CHANGE LEVEL 3-3                             3-3
00027C                              231+         CNOP  0,4
00027C                              232+         DC    0F'0'
00027C 4110 C6CE            006D0   233+         LA    1,=C'$$BCLOSE'
000280 4500 C286            00288   234+IJJC0004 BAL   0,*+4+4*(2-1)
000284 00000D80                     235+         DC    A(TERMS)
000288 0A02                         236+         SVC   2
                                    237          EOJ
                                    238+* 360N-CL-453 EOJ      CHANGE LEVEL 3-0
00028A 0A0E                         239+         SVC   14
                                    240 CANCEL   CANCEL
                                    241+* 360N-CL-453 CANCEL   CHANGE LEVEL 3-6                             3-6
00028C                              242+CANCEL   DS    0H 3-6
00028C 1B00                         243+         SR    0,0 3-3
00028E 0A06                         244+         SVC   6 3-3
                                    245 ***************
                                    246 * BASIC FORTRAN IV FUNCTION SIN,COS FROM IJTSSCN
                                    247 * IF AVAILABLE COULD ALSO ' INCLUDE IJTSSCN' AND
                                    248 *   LA   R13,REGSAVE  (18F)
                                    249 *   CALL SIN,(DOUBLE)
                                    250 *   CALL COS,(DOUBLE)
                                    251 *  INPUT IS SINGLE PRECISION VALUE AT DOUBLE
                                    252 *  OUTPUT IS FR0 AS USED IN A FORTRAN FUNCTION
                                    253 * COS(X)=SIN(PI/2+X)
                                    254 * SIN(-X)=SIN(PI+X)
000290 9202 C331      00333         255 COS      MVI   SINCOSC+3,2     FOR COS, OCTANT CRANK IS 2
000294 47F0 C2A6            002A8   256          B     SINCOS1         GO TO COMMON ROUTINE
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    6


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000298 9200 C331      00333         257 SIN      MVI   SINCOSC+3,0     FOR SINE, OCTANT CRANK IS 0 IF +ARG
00029C 9180 C606      00608         258          TM    DOUBLE,X'80'    IS IT NEGATIVE NUMBER
0002A0 4780 C2A6            002A8   259          BZ    SINCOS1
0002A4 9204 C331      00333         260          MVI   SINCOSC+3,4     FOR SINE OCTANT CRANK IS 4 IF -ARG
0002A8 2B00                         261 SINCOS1  SDR   FR0,FR0         CLEAR FR0
0002AA 2B22                         262          SDR   FR2,FR2         CLEAR FR2
0002AC 7800 C606            00608   263          LE    FR0,DOUBLE      GET ARGUMENT
0002B0 3000                         264          LPER  FR0,FR0         CONSIDER ARGUMENT TO BE POSITIVE
0002B2 7900 C332            00334   265          CE    FR0,SINCOSD     IF GE PI*2**18
0002B6 47A0 C28A            0028C   266          BC    10,CANCEL         NOT ALLOWED
0002BA 6C00 C31E            00320   267          MD    FR0,SINCOSA     TIMES 4/PI
0002BE 7900 C34E            00350   268          CE    FR0,SINCOSH     IF PRODUCT LT ONE
0002C2 4740 C2CC            002CE   269          BL    SINCOS2           BRANCH
0002C6 6E00 C326            00328   270          AW    FR0,SINCOSB     GIVE PROD CHAR. OF 46, UNNORMALIZED
0002CA 3820                         271          LER   FR2,FR0     INTEGER PART OF PROD TO FR2, UNNORMALIZED
0002CC 2B02                         272          SDR   FR0,FR2     FRACTION PART OF PROD TO FR0, NORMALIZED
0002CE 7E20 C32E            00330   273 SINCOS2  AU    FR2,SINCOSC     ADD OCTANT CRANK TO FR2, UNNORMALIZED
0002D2 7020 C356            00358   274          STE   FR2,SINCOSI     SAVE IT, LAST 3 BITS ARE MODIF.OCTANT
0002D6 9101 C359      0035B         275          TM    SINCOSI+3,1     IF ODD OCTANT, TAKE COMPLEMEMENT
0002DA 4780 C2E2            002E4   276          BZ    SINCOS3           OF FRACTION TO OBTAIN THE MODIFIED
0002DE 7B00 C34E            00350   277          SE    FR0,SINCOSH       FRACTION R
0002E2 3000                         278          LPER  FR0,FR0
0002E4 1B11                         279 SINCOS3  SR    R1,R1           GR1=0 FOR COSINE POLYNOMIAL
0002E6 9103 C359      0035B         280          TM    SINCOSI+3,3       FOR OCTANT 2,3,6,7
0002EA 4740 C2F0            002F2   281          BM    *+8             IF OCTANT 1,4,5,8
0002EE 4110 0004            00004   282          LA    R1,4              GR1=4 FOR SINE POLYNOMIAL
0002F2 3840                         283          LER   FR4,FR0         SAVE R
0002F4 3C00                         284          MER   FR0,FR0         COMPUTE SIN OR COS OF MODIFIED
0002F6 3820                         285          LER   FR2,FR0           FRACTION USING PROPER CHEBYSHEV
0002F8 7C01 C336            00338   286          ME    FR0,SINCOSE(R1)   INTERPOLATION POLYNOMIAL
0002FC 7A01 C33E            00340   287          AE    FR0,SINCOSF(R1)
000300 3C02                         288          MER   FR0,FR2
000302 7A01 C346            00348   289          AE    FR0,SINCOSG(R1)
000306 3C02                         290          MER   FR0,FR2
000308 7A01 C34E            00350   291          AE    FR0,SINCOSH(R1) SIN(R)/R OR COS(R) READY
00030C 1211                         292          LTR   R1,R1           IF SINE POLYNOMIAL,
00030E 4780 C312            00314   293          BZ    *+6
000312 3C04                         294          MER   FR0,FR4           MULTIPLY BY R
000314 9104 C359      0035B         295          TM    SINCOSI+3,4     IF MODIFIED OCTANT IS IN LOWER PLANE
000318 0782                         296          BCR   8,R2  BE
00031A 3100                         297          LNER  FR0,FR0           SIGN IS NEGATIVE
00031C 07F2                         298          BR    R2
00031E 0000
000320                              299          DC    0D'0'
000320 41145F306DC9C830             300 SINCOSA  DC    X'41145F306DC9C830'     4/PI
000328 4600000000000000             301 SINCOSB  DC    X'4600000000000000'
000330 46000000                     302 SINCOSC  DC    X'46000000'
000334 45C90FDB                     303 SINCOSD  DC    X'45C90FDB'     MAX ALLOWED-PI*2**18
000338 BE14E5E0                     304 SINCOSE  DC    X'BE14E5E0'     -0.00031888 C3
00033C BD25B368                     305          DC    X'BD25B368'     -0.00003595 S3
000340 3F40EBD6                     306 SINCOSF  DC    X'3F40EBD6'      0.01594991 C2
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    7


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000344 3EA32F62                     307          DC    X'3EA32F62'      0.00249001 S2
000348 C04EF4E5                     308 SINCOSG  DC    X'C04EF4E5'     -0.30842425 C1 + FUDGE 1
00034C C014ABBC                     309          DC    X'C014ABBC'     -0.08074543 S1
000350 41100000                     310 SINCOSH  DC    E'1'             1.0        C0
000354 40C90FDB                     311          DC    X'40C90FDB'      0.78539816 S0
000358 00000000                     312 SINCOSI  DC    F'0'             OCTANT
                                    313 ***************
                                    314 * CONVERT PACKED TO FLOATING-POINT
                                    315 *        PKFLT DOUBLE,0,DOUBLE
00035C 07000700                     316          CNOP  0,8
000360 4F10 C606            00608   317 PKFLT    CVB   R1,DOUBLE
000364 1011                         318          LPR   R1,R1           ASSUME POSITIVE
000366 5010 C392            00394   319          ST    R1,*+46
00036A 6800 C38E            00390   320          LD    FR0,*+38
00036E D703 C392 C392 00394 00394   321          XC    *+38(4),*+38    CLEAR FOR NEXT TIME
000374 6A00 C38E            00390   322          AD    FR0,*+28        NORMALIZE
000378 F877 C606 C606 00608 00608   323          ZAP   DOUBLE,DOUBLE   IF PACKED NEGATIVE,
00037E 47B0 C382            00384   324          BNM   *+6
000382 2100                         325          LNDR  FR0,FR0           MAKE FP NEGATIVE
000384 6D00 C6D6            006D8   326          DD    FR0,=D'1E0'     NO DECIMAL PLACES
000388 6000 C606            00608   327          STD   FR0,DOUBLE      STORE RESULT
00038C 47F0 C396            00398   328          B     *+12
000390 4E00000000000000             329          DC    X'4E00000000000000'
                                    330 *
000398 07F2                         331          BR    R2
                                    332 ***************
                                    333 * CONVERT FLOATING-POINT TO PACKED AND EDIT
                                    334 *        FLTPK DOUBLE,0,DOUBLE
00039A 07000700                     335          CNOP  6,8
00039E 6800 C606            00608   336 EDIT     LD    FR0,DOUBLE
0003A2 2820                         337          LDR   FR2,FR0         SAVE VALUE FOR SIGN
0003A4 6C00 C6D6            006D8   338          MD    FR0,=D'1E0'     NO DECIMAL PLACES
0003A8 2000                         339          LPDR  FR0,FR0         ENSURE POSITIVE
0003AA 6A00 C6DE            006E0   340          AD    FR0,=D'.5'      ROUND OFF
0003AE 6E00 C3CE            003D0   341          AW    FR0,*+34        UNNORMALIZE
0003B2 6000 C3CE            003D0   342          STD   FR0,*+30
0003B6 5810 C3D2            003D4   343          L     R1,*+30         GET INTEGER PORTION
0003BA 2222                         344          LTDR  FR2,FR2         IF FP NEGATIVE,
0003BC 47B0 C3C0            003C2   345          BNM   *+6
0003C0 1111                         346          LNR   R1,R1             MAKE BINARY NEGATIVE
0003C2 4E10 C606            00608   347          CVD   R1,DOUBLE
0003C6 D207 C3CE C6E6 003D0 006E8   348          MVC   *+10(8),=X'4E00000000000000' RESET FOR NEXT TIME
0003CC 47F0 C3D6            003D8   349          B     *+12
0003D0 4E00000000000000             350          DC    X'4E00000000000000'
                                    351 *
0003D8 FD71 C606 C744 00608 00746   352          DP    DOUBLE,=P'60'
0003DE F165 C606 C606 00608 00608   353          MVO   DOUBLE(7),DOUBLE(6)
0003E4 F165 C606 C606 00608 00608   354          MVO   DOUBLE(7),DOUBLE(6)
0003EA D207 6000 C78B 00000 0078D   355          MVC   0(L'EDITWORD,R6),EDITWORD
0003F0 DE07 6000 C60B 00000 0060D   356          ED    0(L'EDITWORD,R6),DOUBLE+5
0003F6 07F2                         357          BR    R2
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    8


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                    358 ***************
0003F8 9240 C991      00993         359 BLANK    MVI   BUFFER,C' '
0003FC D2FF C992 C991 00994 00993   360          MVC   BUFFER+1(256),BUFFER
000402 D2FF CA92 CA91 00A94 00A93   361          MVC   BUFFER+257(256),BUFFER+256
000408 D2FF CB92 CB91 00B94 00B93   362          MVC   BUFFER+513(256),BUFFER+512
00040E D2BD CC92 CC91 00C94 00C93   363          MVC   BUFFER+769(190),BUFFER+768
000414 07F2                         364          BR    R2
                                    365 ***************
                                    366 * MASTER TERMINAL ROUTINES
000416                              367 SPYTERM  EQU   *
000416 95F1 C96D      0096F         368          CLI   INPDATA+7,C'1'  VALIDATE TERMINAL NUMBER
00041A 4740 C4E4            004E6   369          BL    BADRLN
00041E 95F9 C96D      0096F         370          CLI   INPDATA+7,C'9'
000422 4720 C4E4            004E6   371          BH    BADRLN
000426 F270 C606 C96D 00608 0096F   372          PACK  DOUBLE,INPDATA+7(1)
00042C 4F90 C606            00608   373          CVB   R9,DOUBLE
000430 4990 C65A            0065C   374          CH    R9,MAXRLN
000434 4720 C4E4            004E6   375          BH    BADRLN
000438 4520 C550            00552   376          BAL   R2,READBUFF     READ TERMINAL SCREEN
00043C 1799                         377          XR    R9,R9           WRITE ON MASTER TERMINAL
00043E 4520 C516            00518   378          BAL   R2,ERSEWRIT
000442 47F0 C04C            0004E   379          B     READATA
000446                              380 DEACTIVE EQU   *
000446 95F1 C96D      0096F         381          CLI   INPDATA+7,C'1'  VALIDATE TERMINAL NUMBER
00044A 4740 C4E4            004E6   382          BL    BADRLN
00044E 95F9 C96D      0096F         383          CLI   INPDATA+7,C'9'
000452 4720 C4E4            004E6   384          BH    BADRLN
000456 F270 C606 C96D 00608 0096F   385          PACK  DOUBLE,INPDATA+7(1)
00045C 4F90 C606            00608   386          CVB   R9,DOUBLE
000460 4990 C65A            0065C   387          CH    R9,MAXRLN
000464 4720 C4E4            004E6   388          BH    BADRLN
000468 D211 C991 C932 00993 00934   389          MVC   LINE1(L'MESSCLS),MESSCLS    CLOSED BY MASTER TERM.
00046E D20E C9A4 C944 009A6 00946   390          MVC   LINE1+L'MESSCLS+1(L'MESSCLSM),MESSCLSM
000474 4520 C516            00518   391          BAL   R2,ERSEWRIT
                                    392          CHGNTRY TERMS,ATTLST,(R9),SKIP  DISABLE TERMINAL
                                    393+* 360N-CQ-469  CHGNTRY  CHANGE LEVEL 3-8                            3-8
000478 5810 C6EE            006F0   394+         L     1,=A(TERMS) POINT  TO HEAD OF LIST
00047C 18F9                         395+         LR    15,R9 PUT POSITION OF ENTRY IN REGISTER 15
00047E 1BEE                         396+         SR    14,14 CLEAR  14
000480 43E1 0001            00001   397+         IC    14,1(1) PUT LCB SIZE IN REGISTER
000484 1CEE                         398+         MR    14,14 COMPUTE NTH LCB FACTOR
000486 4111 0028            00028   399+         LA    1,40(1) POINT TO FIRST LCB                   3-4
00048A 1A1F                         400+         AR    1,15 POINT NTH LCB
00048C 9602 1010      00010         401+         OI    16(1),X'02' TURN ON SKIP BIT IN LCB
000490 1799                         402          XR    R9,R9           POINT TO MASTER TERMINAL
000492 D213 CA31 C726 00A33 00728   403          MVC   LINE3(20),=C'TERMINAL DEACTIVATED'
000498 47F0 C4EA            004EC   404          B     MASTWR
00049C                              405 REACTIVE EQU   *
00049C 95F1 C96C      0096E         406          CLI   INPDATA+6,C'1'  VALIDATE TERMINAL NUMBER
0004A0 4740 C4E4            004E6   407          BL    BADRLN
0004A4 95F9 C96C      0096E         408          CLI   INPDATA+6,C'9'
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE    9


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0004A8 4720 C4E4            004E6   409          BH    BADRLN
0004AC F270 C606 C96C 00608 0096E   410          PACK  DOUBLE,INPDATA+6(1)
0004B2 4F90 C606            00608   411          CVB   R9,DOUBLE
0004B6 4990 C65A            0065C   412          CH    R9,MAXRLN
0004BA 4720 C4E4            004E6   413          BH    BADRLN
                                    414          CHGNTRY TERMS,ATTLST,(R9),ACTIVATE  ENABLE TERMINAL
                                    415+* 360N-CQ-469  CHGNTRY  CHANGE LEVEL 3-8                            3-8
0004BE 5810 C6EE            006F0   416+         L     1,=A(TERMS) POINT  TO HEAD OF LIST
0004C2 18F9                         417+         LR    15,R9 PUT POSITION OF ENTRY IN REGISTER 15
0004C4 1BEE                         418+         SR    14,14 CLEAR  14
0004C6 43E1 0001            00001   419+         IC    14,1(1) PUT LCB SIZE IN REGISTER
0004CA 1CEE                         420+         MR    14,14 COMPUTE NTH LCB FACTOR
0004CC 4111 0028            00028   421+         LA    1,40(1) POINT TO FIRST LCB                   3-4
0004D0 1A1F                         422+         AR    1,15 POINT NTH LCB
0004D2 94FD 1010      00010         423+         NI    16(1),X'FF'-X'02' TURN OFF SKIP BIT IN LCB
0004D6 4520 C4F2            004F4   424          BAL   R2,WRITINIT     WRITE INITAL MESSAGE
0004DA 1799                         425          XR    R9,R9           POINT TO MASTER TERMINAL
0004DC D211 CA31 C746 00A33 00748   426          MVC   LINE3(18),=C'TERMINAL ACTIVATED'
0004E2 47F0 C4EA            004EC   427          B     MASTWR
0004E6 D212 CA31 C76C 00A33 0076E   428 BADRLN   MVC   LINE3(19),=C'BAD TERMINAL NUMBER'
0004EC 4520 C4F2            004F4   429 MASTWR   BAL   R2,WRITINIT     WRITE RESULTS TO SCREEN
0004F0 47F0 C04C            0004E   430          B     READATA
                                    431 ***************
                                    432 * BTAM I/O SUBROUTINES
0004F4 D233 C991 C7A1 00993 007A3   433 WRITINIT MVC   LINE1(L'MESS11),MESS11  MOVE INTRO. MESSAGES
0004FA D24A CBC1 C7D5 00BC3 007D7   434          MVC   LINE8(L'MESS18),MESS18
000500 D246 CC11 C820 00C13 00822   435          MVC   LINE9(L'MESS19),MESS19
000506 D216 CC61 C867 00C63 00869   436          MVC   LINE10(L'MESS1A),MESS1A
00050C 1299                         437          LTR   R9,R9           IS IT MASTER TERMINAL
00050E 4770 C516            00518   438          BNZ   *+10
000512 D21B CD01 C87E 00D03 00880   439          MVC   LINE12(L'MESS1C),MESS1C
000518 92C3 C990      00992         440 ERSEWRIT MVI   WCC,X'C3'       SET WRITE CONTROL CHARACTER
                                    441          WRITE DECB,TS,TERMS,OUTPUT,961,,(R9),MF=E
                                    442+* 360N-CL-453 WRITE    CHANGE LEVEL 3-0
                                    443+* DOS BTAM - 360N-CQ-469 BTRWC CHANGE LEVEL 3-C                     3-C
00051C 5810 C722            00724   444+         L     1,=A(DECB) GET DECB ADDRESS
000520 9200 1004      00004         445+         MVI   4(1),B'00000000' SWITCHES
000524 920E 1005      00005         446+         MVI   5(1),14 STORE OPERATION TYPE CODE
000528 D202 1009 C77F 00009 00781   447+         MVC   9(3,1),=VL3(TERMS) MOVE DTFBT ADDRESS
00052E D202 100D C782 0000D 00784   448+         MVC   13(3,1),=AL3(OUTPUT) MOVE IOAREA ADDRESS
000534 D201 1006 C758 00006 0075A   449+         MVC   6(2,1),=Y(961) MOVE LENGTH                   3-3
00053A 4291 0019            00019   450+         STC   R9,25(1) STORE RELATIVE LINE NUMBER REGISTER
00053E 58F1 0008            00008   451+         L     15,8(1) LOAD DTFBT ADDRESS FROM DECB
000542 58FF 0010            00010   452+         L     15,16(15) LOAD BTMOD ADDRESS FROM DTFBT
000546 9200 F001      00001         453+         MVI   1(15),0 SET BTMOD MACRO CODE BYTE
00054A 45EF 0002            00002   454+         BAL   14,2(15) LINK TO BTMOD
00054E 47F0 C582            00584   455          B     CHECK
                                    456 READBUFF READ  DECB,TB,TERMS,RDBFBUFF,963,,(R9),MF=E
                                    457+* 360N-CL-453 READ     CHANGE LEVEL 3-0
                                    458+* DOS BTAM - 360N-CQ-469 BTRWC CHANGE LEVEL 3-C                     3-C
000552 5810 C722            00724   459+READBUFF L     1,=A(DECB) GET DECB ADDRESS
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   10


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000556 9200 1004      00004         460+         MVI   4(1),B'00000000' SWITCHES
00055A 920B 1005      00005         461+         MVI   5(1),11 STORE OPERATION TYPE CODE
00055E D202 1009 C77F 00009 00781   462+         MVC   9(3,1),=VL3(TERMS) MOVE DTFBT ADDRESS
000564 D202 100D C785 0000D 00787   463+         MVC   13(3,1),=AL3(RDBFBUFF) MOVE IOAREA ADDRESS
00056A D201 1006 C75A 00006 0075C   464+         MVC   6(2,1),=Y(963) MOVE LENGTH                   3-3
000570 4291 0019            00019   465+         STC   R9,25(1) STORE RELATIVE LINE NUMBER REGISTER
000574 58F1 0008            00008   466+         L     15,8(1) LOAD DTFBT ADDRESS FROM DECB
000578 58FF 0010            00010   467+         L     15,16(15) LOAD BTMOD ADDRESS FROM DTFBT
00057C 9200 F001      00001         468+         MVI   1(15),0 SET BTMOD MACRO CODE BYTE
000580 45EF 0002            00002   469+         BAL   14,2(15) LINK TO BTMOD
000584 4770 C28A            0028C   470 CHECK    BNZ   CANCEL
000588 4530 C5D8            005DA   471          BAL   R3,WAIT
00058C 957F CD52      00D54         472          CLI   DECB,X'7F'      IS IT GOOD COMPLETION CODE?
000590 0782                         473          BCR   8,R2  BE
000592 47F0 C28A            0028C   474          B     CANCEL
                                    475 *
                                    476 READ     READ  DECB,TI,TERMS,INPUT,43,,,MF=E
                                    477+* 360N-CL-453 READ     CHANGE LEVEL 3-0
                                    478+* DOS BTAM - 360N-CQ-469 BTRWC CHANGE LEVEL 3-C                     3-C
000596 5810 C722            00724   479+READ     L     1,=A(DECB) GET DECB ADDRESS
00059A 9280 1004      00004         480+         MVI   4(1),B'10000000' SWITCHES
00059E 9201 1005      00005         481+         MVI   5(1),1 STORE OPERATION TYPE CODE
0005A2 D202 1009 C77F 00009 00781   482+         MVC   9(3,1),=VL3(TERMS) MOVE DTFBT ADDRESS
0005A8 D202 100D C788 0000D 0078A   483+         MVC   13(3,1),=AL3(INPUT) MOVE IOAREA ADDRESS
0005AE D201 1006 C75C 00006 0075E   484+         MVC   6(2,1),=Y(43) MOVE LENGTH                   3-3
0005B4 58F1 0008            00008   485+         L     15,8(1) LOAD DTFBT ADDRESS FROM DECB
0005B8 58FF 0010            00010   486+         L     15,16(15) LOAD BTMOD ADDRESS FROM DTFBT
0005BC 9200 F001      00001         487+         MVI   1(15),0 SET BTMOD MACRO CODE BYTE
0005C0 45EF 0002            00002   488+         BAL   14,2(15) LINK TO BTMOD
0005C4 4770 C28A            0028C   489          BNZ   CANCEL
0005C8 4530 C5D8            005DA   490          BAL   R3,WAIT
0005CC 4890 CD78            00D7A   491          LH    R9,DECB+38      GET RLN
0005D0 957F CD52      00D54         492          CLI   DECB,X'7F'      IS IT GOOD COMPLETION CODE?
0005D4 0782                         493          BCR   8,R2  BE
0005D6 47F0 C28A            0028C   494          B     CANCEL
                                    495 *
                                    496 WAIT     WAIT  ECB=DECB
                                    497+* 360N-CL-453 WAIT     CHANGE LEVEL 3-0
                                    498+* 360N-CQ-469 BTWAIT   CHANGE LEVEL 3-0
0005DA 4100 0001            00001   499+WAIT     LA    0,1 LOAD COUNT INTO (0)
0005DE 0700                         500+         CNOP  0,4 ALIGN BAL INSTRUCTION ON A FULL WORD
0005E0 4510 C5E6            005E8   501+         BAL   1,IJL0016J POINT (1) TO DUMMY ECB LIST
0005E4 80                           502+         DC    X'80' END OF LIST FLAG
0005E5 000D54                       503+         DC    AL3(DECB) ECB ADDRESS FOR DUMMY ECB LIST
0005E8 58F1 0000            00000   504+IJL0016J L     15,0(1) GET DECB ADDRESS FROM DUMMY LIST
0005EC 58FF 0008            00008   505+         L     15,8(15) GET DTFBT ADDRESS FROM DECB
0005F0 58FF 0010            00010   506+         L     15,16(15) GET LOGIC ADDRESS FROM DTFBT
0005F4 9202 F001      00001         507+         MVI   1(15),X'02' SET BTMOD MACRO CODE BYTE
0005F8 45EF 0002            00002   508+         BAL   14,2(15) LINK TO BTMOD
0005FC 4770 C28A            0028C   509          BNZ   CANCEL
000600 07F3                         510          BR    R3
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   11


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                    511 ***************
000608                              512 DOUBLE   DS    D
000610                              513 SAVEBASE DS    F
000614                              514 OCSAVE   DS    18F
00065C                              515 MAXRLN   DS    H
00065E                              516 PACKWORK DS    PL2
000000                              517 MONTHTAB DSECT
000000                              518 MONTH    DS    CL3     MONTH
000003                              519 DAYS     DS    CL2     MAX DAYS IN MONTH
000005                              520 YTD      DS    CL3     DAYS SINCE 3/21
000000                              521 ECLIPTIC CSECT
000660 D1C1D5F3F1F2F8F5             522 MONTHS   DC    C'JAN31285'
000668 C6C5C2F2F9F3F1F6             523          DC    C'FEB29316'
000670 D4C1D9F3F1F3F4F5             524          DC    C'MAR31345'
000678 C1D7D9F3F0F0F1F0             525          DC    C'APR30010'
000680 D4C1E8F3F1F0F4F0             526          DC    C'MAY31040'
000688 D1E4D5F3F0F0F7F1             527          DC    C'JUN30071'
000690 D1E4D3F3F1F1F0F1             528          DC    C'JUL31101'
000698 C1E4C7F3F1F1F3F2             529          DC    C'AUG31132'
0006A0 E2C5D7F3F0F1F6F3             530          DC    C'SEP30163'
0006A8 D6C3E3F3F1F1F9F3             531          DC    C'OCT31193'
0006B0 D5D6E5F3F0F2F2F4             532          DC    C'NOV30224'
0006B8 C4C5C3F3F1F2F5F4             533          DC    C'DEC31254'
0006C0                              534          LTORG
0006C0 5B5BC2D6D7C5D540             535                =C'$$BOPEN '
0006C8 5B5BC2D9C5E2D7D3             536                =CL8'$$BRESPL'
0006D0 5B5BC2C3D3D6E2C5             537                =C'$$BCLOSE'
0006D8 4110000000000000             538                =D'1E0'
0006E0 4080000000000000             539                =D'.5'
0006E8 4E00000000000000             540                =X'4E00000000000000'
0006F0 00000D80                     541                =A(TERMS)
0006F4 00000614                     542                =A(OCSAVE)
0006F8 00000220                     543                =A(OCEXIT)
0006FC F2F3F5F9                     544                =C'2359'
000700 43168000                     545                =E'360'
000704 4316E000                     546                =E'366'
000708 41F00000                     547                =E'15'
00070C 423C0000                     548                =E'60'
000710 42B40000                     549                =E'180'
000714 413243F4                     550                =E'3.14159'
000718 421771EC                     551                =E'23.445'
00071C 41200000                     552                =E'2'
000720 42300000                     553                =E'48'
000724 00000D54                     554                =A(DECB)
000728 E3C5D9D4C9D5C1D3             555                =C'TERMINAL DEACTIVATED'
00073C C5D5C1C2D3C5                 556                =C'ENABLE'
000742 F0F1                         557                =C'01'
000744 366C                         558                =P'366'
000746 060C                         559                =P'60'
000748 E3C5D9D4C9D5C1D3             560                =C'TERMINAL ACTIVATED'
00075A 03C1                         561                =Y(961)
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   12


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00075C 03C3                         562                =Y(963)
00075E 002B                         563                =Y(43)
000760 E2D7E8E3C5D9D4               564                =C'SPYTERM'
000767 C4C9E2C1C2D3C5               565                =C'DISABLE'
00076E C2C1C440E3C5D9D4             566                =C'BAD TERMINAL NUMBER'
000781 000000                       567                =VL3(TERMS)
000784 000992                       568                =AL3(OUTPUT)
000787 000990                       569                =AL3(RDBFBUFF)
00078A 000965                       570                =AL3(INPUT)
00078D 402021207A202060             571 EDITWORD DC    X'402021207A202060'
000795 4040404040404040             572 BLANKS   DC    CL14' '
0007A3 E7E7E740F0F040C1             573 MESS11   DC    C'XXX 00 AT 0000 HOURS  (24 HOUR CLOCK, STANDARD TIME)'
                                    574 MESS18   DC    C'TO GET APPROXIMATE LOCATION INFORMATION ABOUT THE SUN -
0007D7 E3D640C7C5E340C1                                FOR A PARTICULAR TIME'
                                    575 MESS19   DC    C'ENTER THE FIRST THREE LETTERS OF THE MONTH, THE DAY, A-
000822 C5D5E3C5D940E3C8                                ND THE TIME ABOVE'
000869 C54B40C74B406060             576 MESS1A   DC    C'E. G. -- JUL 04 AT 1359'
000880 C5D5E3C5D940D7C6             577 MESS1C   DC    C'ENTER PF3 TO END APPLICATION'
00089C D9C9C7C8E3404040             578 MESS22   DC    C'RIGHT                   AT CHICAGO, IL'
0008C2 C1E2C3C5D5E2C9D6             579 MESS23   DC    C'ASCENSION DECLINATION   AZIMUTH   ALTITUDE'
0008EC C8C87AD4D4404040             580 MESS24   DC    C'HH:MM      DD:MM      DDD:MM      DD:MM'
000913 D7D9C5E5C9D6E4E2             581 INVALID  DC    C'PREVIOUS DATE AND/OR TIME INVALID'
000934 E3C5D9D4C9D5C1D3             582 MESSCLS  DC    C'TERMINAL CLOSED BY'
000946 D4C1E2E3C5D940E3             583 MESSCLSM DC    C'MASTER TERMINAL'
000955 C3D6D5E2D6D3C540             584 MESSCLSC DC    C'CONSOLE OPERATOR'
000965                              585 INPUT    DS    0CL43 INPUT BUFFER
000965                              586 AIDCA    DS    CL3   ATTN.ID, CURSOR ADDRESS
000968                              587 INPDATA  DS    CL40  INPUT DATA
000990                              588 RDBFBUFF DS    0CL963
000990                              589          DS    CL2
000992                              590 OUTPUT   DS    0CL961  OUTPUT BUFFER
000992                              591 WCC      DS    X       WRITE CONTROL CHAR.
000993                              592 BUFFER   DS    0CL960  OUTPUT DATA (12 LINES)
000993                              593 LINE1    DS    CL80
0009E3                              594 LINE2    DS    CL80
000A33                              595 LINE3    DS    CL80
000A83                              596 LINE4    DS    CL80
000AD3                              597 LINE5    DS    CL80
000B23                              598 LINE6    DS    CL80
000B73                              599 LINE7    DS    CL80
000BC3                              600 LINE8    DS    CL80
000C13                              601 LINE9    DS    CL80
000C63                              602 LINE10   DS    CL80
000CB3                              603 LINE11   DS    CL80
000D03                              604 LINE12   DS    CL80
                                    605          READ  DECB,TI,TERMS,MF=L  DEFINE DATA EVENT CONTROL BLOCK
                                    606+* 360N-CL-453 READ     CHANGE LEVEL 3-0
                                    607+* DOS BTAM - 360N-CQ-469 BTRWC CHANGE LEVEL 3-C                     3-C
000D53 00
000D54                              608+         DC    0F'0'
000D54 00000000                     609+DECB     DC    XL4'0' EVENT CONTROL BLOCK
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   13


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000D58 80                           610+         DC    B'10000000' FLAG BYTE 1
000D59 01                           611+         DC    HL1'1' OPERATION TYPE CODE
000D5A 0000                         612+         DC    Y(0) NULL LENGTH FIELD
000D5C 00                           613+         DC    XL1'0' RESERVED
000D5D 000000                       614+         DC    VL3(TERMS) DTFBT ADDRESS
000D60 00                           615+         DC    YL1(0) NULL MODE BYTE
000D61 000000                       616+         DC    AL3(0) NULL IOAREA ADDRESS
000D64 0000                         617+         DC    XL2'0' SENSE BYTES
000D66 0000                         618+         DC    H'0' RESIDUAL COUNT
000D68 00                           619+         DC    XL1'0' LAST-EXECUTED CHANNEL COMMAND
000D69 000000                       620+         DC    AL3(0) NULL TERMINAL LIST ENTRY ADDRESS
000D6C 00                           621+         DC    BL1'0' FLAG BYTE 2
000D6D FF                           622+         DC    YL1(X'FF') NULL RELATIVE LINE NUMBER
000D6E 0000                         623+         DC    XL2'0' RESPONSE FIELD
000D70 00                           624+         DC    XL1'0' TP CODE FIELD
000D71 00                           625+         DC    XL1'0' ERROR INFORMATION FIELD
000D72 0000                         626+         DC    XL2'0' STATUS FIELD
000D74 00                           627+         DC    XL1'0' RESERVED
000D75 000000                       628+         DC    AL3(0) ADDRESSING POINTER (SET BY WRITE)
000D78 00                           629+         DC    XL1'0' START-STOP AUTOPOLL INDEX BYTE
000D79 000000                       630+         DC    AL3(0) POLLING POINTER (SET BY READ)
                                    631 TERMS    DTFBT CU=3272,DEVICE=3277,LINELST=(020,021)
                                    632+* DOS BTAM - 360N-CQ-469 DTFBT CHANGE LEVEL 3-C                     3-C
000D80                              633+TERMS    CSECT
                                    634+*        DTFBT HEADER
000D80 02                           635+         DC    YL1(2) LINE CONTROL BLOCK COUNT            3-8
000D81 40                           636+         DC    YL1(64) LINE CONTROL BLOCK SIZE
000D82 00                           637+         DC    B'00000000' FEATURE BYTE ONE
000D83 00                           638+         DC    B'00000000' FEATURE BYTE TWO
000D84 00000000                     639+         DC    A(0) RESERVED FOR INTERNAL USE
000D88 00                           640+         DC    B'00000000' FLAGS 3-1
000D89 000000                       641+         DC    AL3(0) NULL BUFFER POOL ADDRESS
000D8C 11                           642+         DC    HL1'17' DEVICE TYPE
000D8D 000000                       643+         DC    VL3(IJL0HZ) MODEL CCW ADDRESS
000D90 0B                           644+         DC    YL1((IJL0019X-TERMS+15)/16) DTF LENGTH
000D91 000000                       645+         DC    VL3(IJLBTM) BTAM LOGIC ADDDRESS
000D94 47                           646+         DC    YL1(X'40'+7) DTF TYPE AND CONTROL UNIT CODE
000D95 04                           647+         DC    B'00000100' ERP FLAGS
000D96 0002                         648+         DC    H'2' MESSAGE LENGTH                      3-2
000D98 00                           649+         DC    YL1(0) RETRY COUNT
000D99 000000                       650+         DC    AL3(0) NULL SPECIAL CHARACTER POINTER
000D9C 00                           651+         DC    YL1(2*0) 2*RETRY COUNT
000D9D 000000                       652+         DC    AL3(0) NULL LINE ERROR BLOCK ADDRESS
000DA0 00                           653+         DC    XL1'0' RESERVED                              3-4
000DA1 000000                       654+         DC    VL3(IJL@0HZ) TABLE OF OFFSETS ADDRESS           3-4
000DA4 00000000                     655+         DC    A(0) RESERVED                              3-4
                                    656+*        LINE CONTROL BLOCK
000DA8 0000                         657+         DC    H'0' RESIDUAL COUNT
000DAA 8400                         658+         DC    X'8400' TRAFFIC BIT AND DEVICE END POSTING
000DAC 0000                         659+         DC    XL2'0' CSW STATUS BYTES
000DAE 0114                         660+         DC    YL2(X'0100'+020) LOGICAL UNIT CLASS AND ORDER
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   14


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000DB0 00                           661+         DC    X'00' RESERVED
000DB1 000000                       662+         DC    AL3(0) CHANNEL PROGRAM ADDRESS SET AT EXEC TIME
000DB4 40                           663+         DC    X'40' CHANNEL APPENDAGE FLAG
000DB5 000000                       664+         DC    VL3(IJLBTIH) ADDRESS OF BTAM INTERRUPT PROCESSOR
000DB8 00                           665+         DC    XL1'0' LCB FLAGS
000DB9 000000                       666+         DC    AL3(0) DECB ADDRESS SET AT EXEC TIME
000DBC 00                           667+         DC    YL1(1-1) RELATIVE LINE NUMBER
000DBD 00                           668+         DC    XL1'0' USED BY BSA FOR SND ACK AND RCV ACK
000DBE 10                           669+         DC    XL1'10' BIT USAGE, 0-3 ACK LMT,4-7 ERP RETRY COUNT
000DBF 00                           670+         DC    XL1'00' SET MODE
000DC0 0000000000000000             671+         DC    D'0' ERP MESSAGE CODE AND STATUS SAVE AREA
000DC8 0000000000000000             672+         DC    4D'0' CCW SPACE
                                    673+*        LINE CONTROL BLOCK
000DE8 0000                         674+         DC    H'0' RESIDUAL COUNT
000DEA 8400                         675+         DC    X'8400' TRAFFIC BIT AND DEVICE END POSTING
000DEC 0000                         676+         DC    XL2'0' CSW STATUS BYTES
000DEE 0115                         677+         DC    YL2(X'0100'+021) LOGICAL UNIT CLASS AND ORDER
000DF0 00                           678+         DC    X'00' RESERVED
000DF1 000000                       679+         DC    AL3(0) CHANNEL PROGRAM ADDRESS SET AT EXEC TIME
000DF4 40                           680+         DC    X'40' CHANNEL APPENDAGE FLAG
000DF5 000000                       681+         DC    VL3(IJLBTIH) ADDRESS OF BTAM INTERRUPT PROCESSOR
000DF8 80                           682+         DC    XL1'80' LCB FLAGS WITH END OF LIST FLAG ON
000DF9 000000                       683+         DC    AL3(0) DECB ADDRESS SET AT EXEC TIME
000DFC 01                           684+         DC    YL1(2-1) RELATIVE LINE NUMBER
000DFD 00                           685+         DC    XL1'0' USED BY BSA FOR SND ACK AND RCV ACK
000DFE 10                           686+         DC    XL1'10' BIT USAGE, 0-3 ACK LMT,4-7 ERP RETRY COUNT
000DFF 00                           687+         DC    XL1'00' SET MODE
000E00 0000000000000000             688+         DC    D'0' ERP MESSAGE CODE AND STATUS SAVE AREA
000E08 0000000000000000             689+         DC    4D'0' CCW SPACE
000E28                              690+IJL0019X DS    0D
000000                              691+ECLIPTIC CSECT  3-B
                                    692          BTMOD L3277=YES,RESETPL=NO
                                    693+* DOS BTAM - 360N-CQ-469  BTMOD  CHANGE LEVEL 3-C                   3-C

000E28                              695+IJLBTM22 CSECT
                                    696+         ENTRY IJLCANCL,IJLUSERB,IJLUSER,IJLPTLCB 3-6
                                    697+         ENTRY IJLCNOER,IJLCKIOE,IJLCLEAR,IJLPOST 3-B

                                    699+* FUNCTION     PROVIDES THE MAJOR PROGRAM LOGIC REQUIRED TO OPERATE
                                    700+*              TELECOMMUNICATION LINES AND DEVICES BY DOS/BTAM
                                    701+*
                                    702+* ENTRIES      (1) IJLBTM22+2 FOR A BTAM MACRO, OR
                                    703+*              (2) AN APPENDAGE ADDRESS SPECIFIED IN BYTES 13,14,15
                                    704+*                  OF A USER'S COMMAND CONTROL BLOCK (CCB).
                                    705+*
                                    706+* EXITS        (1) RETURN TO THE USER AT THE ADDRESS SPECIFIED IN
                                    707+*                  DOS STANDARD LINKAGE REGISTER.
                                    708+*              (2) TO THE DOS CANCEL ROUTINE.
                                    709+*              (3) TO THE SUPERVISOR AT AN ADDRESS SPECIFIED IN THE
                                    710+*                  DOS SUPERVISOR RETURN REGISTER.
                                    711+*              (4) TO THE ABOVE ADDRESS PLUS FOUR BYTES.
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   15


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                    712+*
                                    713+* INPUT        DATA FURNISHED BY MACRO CALLS
                                    714+*
                                    715+* OUTPUT       MESSAGES ON 1052 OPERATOR CONSOLE LOG.
                                    716+*
                                    717+* TABLES       (1) PROGRAM-DEFINED DEVICE TYPE CODES AND OP TYPE
                                    718+*                  CODES ARE COMBINED IN FOUR TABLES WHICH DETERMINE
                                    719+*                  ACTION REQUIRED TO GENERATE A PROGRAM IN BUFFERS.
                                    720+*              (2) BRANCH TABLES ARE VARIOUSLY EMPLOYED TO ROUTE THE
                                    721+*                  FUNCTIONS OF BTMOD.
                                    722+*              (3) TRANSLATE TABLE IS USED FOR BSC ERP RETRY COUNTER
                                    723+*
                                    724+* EXTERNAL ROUTINES--LOGICAL TRANSIENT ROUTINES WRITE NON-ERP
                                    725+*                    MESSAGES, PHYSICAL TRANSIENT ROUTINES WRITE ERP
                                    726+*                    MESSAGES.
                                    727+*
                                    728+* DEPENDENCIES HARDWARE--
                                    729+*              CPU--NONE PECULIAR TO BTAM.
                                    730+*              CU--2701, E.C.
                                    731+*                  2702, E.C.
                                    732+*                  2703, E.C.
                                    733+*                  2848, E.C.
                                    734+*                  7770, E.C.
                                    735+*                  7772, E.C.
                                    736+*                  3272, E.C.                                       3-A
                                    737+*              SOFTWARE--PARAMETERS CODED IN BTMOD MACRO-INSTRUCTION
                                    738+*                        MUST BE COMPATIBLE WITH PARAMETERS CODED IN
                                    739+*                        DTFBT MACRO-INSTRUCTION.
                                    740+*              SUPERVISOR FUNCTIONS--USES SUPERVISOR CALLS FOR EXCP,
                                    741+*                                    LOGICAL TRANSIENT FETCH, CANCEL
                                    742+*                                    WAIT, AND HALT I/O.
                                    743+*
                                    744+* ATTRIBUTES   COMBINATION OF PROBLEM PROGRAM (ENABLED) AND SUPER-
                                    745+*              VISOR EXTENSION (DISABLED).  ISSUES NO PRIVILEGED
                                    746+*              INSTRUCTIONS.  REUSABLE, BUT NOT REENTRANT AND NOT
                                    747+*              READ-ONLY.
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   16


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000E28                              749+         USING *,IJLBTBAS,IJLBTBA2 IJLBTBAS LOADED BY MACROS
                                    750+         ENTRY IJLBTM 3-A
                                    751+         ENTRY IJLMWAIT 3-A
000E28 0000                         752+IJLBTM   DC    H'0' SAVE CELL FOR MACRO TYPE CODE                  3-A
000E2A 900E F06C            00E94   753+         STM   0,14,IJLSVURA SAVE USER REGISTERS
000E2E 189F                         754+         LR    IJLBTBA2,IJLBTBAS ESTABLISH 2ND BASE REG
000E30 4A90 F0C2            00EEA   755+         AH    IJLBTBA2,IJLBTBCN SET UP SECOND BASE REGISTER
000E34 95FF F0B8      00EE0         756+         CLI   IJLCNBLK,X'FF' IS CANCEL PENDING
000E38 4770 F78C            015B4   757+         BNE   IJLCNC10 IF SO, GO EXECUTE CANCEL
000E3C 9200 F0AB      00ED3         758+         MVI   IJLRCLOC,IJLRNULL SET NULL RETURN CODE
000E40 48EF 0000            00000   759+         LH    IJLLNKRG,0(IJLBTBAS) LOAD OFFSET INTO WORK REG
000E44 48EE F024            00E4C   760+         LH    IJLLNKRG,IJLTBLE(IJLLNKRG) GET TABLE ENTRY
000E48 47FE F0C6            00EEE   761+         B     IJLCPGX(IJLLNKRG) BRANCH TO USER-REQUESTED ROUTINE

000E4C                              763+IJLTBLE  EQU   * TABLE OF OFFSETS TO MAJOR BTMOD ROUTINES
000E4C 0000                         764+         DC    Y(IJLCPGX-IJLCPGX)
000E4E 057E                         765+         DC    Y(IJLWAIT-IJLCPGX)
000E50 0610                         766+         DC    Y(IJLRSPL-IJLCPGX)
000E52 0618                         767+         DC    Y(IJLRQB-IJLCPGX) 3-6
000E54 0618                         768+         DC    Y(IJLRLBF-IJLCPGX)
000E56 0626                         769+         DC    Y(IJLONLTT-IJLCPGX)
000E58 063A                         770+         DC    Y(IJLTRAN-IJLCPGX) 3-6
000E5A 064A                         771+         DC    Y(IJLBONLT-IJLCPGX)
000E5C 0642                         772+         DC    Y(IJLBTRO-IJLCPGX) 3-6


                                    774+*  CORE STORAGE CONSTANTS AND WORK AREAS

                                    776+*        DOUBLE WORDS

000E5E 0000
000E60 0000000000000000             778+IJLOLTDW DC    D'0' USED FOR CONVERT TO DECIMAL
000E68 0400000020000001             779+IJLSNSCW CCW   X'04',0,X'20',1 SENSE CCW FOR UNIT CHECK
000E70 0B003F7F60000001             780+IJLZ77CW CCW   X'0B',X'3F7F',X'60',1 THREE CCW AREA FOR L3277    3-A
000E78 0000000000000001             781+         CCW   X'00',0,X'00',1 3-A
000E80 0000000000000001             782+         CCW   X'00',0,X'00',1 3-A

                                    784+*        FULL WORDS

000E88 00000000                     786+IJLMWAIT DC    F'0' MASTER WAIT FIELD
000E8C FFFFFFFFFFFFFFFF             787+IJLWTSAV DC    2F'-1' IJLWAIT SAVE AREA FOR COUNT AND ECBLIST ADDR
000E94 FFFFFFFFFFFFFFFF             788+IJLSVURA DC    14F'-1' USER REGISTER SAVE AREA
000ECC FFFFFFFF                     789+IJLSVR14 DC    F'-1' REGISTER 14 SAVE AREA
000ED0 00000000                     790+         DC    F'0' CELL FOR RELAYING RETURN CODE TO IJLUSER
000ED3                              791+IJLRCLOC EQU   *-1 LOCATION TO MOVE RETURN CODE
000ED4 FFFFFFFFFFFFFFFF             792+IJLSV2RG DC    2F'-1' TEMPORARY SAVE AREA FOR ANY 2 REGS
000EDC FFFFFFFF                     793+IJLFWWA1 DC    F'-1' FULL WORD WORK AREA

000EE0                              795+IJLCNBLK EQU   * BTAM CANCEL BLOCK, FULL-WORD ALIGNED
000EE0 FF                           796+         DC    X'FF' NULL CANCEL MESSAGE CODE
000EE1 000000                       797+         DC    AL3(0) NULL DTFBT ADDRESS
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   17


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000EE4 00                           798+IJLPRGSW DC    B'00000000' PROGRAM SWITCHES
000EE5 000000                       799+         DC    AL3(0) NULL DECB ADDRESS

                                    801+*        HALF WORDS

000EE8 FFFF                         803+IJLHWWA1 DC    H'-1' HALF WORD WORK AREA
000EEA 1000                         804+IJLBTBCN DC    H'4096' BASE REGISTER CONSTANT
000EEC 00                           805+         DC    XL1'0' ALWAYS 0 AND PRECEDING IJLPDGIT
000EED 00                           806+IJLPDGIT DC    XL1'0' CELL FOR EXAMINING DIGIT (PROGRAM GEN)

                                    808+*  ONE BYTE AND MISCELLANEOUS LENGTH AREAS
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   18


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                    811+* DOS BTAM - 360N-CQ-469 BTCONST CHANGE LEVEL 3-C                   3-C
                                    812+*  GENERAL REGISTER USAGE

000000                              814+IJLICREG EQU   0 REG FOR CHAR INSERTION
000000                              815+IJLCOUNT EQU   0 COUNT PARAMETER REGISTER
000000                              816+IJLZPRM0 EQU   0 PARAMETER REGISTER -- IJLZRFT2                  3-A
000000                              817+IJLCTREG EQU   0 COUNT REGISTER
000001                              818+IJLECBRE EQU   IJLCTREG+1 ECB LIST ADDRESS REGISTER

000001                              820+IJLCCBAR EQU   1 CCB ADDR REG FROM SPVSR
000001                              821+IJLLCBRG EQU   1 LCB DSECT REGISTER
000001                              822+IJLPRMRG EQU   1 MACRO-INSTRUCTION PARAMETER REGISTER
000001                              823+IJLPARAM EQU   1 POINTER TO PARAMETER REGISTER -- IJLTRANS
000001                              824+IJLZPRM1 EQU   1 PARAMETER REGISTER -- IJLZRFT2                  3-A

000002                              826+IJLWKRG3 EQU   2 WORK REGISTER
000002                              827+IJLZMSGR EQU   2 DATA POINTER REG FOR LOCAL 3277 RFT               3-A

000003                              829+IJLWKRG4 EQU   3 WORK REGISTER
000003                              830+IJLPUBRG EQU   3 PUB ADDRESS REGISTER                              3-A

000004                              832+IJLWKRGE EQU   4 EVEN-NUMBERED WORK REG AND CCW DSECT REG
000005                              833+IJLWKRGO EQU   IJLWKRGE+1 ODD-NUMBERED WORK REG AND MODEL CCW DSECT
000004                              834+IJLZWOR4 EQU   4 WORK REGISTER FOR LOCAL 3277 RFT                  3-A

000005                              836+IJLTRACT EQU   5 ALTERNATE COUNT REGISTER -- IJLTRANS
000005                              837+IJLZWOR5 EQU   5 WORK REGISTER FOR LOCAL 3277 RFT                  3-A

000006                              839+IJLBTIH1 EQU   6 SECOND APPENDAGE BASE REGISTER
000006                              840+IJLWRSG1 EQU   IJLBTIH1 WORK REG FOR START-STOP POLL CCW GEN
000006                              841+IJLZWOR6 EQU   6 WORK REGISTER FOR LOCAL 3277 RFT                  3-A

000007                              843+IJLBTIH2 EQU   7 THIRD APPENDAGE BASE REGISTER
000007                              844+IJLWRSG2 EQU   IJLBTIH2 WORK REG FOR START-STOP POLL CCW GEN
000007                              845+IJLSPVRR EQU   7 LINK REG FOR RETURN TO SPVSR
000007                              846+IJLZWOR7 EQU   7 WORK REGISTER FOR LOCAL 3277 RFT                  3-A

000008                              848+IJLTRARA EQU   8 POINTER TO AREA -- IJLTRANS
000008                              849+IJLBTIAR EQU   8 IJLBTIH ADDRESS REGISTER (LOADED BY SUPERVISOR)
000008                              850+IJLBTDIB EQU   8 BASE REGISTER FOR DIAGNISTIC WRITE/READ APPENDAGE
000008                              851+IJLBTERB EQU   8 BASE REG FOR IJLBTEIH
000008                              852+IJLBTIHB EQU   8 BASE REG FOR IJLBTIH

000009                              854+IJLBTBA2 EQU   9 2ND BTMOD BASE REGISTER

00000A                              856+IJLWKRG2 EQU   10
00000A                              857+IJLBCBRG EQU   10 DSECT REG FOR BCB
00000A                              858+IJLLERBR EQU   IJLBCBRG DSECT REGISTER FOR LERB ENTRY
00000A                              859+IJLSDRRG EQU   IJLBCBRG DSECT REGISTER FOR SDR TABLE                3-5
00000A                              860+IJLTRASV EQU   10 ADDRESS SAVE REGISTER -- IJLTRANS
00000A                              861+IJLZWOR2 EQU   10 WORK REGISTER FOR LOCAL 3277 RFT                  3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   19


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00000B                              863+IJLBUFRG EQU   11 DSECT REG FOR BUFFER
00000B                              864+IJLEXREG EQU   IJLBUFRG PARAMETER REGISTER FOR USE IN 'EX' INSTRUCT
00000B                              865+IJLTRCNT EQU   11 COUNT REGISTER -- IJLTRANS
00000B                              866+IJLSPCRG EQU   11 SPECIAL CHARACTER DSECT BASE REGISTER
00000B                              867+IJL260RG EQU   IJLEXREG 2260L APPENDAGE BASE REGISTER               3-5
00000B                              868+IJL277RG EQU   IJL260RG 3277L APPENDAGE BASE REGISTER         3-A
00000B                              869+IJLZRFBS EQU   11 LOCAL 3277 RFT BASE REGISTER                      3-A

00000C                              871+IJLDECBR EQU   12 DSECT REGISTER FOR DECB
00000C                              872+IJLTRTBL EQU   12 TRANSLATION TABLE ADDRESS REGISTER -- IJLTRANS

00000D                              874+IJLDTFRG EQU   13 DSECT REGISTER FOR DTFBT (13 REQD. WITH RELBUF)

00000E                              876+IJLRETRG EQU   14 REGISTER FOR RETURN TO USER
00000E                              877+IJLLNKRG EQU   14 BTMOD INTERNAL LINKAGE REGISTER
00000E                              878+IJLALPTR EQU   14 ADDRESSING LIST POINTER REG
00000E                              879+IJLPLPTR EQU   14 POLLING LIST POINTER REG
00000E                              880+IJLTABLX EQU   14 TABLE INDEX REGISTER
00000E                              881+IJLOFSTR EQU   14

00000F                              883+IJLBTBAS EQU   15 BTMOD BASE REGISTER
00000F                              884+IJLRCREG EQU   15 RETURN CODE REGISTER


                                    886+*  USING STATEMENTS FOR DSECT ADDRESSABILITY

000000                              888+         USING IJLDTFBT,IJLDTFRG
000000                              889+         USING IJLLCB,IJLLCBRG
000000                              890+         USING IJLCCW,IJLWKRGE
000000                              891+         USING IJLMCCW,IJLWKRGO
000000                              892+         USING IJLDECB,IJLDECBR
000000                              893+         USING IJLBCB,IJLBCBRG
000000                              894+         USING IJLBUF,IJLBUFRG
000000                              895+         USING IJLOFFST,IJLOFSTR


                                    897+*  RETURN CODES IN GENERAL REGISTER 15

                                    899+*        AFTER READ, WRITE, OR CONTROL MACRO-INSTRUCTIONS

000000                              901+IJLRNULL EQU   X'00' NORMAL RETURN, NO ERROR
000004                              902+IJLRLCBB EQU   X'04' LINE OPERATION ALREADY IN PROGRESS
000008                              903+IJLRXRLN EQU   X'08' RELATIVE LINE NUMBER TOO LARGE
00000C                              904+IJLRUDOT EQU   X'0C' OPERATION TYPE UNDEFINED OR USED WITH 'S'
000010                              905+IJLRALSK EQU   X'10' ALL LIST ENTRIES SKIPPED WITH OPTYPE TI
000014                              906+IJLRLEOP EQU   X'14' LINE ERROR AT OPEN TIME
000018                              907+IJLRNBRS EQU   X'18' TOO FEW AVAILABLE BUFFERS TO ALLOW READ-'S'
00001C                              908+IJLRNBPX EQU   X'1C' NO BUFFER POOL ASSOCIATED WITH DTFBT
000020                              909+IJLRNBGX EQU   X'20' NO BUFFER PROGRAM GENERATION IN BTMOD
000024                              910+IJLRILTT EQU   X'24' ILLEGAL USE OF READ TT WITH 2760               3-5
000024                              911+IJLRUSCE EQU   X'24' BSC USAGE COUNT EXCEEDED                      3-5
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   20


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000028                              912+IJLRZPBS EQU   X'28' L3277 PRINTER BUSY                     3-A
00002C                              913+IJLRZNSB EQU   X'2C' L3277 SBA ORDER (X'11') NOT FOUND      3-A
000030                              914+IJLRZBCL EQU   X'30' L3277 IO ERROR, DEVICE BFFR UNRELIABLE 3-A
000034                              915+IJLRZOTP EQU   X'34' L3277 OLTEP OWNS THE DEVICE           3-A

                                    917+*        AFTER REQBUF OR RELBUF MACRO-INSTRUCTIONS

000000                              919+IJLRALLB EQU   X'00' ALL OF THE REQUESTED BUFFERS WERE PROCESSED
000004                              920+IJLRSOMB EQU   X'04' PART OF THE REQUESTED BUFFERS PROCESSED
000008                              921+IJLRNONB EQU   X'08' NONE OF THE REQUESTED BUFFERS PROCESSED
00000C                              922+IJLRNBPB EQU   X'0C' NO BUFFER POOL ASSOCIATED WITH DTFBT
000010                              923+IJLRNBMB EQU   X'10' NO BUFFER MANAGEMENT IN BTMOD, MACRO ILLEGAL

                                    925+*        AFTER TWAIT MACRO INSTRUCTION

000004                              927+IJLTTNPB EQU   X'04' NO TERMINAL TEST LOGIC IN BTMOD-MACRO ILLEGAL

                                    929+*    RETURN CODE AFTER ONLTST MACRO
000010                              930+IJLNTSLG EQU   X'10' INVALID OF TERMINAL TEST MACRO

                                    932+*     AFTER TRANSLATE MACRO INSTRUCTION

000004                              934+IJLTRANL EQU   X'04' NO TRANSLATE LOGIC IN BTMOD, MACRO ILLEGAL

                                    936+*        AFTER BTRD MACRO INSTRUCTION
000004                              937+IJLFLOFF EQU   X'04' RECORDER FILE NOT READY OR RF=NO

000008                              939+IJLNBTRD EQU   X'08' NO OBRSDR LOGIC PRESENT


                                    942+*        RETURN CODES AFTER RESETPL LOGIC                           3-7
000000                              943+IJLZERO  EQU   X'00' RESETPL LOGIC PRESENT                          3-7

000004                              945+IJLFOUR  EQU   X'04' NO RESETPL LOGIC PRESENT                       3-7
                                    946+*        AFTER ANY MACRO-INSTRUCTION WHEN CANCEL=NO AND A CANCEL
                                    947+*        CONDITION IS DETECTED

000001                              949+IJLRCNCL EQU   X'01' CANCEL CONDITION DETECTED


                                    951+*  COMPLETION CODES IN ECB

000000                              953+IJLCNULL EQU   X'00' NON-COMPLETION
00007F                              954+IJLCNORM EQU   X'7F' NORMAL COMPLETION
000041                              955+IJLCIOER EQU   X'41' I/O ERROR
000042                              956+IJLCRNDT EQU   X'42' COMPLETED READ, NO DATA TRANSFERRED (L2260)
                                    957+*                    RFT RECEIVED, L3277                            3-A
000044                              958+IJLCTINC EQU   X'44' TERMINAL ID NON-COMPARISON
000048                              959+IJLCHIOR EQU   X'48' HALT I/O REQUESTED
000054                              960+IJLCNPOP EQU   X'54' NON-PRODUCTIVE OPERATION
000058                              961+IJLCCNCL EQU   X'58' CANCEL CONDITION DETECTED
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   21


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000062                              962+IJLCENQ  EQU   X'62' ENQ RECEIVED COMPLETION CODE
000064                              963+IJLCZBCL EQU   X'64' L3277 IO ERROR, DEVICE BFFR UNRELIABLE 3-A


                                    965+*  OPERATION TYPE CODES

000000                              967+IJLOTCWB EQU   X'00' WRITE BREAK
000000                              968+IJLOTCWD EQU   X'00' WRITE DISCONNECT
000001                              969+IJLOTCRI EQU   X'01' READ INITIAL
000002                              970+IJLOTCWI EQU   X'02' WRITE INITIAL
000003                              971+IJLOTCRT EQU   X'03' READ CONTINUE
000004                              972+IJLOTCWT EQU   X'04' WRITE CONTINUE
000005                              973+IJLOTCRV EQU   X'05' READ CONVERSATIONAL
000005                              974+IJLOTRTL EQU   X'05' READ CONTINUE WITH GRAPHICS
000006                              975+IJLOTCWV EQU   X'06' WRITE CONVERSATIONAL
000007                              976+IJLOTCRP EQU   X'07' READ REPEAT
000008                              977+IJLOTCWA EQU   X'08' WRITE ACK
000008                              978+IJLOTWIE EQU   X'08' WRITE INITIAL TRANSPARENT BLOCK
000009                              979+IJLOTRIQ EQU   X'09' READ INITIAL INQUIRY
000009                              980+IJLOTCRS EQU   X'09' READ SKIP
00000A                              981+IJLOTCWN EQU   X'0A' WRITE NAK
00000A                              982+IJLOTWIX EQU   X'0A' WRITE INITIAL TRANSPARENT TEXT
00000B                              983+IJLOTCRB EQU   X'0B' READ BUFFER
00000B                              984+IJLOTRPL EQU   X'0B' READ REPEAT WITH GRAPHICS
00000C                              985+IJLOTCWL EQU   X'0C' WRITE LINE ADDRESS
00000C                              986+IJLOWIXV EQU   X'0C' WRITE INTI TRANSPARENT CONVERSATIONAL
00000D                              987+IJLOTCRO EQU   X'0D' READ SHORT
00000D                              988+IJLOTCRQ EQU   X'0D' READ INQUIRY
00000E                              989+IJLOTCWS EQU   X'0E' WRITE ERASE
00000E                              990+IJLOTWIV EQU   X'0E' WRITE INITIAL CONVERSATIONAL
00000F                              991+IJLOTCRE EQU   X'0F' READ CONTINUE WITH IDENT. EXCHANGE (WTTA)      3-2
00000F                              992+IJLOTRIZ EQU   X'0F' READ INITIAL WITH TONE (WORLD TRADE MODEM)   3-4
000010                              993+IJLOTCWC EQU   X'10' WRITE INVITATIONAL
000010                              994+IJLOTCWE EQU   X'10' WRITE TRANSPARENT BLOCK
000011                              995+IJLOTRRV EQU   X'11' READ INTERRUPT                              3-3
000011                              996+IJLOZRMD EQU   X'11' L3277 READ MODIFIED                    3-A
000012                              997+IJLOTCWX EQU   X'12' WRITE TRANSPARENT TEXT
000012                              998+IJLOTWIO EQU   X'12' WRITE INITIAL OPTICAL                          3-5
000012                              999+IJLOZWUS EQU   X'12' L3277 WRITE UNPROTECTED ERASE          3-A
000013                             1000+IJLOTRTA EQU   X'13' READ CONTINUE WITH LEADING ACK                 3-5
000013                             1001+IJLOTRCR EQU   X'13' READ CONNECT                                   3-6
000013                             1002+IJLOZRBP EQU   X'13' L3277 READ BUFFER FROM POSITION       3-A
000014                             1003+IJLOTWXV EQU   X'14' WRITE TRANSPARENT CONVERSATIONAL
000014                             1004+IJLOTWCO EQU   X'14' WRITE INVITATIONAL OPTICAL                     3-5
000015                             1005+IJLOTRCW EQU   X'15' READ CONNECT WITH TONE                         3-6
000016                             1006+IJLOTWVO EQU   X'16' WRITE CONVERSATIONAL OPTICAL                   3-5
000016                             1007+IJLOTCWR EQU   X'16' WRITE EOT
000017                             1008+IJLOTRQM EQU   X'17' READ INQUIRY MONITOR                           3-B
000018                             1009+IJLOTCWW EQU   X'18' WRITE WABT
000019                             1010+IJLOZRMP EQU   X'19' L3277 READ MODIFIED FROM POSITION     3-A
00001A                             1011+IJLOTCWQ EQU   X'1A' WRITE INQUIRY
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   22


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00001A                             1012+IJLMAXRW EQU   IJLOTCWQ MAXIMUM VALUE OF READ OR WRITE
00001B                             1013+IJLOTCCI EQU   X'1B' CONTROL INITIAL
00001C                             1014+IJLOTCCD EQU   X'1C' CONTROL DISABLE
00001D                             1015+IJLOTCCM EQU   X'1D' CONTROL MODE
00001E                             1016+IJLOCALL EQU   X'1E' CALL SEGMENT
00001F                             1017+IJLOANSR EQU   X'1F' ANSWER SEGMENT
000020                             1018+IJLOTWCW EQU   X'20' WRITE CONNECT                                  3-6
000022                             1019+IJLOTWRM EQU   X'22' WRITE EOT MONITOR                              3-B


                                   1021+*  DECB FLAGS

000040                             1023+IJLBECBC EQU   B'01000000' ECB, C BIT

000080                             1025+IJLBINIT EQU   B'10000000' OF1, INITIAL OPTYPE
000040                             1026+IJLBRSET EQU   B'01000000' OF1, RESET OPTYPE
000020                             1027+IJLBLOCK EQU   B'00100000' OF1, LOCK OPTION (L2260)
000020                             1028+IJLBWITQ EQU   B'00100000' OF1  WRITE TQ WITHOUT ENTRY 'S'
000010                             1029+IJLBWITV EQU   B'00010000' OF1,CONVERSATIONAL WRITE
000010                             1030+IJLZSBCF EQU   B'00010000' 0F1, SKIP BUFFER CHECK FLAG FOR 3277L    3-A
000008                             1031+IJLAUTPL EQU   B'00001000' OF1,AUTOPOLL FLAG
000004                             1032+IJLBENTS EQU   B'00000100' OF1, ENTRY 'S'
000002                             1033+IJLBARAS EQU   B'00000010' OF1, AREA 'S'
000001                             1034+IJLBLGTS EQU   B'00000001' OF1, LENGTH 'S'

000010                             1036+IJLZRMSG EQU   B'00010000' REMOTE 3270 STATUS/SENSE MSG FLAG        3-A
000002                             1037+IJLRVIFG EQU   B'00000010' ORI,  REVERSE INTERRUPT FLAG            3-3
000004                             1038+IJLZERR  EQU   B'00000100' ORI R3270 BSC2 RFT ERROR FLAG            3-B

000001                             1040+IJLBRDOP EQU   B'00000001' OPTYPE, READ (ODD-NUMBERED)

000080                             1042+IJLCOMRJ EQU   B'10000000' SN0, COMMAND REJECT
000040                             1043+IJLINTVR EQU   B'01000000' SN0, INTERVENTION REQUIRED
000020                             1044+IJLBOCHK EQU   B'00100000' SN0, BUS OUT CHECK
000010                             1045+IJLEQCHK EQU   B'00010000' SN0, EQUIPMENT CHECK
000008                             1046+IJLDTACK EQU   B'00001000' SN0, DATA CHECK
000004                             1047+IJLOVRRN EQU   B'00000100' SN0, OVERRUN
000004                             1048+IJLZUNSY EQU   B'00000100' SN0, UNIT SPECIFY                        3-A
000002                             1049+IJLLSTDT EQU   B'00000010' SN0, LOST DATA
000002                             1050+IJLZCNCK EQU   B'00000010' SN0, CONTROL CHECK                       3-A
000001                             1051+IJLTMOUT EQU   B'00000001' SN0, TIME OUT
000001                             1052+IJLZOPCK EQU   B'00000001' SN0, OPERATION CHECK                     3-A

000080                             1054+IJLBPCI  EQU   B'10000000' OF2, PCI-OCCURRENCE FLAG
000040                             1055+IJLBEOT  EQU   B'01000000' OF2, EOT FLAG
000020                             1056+IJLBDLET EQU   B'00100000' OF2, DLE-EOT FLAG
000010                             1057+IJLBSTOP EQU   B'00010000' OF2, STOP FLAG
000010                             1058+IJLBSOHS EQU   B'00010000' OF2, SOH 0/0 S MESSAGE                  3-6
000008                             1059+IJLBENAB EQU   B'00001000' OF2, ENABLE FLAG
000004                             1060+IJLBSCVB EQU   B'00000100' OF2, WRITE TV, ONLY READ USES BUFFERS
000002                             1061+IJLBURUB EQU   B'00000010' OF2, UNRETURNED USER BUFFER ADDR IN ECB
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   23


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000001                             1062+IJLTMTST EQU   B'00000001' OF2, TERMINAL TEST OPERATING FLAG

000040                             1064+IJLEOTWT EQU   B'01000000' WTTA EOT FLAG                            3-2

000080                             1066+IJLDECAS EQU   B'10000000' OF3, AREA 'S' WITH DECB EXTENDED      3-3


                                   1068+*  DTFBT FLAGS

000002                             1070+IJLBNPCP EQU   B'00000010' DTFBT, NON-PARTITIONED CHANNEL PROGRAM
000008                             1071+IJLBSAPL EQU   B'00001000' AUTOPOLL FLAG
000008                             1072+IJLVALFS EQU   B'00001000' BSC VALID 1ST CHARACTER FLAG
000001                             1073+IJLBOPEN EQU   B'00000001' DTFBT OPEN FLAG
000004                             1074+IJLBSWCH EQU   B'00000100' DTFBT SWITCHED NETWORK FLAG
000008                             1075+IJLDTMPT EQU   B'00001000' MULTI-POINT CONFIGURATION
000010                             1076+IJLASCFL EQU   B'00010000' ASCII CODE INDICATOR
000080                             1077+IJLZRSPL EQU   B'10000000' L3277 RESETPL ISSUED DURING RFT          3-A
000080                             1078+IJLBTSTC EQU   B'10000000' STATION CONTROL FEATURE
000001                             1079+IJLBTOIU EQU   B'00000001' OPTICAL IMAGE UNIT FEATURE               3-5
000004                             1080+IJLBFKBL EQU   B'00000100' KEYBOARD LOCK (2848 M21 AND M22)
000001                             1081+IJLBERA  EQU   B'00000001' L2260 AND L3277 READ IN APPENDAGE FLAG   3-A
000002                             1082+IJLB60RS EQU   B'00000010' L2260 AND L3277 RESCAN FLAG              3-A
000004                             1083+IJLBZRPL EQU   B'00000100' L2260 AND L3277 RESETPL IN PROGRESS FLAG 3-A
000008                             1084+IJLB60NW EQU   B'00001000' L2260 AND L3277 NOP-WAIT FLAG            3-A
000010                             1085+IJLBNORS EQU   B'00010000' L2260 AND L3277 RESETPL INHIBIT FLAG     3-A
000040                             1086+IJLSDRF1 EQU   B'01000000' SDR TABLE THRESHOLD                      3-5
000020                             1087+IJLOBRF1 EQU   B'00100000' OBR REQUESTED FLAG                       3-5
000080                             1088+IJLZ3RFT EQU   B'10000000' L3277 TERMINAL TEST FLAG              3-A


                                   1090+*  LCB FLAGS

000080                             1092+IJLBLLCB EQU   B'10000000' LAST LCB IN LINE GROUP
000040                             1093+IJLBLEOP EQU   B'01000000' LINE ERROR AT OPEN
000040                             1094+IJLBRSA  EQU   B'01000000' READ STARTED FROM APPENDAGE,L2260 & L32773-A
000020                             1095+IJLBHIOR EQU   B'00100000' HALT I/O REQUESTED
000020                             1096+IJLREAD2 EQU   B'00100000' 2260 READ START FLAG                     3-7
000010                             1097+IJLLCBCN EQU   B'00010000' LCB CANCEL FLAG
000008                             1098+IJLBWLAD EQU   B'00001000' WRITE AT LINE ADDRESS FLAG, REMOTE 2260
000008                             1099+IJLBQUED EQU   B'00001000' L2260 AND L3277 LCB QUEUED FLAG          3-A
000004                             1100+IJLBATTN EQU   B'00000100' L2260 AND L3277 ATTENTION FLAG           3-A
000004                             1101+IJLOIUTT EQU   B'00000100' OIU TERMINAL TEST                        3-5
000002                             1102+IJLBSKPP EQU   B'00000010' SKIP FLAG, L2260 AND L3277               3-A
000002                             1103+IJLOIUFR EQU   B'00000010' OIU FRAME CHANGE TEST                    3-5
000001                             1104+IJLB1053 EQU   B'00000001' PRINTER FLAG, L2260 AND L3277            3-A
000001                             1105+IJLOIUMS EQU   B'00000001' MESSAGE IS FROM OIU                      3-5
000001                             1106+IJLBSCAP EQU   B'00000001' BSC AUTOPOLL CCW MODIFIED FLAG
00000F                             1107+IJLRSBAR EQU   B'00001111' RETRY COUNTER MASK
000004                             1108+IJLERPPR EQU   B'00000100' ERP IN PROCESS FLAG
000002                             1109+IJLERRDR EQU   B'00000010' READ RESPONSE ERROR
000001                             1110+IJLRTRY1 EQU   B'00000001' FIRST RETRY FLAG
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   24


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000003                             1111+IJLERRTY EQU   IJLERRDR+IJLRTRY1
000080                             1112+IJLBIOLT EQU   B'10000000' BTAM INITIATES TEST                  3-1
000040                             1113+IJLBINTF EQU   B'01000000' LCB IN TEST FLAG                       3-1
000020                             1114+IJLXEQ0F EQU   B'00100000' X=0 FLAG FOR ON-LINE TEST              3-1
000010                             1115+IJLINVLD EQU   B'00010000' INVALID CHARACTER IN RFT              3-1
000008                             1116+IJLRONLT EQU   B'00001000' RESETPL FLAG FOR TERM TEST          3-1
000004                             1117+IJLOLTRT EQU   B'00000100' TERMTST INITIATED FLAG                   3-6
000002                             1118+IJLRFT32 EQU   B'00000010' 3270 REMOTE RFT BSC FLAG                 3-A
000080                             1119+IJLTRCTF EQU   X'80' TRANSMISSION UPDATE FLAG
000023                             1120+IJLERTRT EQU   X'23'
000080                             1121+IJLZPBSY EQU   X'80' L3277 PRINTER BUSY FLAG               3-A
000040                             1122+IJLZBFCL EQU   X'40' L3277 DEVICE BUFFER CLOBBERED FLAG    3-A
000008                             1123+IJLZIORQ EQU   X'08' I/O REQUEST FLAG L3277           3-A
000020                             1124+IJLZ77RF EQU   X'20' RFT IN PROGRESS FLAG, L3277      3-A
000010                             1125+IJLZ77OR EQU   X'10' START ORIGINAL READ FLAG, 3277L R3-A



000001                             1127+IJLZWRTC EQU   X'01' WRITE COMMAND CODE, L3277   3-A
000003                             1128+IJLZNOPC EQU   X'03' L2260 AND L3277 NOP COMMAND CODE      3-A
000011                             1129+IJLZZSBA EQU   X'11' L3277 SET BUFFER ADDRESS ORDER   3-A
000001                             1130+IJLZZMDT EQU   B'00000001' RESET MDT BIT FLAG IN WCC, 3277L         3-A
000080                             1131+IJLZWRTQ EQU   X'80' IJLLCBLI BSC2 FLAGS,WRITE TR,TRM ISSUED       3-B
000040                             1132+IJL3275D EQU   X'40' IJLLCBLI BSC2 FLAGS, 3275 DIAL                 3-B


                                   1134+*  CCB FLAGS

000080                             1136+IJLBTRFC EQU   B'10000000' TRAFFIC BIT IN CCB+2


                                   1138+*  CCW FLAGS                                                        3-2

000040                             1140+IJLCCWFG EQU   X'40' COMMAND CHAINING FLAG                          3-2
000020                             1141+IJLKTX20 EQU   X'20' SUPPRESS INCORRECT LENGTH FLAG                 3-A


                                   1143+*  TERMINAL LIST FLAGS

000080                             1145+IJLBPEOL EQU   B'10000000' PHYSICAL END OF LIST
000040                             1146+IJLBSKIP EQU   B'01000000' SKIP LIST ENTRY
000020                             1147+IJLBWRAP EQU   B'00100000' WRAP-AROUND INDICATOR


                                   1149+*  PROGRAM SWITCHES (IN CANCEL BLOCK)

000001                             1151+IJLBMACC EQU   B'00000001' MULTI-ADDRESSING COMMAND CHAIN
000002                             1152+IJLBNLNK EQU   B'00000010' INTERNAL LINKAGE
000004                             1153+IJLBWLAS EQU   B'00000100' WRAP LIST ALL-SKIP STOP
000008                             1154+IJLBSRCH EQU   B'00001000' SEARCH FLAG FOR PROGRAM IN BUFFER
000010                             1155+IJLBDORR EQU   B'00010000' DEVICE/OPTYPE WITH READ RESPONSE
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   25


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000020                             1156+IJLBDSAB EQU   B'00100000' PROGRAM RUNNING DISABLED
000040                             1157+IJLCPLNK EQU   B'01000000' INTERNAL LINKAGE TO CHANNEL PROGRAM GEN
000080                             1158+IJLBCNCL EQU   B'10000000' USER CANCEL OPTION


                                   1160+*  TELECOMMUNICATIONS PROGRAM CODES

000001                             1162+IJLTRSAE EQU   X'01' RESTART AFTER ENABLE
000001                             1163+IJLTMARK EQU   X'01' WRITE MARK CHARACTER(S) (WTTA)                 3-2
000002                             1164+IJLTWEOT EQU   X'02' WRITE SPECIAL CHARACTER
000003                             1165+IJLTWPAC EQU   X'03' WRITE POLLING OR ADDRESSING CHARACTERS
000005                             1166+IJLTRRWP EQU   X'05' READ RESPONSE TO WRITE POLL CHARS (POLL-REST)
000006                             1167+IJLTRRWA EQU   X'06' READ RESPONSE TO WRITE ADDR CHARS (MULT-ADDR)
000007                             1168+IJLTRTID EQU   X'07' READ TERMINAL ID (TWX)
000008                             1169+IJLTWRU  EQU   X'08' WRITE WRU (WTTA)                               3-2
000009                             1170+IJLTWRRT EQU   X'09' WRITE RESPONSE TO READ TEXT
000010                             1171+IJLTWLAD EQU   X'10' WRITE AT LINE ADDRESS
000011                             1172+IJLTRTWT EQU   X'11' READ TEXT NON-BUFFER OR WRITE TEXT NON-BUFFER
000012                             1173+IJLTRBWB EQU   X'12' READ TEXT IN BUFFER OR WRITE TEXT IN BUFFER
000020                             1174+IJLTRRWT EQU   X'20' READ RESPONSE TO WRITE TEXT
000021                             1175+IJLTRSET EQU   X'21' RESET FUNCTIONS (ACK,NACK,DISABLE)
000022                             1176+IJLTRDSK EQU   X'22' READ WITH SKIP
000023                             1177+IJLTWDBK EQU   X'23' WRITE BREAK (WTTA)                           3-7
000025                             1178+IJLTARU1 EQU   X'25' DISCONNECT (ARU)
000024                             1179+IJLRDNQ2 EQU   X'24' READ ENQ
000030                             1180+IJLBSCTP EQU   X'30' BSC ERP TP-CODE ZONE FIELD
000031                             1181+IJLRDSKI EQU   X'31' READ SKIP (ERP)
000032                             1182+IJLWNQTC EQU   X'32' WRITE ENQ (ERP)
000034                             1183+IJLRDNQ1 EQU   X'34' READ ENQ (ERP)
000036                             1184+IJLERPRS EQU   X'36' ERP RESET TP-CODE
0000FF                             1185+IJLTTCCW EQU   X'FF' TERMINAL TEST PROGRAM CODE


                                   1187+*  CODES FOR HARDWARE TYPES

                                   1189+*        CONTROL UNITS AND DATA ADAPTERS

000001                             1191+IJLC7770 EQU   1
000002                             1192+IJLC7772 EQU   2
000002                             1193+IJLC777X EQU   2
000003                             1194+IJLC2848 EQU   3
000004                             1195+IJLC2701 EQU   4
000005                             1196+IJLC2702 EQU   5
000006                             1197+IJLC2703 EQU   6
000007                             1198+IJLC3272 EQU   7 CONTROL UNIT FOR LOCAL 3277           3-A

                                   1200+*        DEVICES AND TERMINALS

000000                             1202+IJLDNULL EQU   0 IDENTIFIES AUDIO RESPONSE UNITS
000001                             1203+IJLD1030 EQU   1
000002                             1204+IJLD1060 EQU   2
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   26


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000003                             1205+IJLD2848 EQU   3
000004                             1206+IJLD83B3 EQU   4
000005                             1207+IJLD115A EQU   5
000006                             1208+IJLD2260 EQU   6
000007                             1209+IJLD1050 EQU   7
000008                             1210+IJLD2740 EQU   8
000009                             1211+IJLDTW33 EQU   9
00000A                             1212+IJLDTW35 EQU   10
00000B                             1213+IJLDS360 EQU   11
00000C                             1214+IJLD1130 EQU   12
00000D                             1215+IJLD2780 EQU   13
00000E                             1216+IJLDWTTA EQU   14 DEVICE =WTTA                                   3-2
00000B                             1217+IJLD2020 EQU   IJLDS360 DEVICE CODE FOR 2020 IS 15               3-3
000011                             1218+IJLD3277 EQU   17 3-A


                                   1220+*  PUB FLAGS                                                        3-A
000080                             1221+IJLZPBSZ EQU   X'80' PUB BUSY                                   3-A
000004                             1222+IJLZPBDE EQU   X'04' DEVICE END POSTING                         3-A


                                   1224+*  ABSOLUTE HARDWARE ADDRESSES

000040                             1226+IJLCSW   EQU   64 CHANNEL STATUS WORD
000040                             1227+IJLCSWKY EQU   IJLCSW+0 KEY
000041                             1228+IJLCSWCA EQU   IJLCSW+1 COMMAND ADDRESS
000044                             1229+IJLCSWS0 EQU   IJLCSW+4 STATUS BYTE 0
000045                             1230+IJLCSWS1 EQU   IJLCSW+5 STATUS BYTE 1
000046                             1231+IJLCSWBC EQU   IJLCSW+6 BYTE COUNT


                                   1233+*  SYMBOLIC CHANNEL STATUS WORD STATUS BITS                         3-A
000080                             1234+IJLZ1S80 EQU   X'80' ATTENTION                              3-A
000040                             1235+IJLZ1S40 EQU   X'40' STATUS MODIFIER                            3-A
000020                             1236+IJLZ1S20 EQU   X'20' CONTROL UNIT END                           3-A
000010                             1237+IJLZ1S10 EQU   X'10' BUSY                                       3-A
000008                             1238+IJLZ1S08 EQU   X'08' CHANNEL END                                3-A
000004                             1239+IJLZ1S04 EQU   X'04' DEVICE END                                 3-A
000002                             1240+IJLZ1S02 EQU   X'02' UNIT CHECK                                 3-A
000001                             1241+IJLZ1S01 EQU   X'01' UNIT EXCEPTION                             3-A


                                   1243+*  SYMBOLIC SUPERVISOR CALL CODES

000002                             1245+IJLLGTRN EQU   2 SVC NUMBER FOR EXECUTION OF LOGICAL TRANSIENT
000004                             1246+IJLZSVC4 EQU   4 LOAD A PHASE FROM CORE IMAGE LIBRARY            3-A
000019                             1247+IJLHIODQ EQU   25 SVC NUMBER FOR HALT I/O AND DEQUEUE CCB
00001B                             1248+IJLHIO   EQU   27 SVC NUMBER FOR HALT I/O


                                   1250+* PROGRAM CANCEL MESSAGE CODES
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   27


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000000                             1252+IJLDTFA  EQU   0 NON-OPEN DTFBT
000001                             1253+IJLDTFB  EQU   1 DTFBT FIELD NOT INITIALIZED
000002                             1254+IJLDECBA EQU   2 DECB FIELD NOT INITIALIZED
000003                             1255+IJLMWAA  EQU   3 MULTIPLE WAIT COUNT NEGATIVE
000004                             1256+IJLMWAB  EQU   4 MULTIPLE WAIT COUNT EXCEEDS LENGTH OF ECBLIST
000005                             1257+IJLBFRA  EQU   5 ATTEMPTED PROCESSING NON-BTAM BUFFER
000006                             1258+IJLBFRB  EQU   6 UNEXPECTED ERROR IN RELBUF
000007                             1259+IJLBFRC  EQU   7 REQBUF COUNT NEGATIVE
000008                             1260+IJLRPLA  EQU   8 RESETPL DECB NE LCB DECB


                                   1262+* ERP MESSAGE CODES

000014                             1264+IJLMSERP EQU   20 ERROR IN ERP
000015                             1265+IJLMSCDC EQU   21 CHANNEL DATA CHECK
000016                             1266+IJLMSSNO EQU   22 SHOULD NOT OCCUR
000017                             1267+IJLMSCHC EQU   23 CHAINING CHECK
000018                             1268+IJLMSPRC EQU   24 PROGRAM CHECK
000019                             1269+IJLMSPTC EQU   25 PROTECTION CHECK
00001A                             1270+IJLMSUNE EQU   26 UNIT EXECPTION ERROR
00001B                             1271+IJLMSEQC EQU   27 EQUIPMENT CHECK
00001C                             1272+IJLMSLSD EQU   28 LOST DATA
00001D                             1273+IJLMSTOT EQU   29 TIME OUT
00001E                             1274+IJLMSNVR EQU   30 INTERVENTION REQUIRED
00001F                             1275+IJLMSBOC EQU   31 BUS OUT CHECK
000020                             1276+IJLMSDTC EQU   32 DATA CHECK
000021                             1277+IJLMSOVR EQU   33 OVERRUN
000022                             1278+IJLMSCRJ EQU   34 COMMAND REJECT
000023                             1279+IJLMSENQ EQU   35 STX-ENQ RECEIVED
000024                             1280+IJLMSTNQ EQU   36 STX-TEXT-ENQ RECEIVED
000025                             1281+IJLMEOTR EQU   37 EOT RESPONSE RECEIVED
000026                             1282+IJLMSHBO EQU   38 HARDWARE BUFFER OVERFLOW
000027                             1283+IJLMSTRM EQU   39 2740-M2 TERMINAL ELECTRONIC FAILURE               3-5
000028                             1284+IJLMSIOF EQU   40 2740-M2 TERMINAL I/O FAILURE                      3-5
000029                             1285+IJLMSVRC EQU   41 2740-M2 VRC ERROR                                 3-5
00002A                             1286+IJLMSPAR EQU   42 2740-M2 PARITY ERROR                              3-5
00002B                             1287+IJLMZCCK EQU   43 L3277 CONTROL CHECK                   3-A
00002C                             1288+IJLMZOPC EQU   44 L3277 OPERATION CHECK                 3-A
0000FE                             1289+IJLMCON1 EQU   254 ONLINE TEST MESSAGE CODE FOR RECEIVER AND      3-6
                                   1290+*                        BTAM CONTROL MESSAGE INDICATOR             3-6
0000FF                             1291+IJLMCON2 EQU   255 ONLINE TEST MESSAGE CODE FOR TRANSMITTER AND    3-6
                                   1292+*                        BTAM CONTROL MESSAGE INDICATOR             3-6


                                   1294+*        MISCELANEOUS CONSTANTS                                     3-A
000000                             1295+IJLKONT0 EQU   0 CONSTANT OF 0                         3-A
000001                             1296+IJLKONT1 EQU   1 CONSTANT OF 1                         3-A
000002                             1297+IJLKONT2 EQU   2 CONSTANT OF 2                         3-A
000003                             1298+IJLKONT3 EQU   3 CONSTANT OF 3                         3-A
000004                             1299+IJLKONT4 EQU   4 CONSTANT OF 4                         3-A
000005                             1300+IJLKONT5 EQU   5 CONSTANT OF 5                         3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   28


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000006                             1301+IJLKONT6 EQU   6 CONSTANT OF 6                         3-A
000007                             1302+IJLKONT7 EQU   7 CONSTANT OF 7                         3-A
000008                             1303+IJLKONT8 EQU   8 CONSTANT OF 8                         3-A
000009                             1304+IJLKONT9 EQU   9 CONSTANT OF 9                          3-A
00000A                             1305+IJLKNT10 EQU   10 CONSTANT OF 10                         3-A
00000B                             1306+IJLKNT11 EQU   11 CONSTANT OF 11                         3-A
00000C                             1307+IJLKNT12 EQU   12 CONSTANT OF 12                        3-A
00000D                             1308+IJLKNT13 EQU   13 CONSTANT OF 13                        3-A
00000E                             1309+IJLKNT14 EQU   14 CONSTANT OF 14                        3-A
00000F                             1310+IJLKNT15 EQU   15 CONSTANT OF 15                        3-A
000010                             1311+IJLKNT16 EQU   16 CONSTANT OF 16                        3-A
000013                             1312+IJLKNT19 EQU   19 CONSTANT OF 19                                  3-B
000014                             1313+IJLKNT20 EQU   20 CONSTANT OF 20                        3-A
000015                             1314+IJLKNT21 EQU   21 CONSTANT OF 21                        3-A
000016                             1315+IJLKNT22 EQU   22 CONSTANT OF 22                        3-A
000017                             1316+IJLKNT23 EQU   23 CONSTANT OF 23                        3-A
000019                             1317+IJLKNT25 EQU   25 CONSTANT OF 25                        3-A
00001C                             1318+IJLKNT28 EQU   28 CONSTANT OF 28                        3-A
000020                             1319+IJLKNT32 EQU   32 CONSTANT OF 32                        3-A
000022                             1320+IJLKNT34 EQU   34 CONSTANT OF 34                        3-A
000028                             1321+IJLKNT40 EQU   40 CONSTANT OF 40                         3-A
00002E                             1322+IJLKNT46 EQU   46 CONSTANT OF 46                        3-A
000035                             1323+IJLKNT53 EQU   53 CONSTANT OF 53                        3-A
000039                             1324+IJLKNT57 EQU   57 CONSTANT OF 57                        3-A
000040                             1325+IJLKNT64 EQU   64 CONSTANT OF 64                    3-A
000048                             1326+IJLKNT72 EQU   72 CONSTANT OF 72                         3-A
00004A                             1327+IJLKNT74 EQU   74 CONSTANT OF 74                         3-A
00004C                             1328+IJLKNT76 EQU   76 CONSTANT OF 76                        3-A
00005A                             1329+IJLKNT90 EQU   90 CONSTANT OF 90                        3-A
00005E                             1330+IJLKNT94 EQU   94 CONSTANT OF 94                        3-A
000062                             1331+IJLKNT98 EQU   98 CONSTANT OF 98                        3-A
00006C                             1332+IJLKT108 EQU   108 CONSTANT OF 108                       3-A
000084                             1333+IJLKT132 EQU   132 CONSTANT OF 132                       3-A
000088                             1334+IJLKT136 EQU   136 CONSTANT OF 136                       3-A
000000                             1335+IJLKTX00 EQU   X'00' NULL                                  3-A
000001                             1336+IJLKTX01 EQU   X'01' HEX CONSTANT OF 01                    3-A
000002                             1337+IJLKTX02 EQU   X'02' HEX CONSTANT OF 2                     3-A
000003                             1338+IJLKTX03 EQU   X'03' CONSTANT OF X'03'                      3-A
000004                             1339+IJLKTX04 EQU   X'04' HEX CONSTANT OF 04                    3-A
000005                             1340+IJLKTX05 EQU   X'05' CONSTANT OF X'05'                      3-A
000006                             1341+IJLKTX06 EQU   X'06' HEX CONSTANT OF 06                    3-A
000007                             1342+IJLKTX07 EQU   X'07' HEX CONSTANT OF X'07'              3-B
000008                             1343+IJLKTX08 EQU   X'08' CONSTANT OF X'08'                     3-A
000009                             1344+IJLKTX09 EQU   X'09' HEX CONSTANT OF 9                     3-A
00000A                             1345+IJLKTX0A EQU   X'0A' HEX CONSTANT OF X'0A'                  3-B
000010                             1346+IJLKTX10 EQU   X'10' CONSTANT OF X'10'                      3-A
000011                             1347+IJLKTX11 EQU   X'11' CONSTANT OF X'11'                      3-A
000025                             1348+IJLKTX25 EQU   X'25' HEX CONSTANT OF X'25'            3-B
000030                             1349+IJLKTX30 EQU   X'30' HEX CONSTANT OF X'30'            3-B
000040                             1350+IJLKTX40 EQU   X'40' DTF CODE FOR DTFBT                    3-A
000080                             1351+IJLKTX80 EQU   X'80' HEX CONSTANT OF 80                    3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   29


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00000F                             1352+IJLKTX0F EQU   X'0F' HEX CONSTANT OF 0F                    3-A
00003F                             1353+IJLKTX3F EQU   X'3F' CONSTANT OF X'3F'                     3-A
0000B0                             1354+IJLKTXB0 EQU   X'B0' 3270 LOCAL DEVICE TYPE                3-A
0000F0                             1355+IJLKTXF0 EQU   X'F0' CHARACTER 0                           3-A
0000F3                             1356+IJLKTXF3 EQU   X'F3' CHARACTER 3                           3-A
0000FE                             1357+IJLKTXFE EQU   X'FE' CONSTANT OF 254                       3-A
0000FF                             1358+IJLKTXFF EQU   X'FF' HEX CONSTANT OF 255                   3-A
000008                             1359+IJLZ2S08 EQU   X'08' CHANNEL DATA CHECK                         3-A
000043                             1360+IJL2848  EQU   X'40'+IJLC2848 CONSTANT FOR 2848 CU                3-B
000086                             1361+IJLZ275E EQU   X'86' LOWER CASE F EBCDIC                            3-B
000046                             1362+IJLZ275A EQU   X'46' UPPER CASE F ASCII                             3-B
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   30


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   1364+******** IJLCPGX -- CHANNEL PROGRAM GENERATOR/EXECUTOR ********


                                   1366+*        TESTING AND INITIALIZATION

000EEE                             1368+IJLCPGX  DC    0H'0' INSURE ALIGNMENT
000EEE 18C1                        1369+         LR    IJLDECBR,IJLPRMRG ESTABLISH DECB ADDRESSABILITY
000EF0 58D0 C008            00008  1370+         L     IJLDTFRG,IJLDEDFA-1 GET DTFBT ADDR FROM DECB
000EF4 9101 D008      00008        1371+         TM    IJLDTFF1,IJLBOPEN TEST IF LINE GROUP OPEN
000EF8 4710 F0DC            00F04  1372+         BO    IJLGX020 BIT ON SAYS IT IS OPEN
000EFC 9200 F0B8      00EE0        1373+         MVI   IJLCNBLK,IJLDTFA SET CANCEL CODE FOR UNOPENED DTFBT
000F00 47F0 F778            015A0  1374+         B     IJLCANCL GO TO PREPARE CANCEL

000F04                             1376+IJLGX020 EQU   *
000F04 45E0 F718            01540  1377+         BAL   IJLLNKRG,IJLPTLCB GET ADDRESS OF LCB AND CCB
000F08 9547 D014      00014        1378+         CLI   IJLDTFTU,IJLKTX40+IJLC3272 CU = 3272              3-A
000F0C 4770 F0FA            00F22  1379+         BNE   IJLP2848 IF NOT, SKIP DTF CHECK           3-A
000F10                             1380+IJLZDTFC EQU   * 3-A
000F10 D502 F7E8 D005 01610 00005  1381+         CLC   =XL3'0',IJLDTFDX+1 IS DTF BUSY
000F16 4780 F12C            00F54  1382+         BE    IJLGX025 IF NOT, SKIP LINE ERROR CHECK
000F1A 9204 F0AB      00ED3        1383+         MVI   IJLRCLOC,IJLRLCBB LCB(DTFBT) BUSY
000F1E 47F0 F7A2            015CA  1384+         B     IJLUSER RETURN TO USER

000F22                             1386+IJLP2848 EQU   *
000F22 9140 1010      00010        1387+         TM    IJLLCBFL,IJLBLEOP CHECK FOR LINE ERROR AT OPEN
000F26 4780 F11A            00F42  1388+         BZ    IJLGX027 IF NONE, PROCEED
000F2A 9241 C000      00000        1389+         MVI   IJLDEECB,IJLCIOER ELSE POST I/O ERROR TO DECB
000F2E D204 C010 1020 00010 00020  1390+         MVC   IJLDESN0(5),IJLLCBC0 POST SENSE, RESID COUNT, LAST CM
000F34 D201 C01E 1026 0001E 00026  1391+         MVC   IJLDEST0(2),IJLLCBC0+6 POST STATUS
000F3A 9214 F0AB      00ED3        1392+         MVI   IJLRCLOC,IJLRLEOP SET RETURN CODE TO LINE ERROR ON O
000F3E 47F0 F7A2            015CA  1393+         B     IJLUSER GO TO USER RETURN POINT

000F42                             1395+IJLGX027 EQU   *
000F42 D502 1011 F7E8 00011 01610  1396+         CLC   IJLLCBDE,=XL3'0' CHECK DECB ADDRESS TO BE ZERO
000F48 4780 F12C            00F54  1397+         BE    IJLGX025 NO ERROR IF ADDRESS IS ZERO
000F4C 9204 F0AB      00ED3        1398+         MVI   IJLRCLOC,IJLRLCBB RETURN CODE FOR LCB BUSY
000F50 47F0 F7A2            015CA  1399+         B     IJLUSER

000F54                             1401+IJLGX025 EQU   *
000F54 1B00                        1402+         SR    IJLICREG,IJLICREG CLEAR REGISTER 0
000F56 9200 C000      00000        1403+         MVI   IJLDEECB,IJLCNULL SET NON-COMPLETION CODE IN ECB
000F5A 9400 C018      00018        1404+         NI    IJLDEOF2,B'00000000' TURN OFF FLAG BYTE IN DECB
000F5E D704 C010 C010 00010 00010  1405+         XC    IJLDESN0(5),IJLDESN0 CLEAR SENSE, RESID COUNT,CC
000F64 D705 C01A C01A 0001A 0001A  1406+         XC    IJLDERAD(6),IJLDERAD CLEAR RESPONSE, TP CODE, STATUS
000F6A D70F 1018 1018 00018 00018  1407+         XC    IJLLCBSW(16),IJLLCBSW CLEAR ERP AREA
000F70 9547 D014      00014        1408+         CLI   IJLDTFTU,IJLKTX40+IJLC3272 CU = 3272              3-A
000F74 4780 F318            01140  1409+         BE    IJLFDLCB YES, GO TO CHANNEL PROGRAM GENERATOR       3-A
000F78 9101 D002      00002        1410+         TM    IJLDTFFE,X'01' OIU FEATURE FLAG?                     3-5
000F7C 4780 F170            00F98  1411+         BZ    IJLCUCK1 IF NOT, CONTINUE                            3-5
000F80 9503 C005      00005        1412+         CLI   IJLDEOTC,IJLOTCRT OPTYPE READ CONTINUE?              3-5
000F84 4770 F170            00F98  1413+         BNE   IJLCUCK1 IF NOT, CONTINUE                            3-5
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   31


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000F88 9101 1010      00010        1414+         TM    IJLLCBFL,IJLOIUMS IS OIU MSG FLAG ON IN LCB          3-5
000F8C 4780 F170            00F98  1415+         BZ    IJLCUCK1 IF NOT, CONTINUE                            3-5
000F90 9224 F0AB      00ED3        1416+         MVI   IJLRCLOC,IJLRILTT SET RETURN CODE OF ILLEGAL READ TT 3-5
000F94 47F0 F7A2            015CA  1417+         B     IJLUSER 3-5
000F98 4140 1028            00028  1418+IJLCUCK1 LA    IJLWKRGE,IJLLCBC1 POINT TO CCW AREA+8                3-5
000F9C 5040 1008            00008  1419+         ST    IJLWKRGE,IJLLCBCA-1 PUT CCW ADDRESS IN CCB
000FA0 94F0 1016      00016        1420+         NI    IJLLCBAR,X'FF'-IJLRSBAR RESET RETRY COUNTER
000FA4 1B44                        1421+         SR    IJLWKRGE,IJLWKRGE CLEAR WORK REGISTER
000FA6 4340 D001            00001  1422+         IC    IJLWKRGE,IJLDTFSL GET SIZE OF LCB FROM DTFBT
000FAA                             1423+IJLNTYCM EQU   * 3-6
000FAA 9104 C004      00004        1424+         TM    IJLDEOF1,IJLBENTS CHECK ENTRY-S FLAG
000FAE 4780 F190            00FB8  1425+         BZ    IJLGX024
000FB2 D202 C015 C025 00015 00025  1426+         MVC   IJLDELEA,IJLDEPP UPDATE ENTRY WITH POLL PTR
000FB8                             1427+IJLGX024 EQU   *

                                   1429+*        TEST WHETHER GENERATE INITIAL CONTACT

000FB8 1B00                        1431+         SR    IJLICREG,IJLICREG CLEAR IC REGISTER
000FBA 5840 C014            00014  1432+         L     IJLWKRGE,IJLDELEA-1 GET STORED LIST ENTRY
000FBE 951A C005      00005        1433+         CLI   IJLDEOTC,IJLMAXRW
000FC2 4720 F248            01070  1434+         BH    IJLGX050 HIGH MEANS OPTYPE IS A CONTROL
000FC6 9507 D00C      0000C        1435+         CLI   IJLDTFDV,IJLD1050 CHECK FOR 1050
000FCA 4770 F1B6            00FDE  1436+         BNE   IJLGX021
000FCE 9505 C005      00005        1437+         CLI   IJLDEOTC,IJLOTCRV OPERATION READ CONVERSATIONAL
000FD2 4780 F1CE            00FF6  1438+         BE    IJLNDNS1
000FD6 9506 C005      00005        1439+         CLI   IJLDEOTC,IJLOTCWV OPERATION WRITE CONVERSATIONAL
000FDA 4780 F1CE            00FF6  1440+         BE    IJLNDNS1
000FDE                             1441+IJLGX021 EQU   *
000FDE 9180 C004      00004        1442+         TM    IJLDEOF1,IJLBINIT CHECK IF INITIAL
000FE2 4780 F248            01070  1443+         BZ    IJLGX050 OFF IS NON-INITIAL

                                   1445+*        OPTYPE SEGMENT PREPARATION FOR INITIAL OPTYPES

000FE6                             1447+IJLFNDNS EQU   *
000FE6 9508 D00C      0000C        1448+         CLI   IJLDTFDV,IJLD2740 CHECK FOR 2740
000FEA 4770 F1CE            00FF6  1449+         BNE   IJLNDNS1
000FEE 9180 D003      00003        1450+         TM    IJLDTFFE+1,IJLBTSTC IS STATION CONTROL PRESENT
000FF2 4780 F248            01070  1451+         BZ    IJLGX050
000FF6                             1452+IJLNDNS1 EQU   *
000FF6 5840 C014            00014  1453+         L     IJLWKRGE,IJLDELEA-1 GET ENTRY ADDRESS
000FFA 4300 C005            00005  1454+         IC    IJLICREG,IJLDEOTC GET OPTYPE CODE FROM DECB
000FFE 45E0 F754            0157C  1455+         BAL   IJLLNKRG,IJLPTSGM POINT TO SEGMENT MODEL WITH ICREG
001002 D100 F0C5 5007 00EED 00007  1456+         MVN   IJLPDGIT,7(IJLWKRGO) PICK OUT P/A CHAR COUNT
001008 4850 F0C4            00EEC  1457+         LH    IJLWKRGO,IJLPDGIT-1 GET COUNT INTO REGISTER

                                   1459+* THE NEXT FOUR INSTRUCTIONS DYNAMICALLY CREATE THE DISPLACEMENT
                                   1460+* FIELD OF FOUR TM INSTRUCTIONS.

00100C 4250 F201            01029  1462+         STC   IJLWKRGO,IJLDTM0A+3 USE COUNT AS TM DISPLACEMENT
001010 4250 F209            01031  1463+         STC   IJLWKRGO,IJLDTM0B+3 USE COUNT AS TM DISPLACEMENT
001014 4250 F229            01051  1464+         STC   IJLWKRGO,IJLDTM0C+3 USE COUNT AS TM DISPLACEMENT
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   32


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001018 4250 F233            0105B  1465+         STC   IJLWKRGO,IJLDTM0D+3 USE COUNT AS TM DISPLACEMENT
00101C 4155 0001            00001  1466+         LA    IJLWKRGO,1(IJLWKRGO) COMPUTE ENTRY WIDTH
001020 47F0 F1FE            01026  1467+         B     *+6 SKIP OVER POINTER MOVE

001024                             1469+IJLGX032 EQU   *
001024 1A45                        1470+         AR    IJLWKRGE,IJLWKRGO MOVE POINTER TO NEXT ENTRY

                                   1472+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACE-
                                   1473+* MENT FIELD.

001026 9140 4000      00000        1475+IJLDTM0A TM    *-*(IJLWKRGE),IJLBSKIP TEST IF ENTRY IS SKIP
00102A 4780 F216            0103E  1476+         BZ    IJLGX034 IF NON-SKIP, PROCEED

                                   1478+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACE-
                                   1479+* MENT FIELD.

00102E 9180 4000      00000        1481+IJLDTM0B TM    *-*(IJLWKRGE),IJLBPEOL IF SKIP, CHECK END OF LIST
001032 4780 F1FC            01024  1482+         BZ    IJLGX032 IF NOT EOL, CHECK NEXT ENTRY
001036 9210 F0AB      00ED3        1483+         MVI   IJLRCLOC,IJLRALSK RETURN CODE FOR ALL SKIPPED
00103A 47F0 F7A2            015CA  1484+         B     IJLUSER GO TO USER RETURN POINT

00103E                             1486+IJLGX034 EQU   * NON-SKIP ENTRY FOUND
00103E 5040 C014            00014  1487+         ST    IJLWKRGE,IJLDELEA-1 POINT ENTRY TO FIRST TERMINA
001042 9101 C005      00005        1488+         TM    IJLDEOTC,IJLBRDOP TEST WHETHER READ
001046 4710 F244            0106C  1489+         BO    IJLGX035 BRANCH IF YES
00104A 5040 C020            00020  1490+         ST    IJLWKRGE,IJLDEAP-1 IT IS WRITE, STORE ADDR. PTR
00104E                             1491+IJLGX040 EQU   * SEEK MORE NON-SKIPS

                                   1493+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACE-
                                   1494+* MENT FIELD.

00104E 9180 4000      00000        1496+IJLDTM0C TM    *-*(IJLWKRGE),IJLBPEOL IS THIS END OF LIST
001052 4710 F23C            01064  1497+         BO    IJLGX041 IF SO, GO SET SWITCH
001056 1A45                        1498+         AR    IJLWKRGE,IJLWKRGO ELSE MOVE TO NEXT LIST ENTRY

                                   1500+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACE-
                                   1501+* MENT FIELD.

001058 9140 4000      00000        1503+IJLDTM0D TM    *-*(IJLWKRGE),IJLBSKIP CHECK FOR SKIP
00105C 4710 F226            0104E  1504+         BO    IJLGX040 IF IT IS SKIP, GO CHECK EOL
001060 47F0 F248            01070  1505+         B     IJLGX050 ELSE GO GENERATE

001064                             1507+IJLGX041 EQU   * SET SWITCH FOR M.A. CMD CHAI
001064 9601 F0BC      00EE4        1508+         OI    IJLPRGSW,IJLBMACC SET PROGRAM SWITCH FOR MODEL EXPAND
001068 47F0 F248            01070  1509+         B     IJLGX050 GO GENERATE SEGMENT

00106C                             1511+IJLGX035 EQU   * IT IS READ
00106C 5040 C024            00024  1512+         ST    IJLWKRGE,IJLDEPP-1 STORE POLLING POINTER
001070                             1513+IJLGX050 EQU   * OPTYPE SEGMENT GENERATION
001070 9503 D00C      0000C        1514+         CLI   IJLDTFDV,IJLD2848 CHECK FOR 2260 REMOTE
001074 4770 F26C            01094  1515+         BNE   IJLSGM IF NOT 2260 REMOTE, PROCEED
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   33


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001078 950C C005      00005        1516+         CLI   IJLDEOTC,IJLOTCWL IS OPTYPE WRITE TL
00107C 4770 F260            01088  1517+         BNE   IJLWTCHK IF NOT, CHECK FOR WRITE TT
001080 9608 1010      00010        1518+         OI    IJLLCBFL,IJLBWLAD TURN ON LINE ADDRESS FLAG
001084 47F0 F26C            01094  1519+         B     IJLSGM

001088                             1521+IJLWTCHK EQU   *
001088 9504 C005      00005        1522+         CLI   IJLDEOTC,IJLOTCWT IS OPTYPE WRITE TT
00108C 4780 F26C            01094  1523+         BE    IJLSGM IF SO, PROCEED
001090 94F7 1010      00010        1524+         NI    IJLLCBFL,X'FF'-IJLBWLAD TURN OFF LINE ADDRESS FLAG
001094                             1525+IJLSGM   EQU   *
001094 4300 C005            00005  1526+         IC    IJLICREG,IJLDEOTC GET OPTYPE OFFSET
001098 45E0 F754            0157C  1527+         BAL   IJLLNKRG,IJLPTSGM POINT TO SEGMENT MODEL WITH ICREG
00109C 58A0 F7E0            01608  1528+         L     IJLWKRG2,=V(IJLSGEN) ADDR OF CHAN PGM GENERATOR      3-6
0010A0 05EA                        1529+         BALR  IJLLNKRG,IJLWKRG2 GO GENERATE CHANNEL PROGRAM        3-6
0010A2 9103 C004      00004        1530+         TM    IJLDEOF1,IJLBARAS+IJLBLGTS IS AREA 'S' OR LENGTH 'S'
0010A6 4780 F28E            010B6  1531+         BZ    IJLGX060 SHOULD NOT BE ON, GO CHECK FOR RESET
0010AA 9220 F0AB      00ED3        1532+         MVI   IJLRCLOC,IJLRNBGX SET RETURN CODE FOR NO BUF PROG GEN
0010AE 47F0 F7A2            015CA  1533+         B     IJLUSER GO TO USER RETURN

                                   1535+*        TEST WHETHER GENERATE RESET SEGMENT

0010B2 1810                        1537+IJLGX059 LR    IJLLCBRG,IJLICREG RESTORE  IJLLCBRG
0010B4 1B00                        1538+         SR    IJLICREG,IJLICREG RE-CLEAR REGISTER 0
0010B6                             1539+IJLGX060 EQU   *
0010B6 9140 C004      00004        1540+         TM    IJLDEOF1,IJLBRSET TEST RESET FLAG
0010BA 4780 F2F4            0111C  1541+         BZ    IJLGXEX OFF = NO RESET, GO DO
0010BE                             1542+IJLGX061 EQU   * CHECK FOR RESET ALLOWED
0010BE 9508 D00C      0000C        1543+         CLI   IJLDTFDV,IJLD2740 IS DEVICE = 2740                   3-1
0010C2 4770 F2BE            010E6  1544+         BNE   IJL2740N 3-1
0010C6 9501 C005      00005        1545+         CLI   IJLDEOTC,IJLOTCRI IS OPERATION = READ TI             3-1
0010CA 4770 F2BE            010E6  1546+         BNE   IJL2740N IF NOT, CONTINUE NORMAL PROCESSING          3-1
0010CE 91C0 D003      00003        1547+         TM    IJLDTFFE+1,X'C0' TRC OR STC                          3-1
0010D2 4770 F2BE            010E6  1548+         BNZ   IJL2740N IF SO,CONTINUE NORMAL PROCESSING            3-1
0010D6 9104 D008      00008        1549+         TM    IJLDTFF1,IJLBSWCH IS LINE SWITCHED                   3-1
0010DA 4710 F2BE            010E6  1550+         BO    IJL2740N IF SO,CONTINUE NORMAL PROCESSING            3-1
0010DE 9201 1008      00008        1551+         MVI   IJLLCBC0-24,X'01' CHANGE NOP TO WRITE                3-5
0010E2 47F0 F2F4            0111C  1552+         B     IJLGXEX GO DO                                        3-1
0010E6                             1553+IJL2740N EQU   * 3-1
0010E6 9140 1024      00024        1554+         TM    IJLLCBCF-8,X'40' CHECK FOR CC FLAG IN PREVIOUS CCW
0010EA 4710 F2CE            010F6  1555+         BO    IJLGX062 OK TO GEN RESET SEG IF BIT ON
0010EE 920C F0AB      00ED3        1556+         MVI   IJLRCLOC,IJLRUDOT RESET OPTION ILLEGAL
0010F2 47F0 F7A2            015CA  1557+         B     IJLUSER

0010F6                             1559+IJLGX062 EQU   * GENERATE RESET SEGMENT
0010F6 4150 000A            0000A  1560+         LA    IJLWKRGO,IJLOTCWN LOAD OFFSET FOR WRITE NAK
0010FA 9101 C005      00005        1561+         TM    IJLDEOTC,IJLBRDOP TEST WHETHER READ
0010FE 4780 F2DE            01106  1562+         BZ    IJLGX070 EVEN IS WRITE, GO GENERATE
001102 4150 0008            00008  1563+         LA    IJLWKRGO,IJLOTCWA ELSE LOAD OFFSET FOR WRITE ACK
001106                             1564+IJLGX070 EQU   * GENERATE RESET SEGMENT
001106 9503 D00C      0000C        1565+         CLI   IJLDTFDV,X'03' IS DEVICE A 2260 REMOTE             3-8
00110A 4770 F2EA            01112  1566+         BNE   IJLNOACK NO, DON'T GET ACK OFFSET                3-8
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   34


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00110E 4150 0008            00008  1567+         LA    IJLWKRGO,IJLOTCWA ELSE LOAD ACK OFFSET             3-8
001112                             1568+IJLNOACK EQU   * 3-8
001112 45E0 F756            0157E  1569+         BAL   IJLLNKRG,IJLPTSGW POINT TO SEG MODEL WITH IJLWKRGO
001116 58A0 F7E0            01608  1570+         L     IJLWKRG2,=V(IJLSGEN) ADDR OF CHAN PGM GENERATOR      3-6
00111A 05EA                        1571+         BALR  IJLLNKRG,IJLWKRG2 GO GENERATE CHANNEL PROGRAM        3-6
00111C                             1572+IJLGXEX  EQU   * EXECUTION OF GENERATED PROGRAM
00111C 94BF 1024      00024        1573+         NI    IJLLCBCF-8,X'FF'-X'40' TURN OFF CC FLAG IN LAST CCW
001120 45E0 F718            01540  1574+         BAL   IJLLNKRG,IJLPTLCB MOVE POINTER TO LCB
001124                             1575+IJLGXEX1 EQU   *
001124 50C0 F0B4            00EDC  1576+         ST    IJLDECBR,IJLFWWA1 HOLD DECB ADDR IN TEMP FW
001128 D202 1011 F0B5 00011 00EDD  1577+         MVC   IJLLCBDE,IJLFWWA1+1 MOVE DECB ADDR TO LCB
00112E 1811                        1578+         LR    IJLCCBAR,IJLLCBRG PREPARE FOR WAIT AND EXCP
                                   1579+* 360N-CL-453 WAIT     CHANGE LEVEL 3-0
001130 9180 1002      00002        1580+         TM    2(1),X'80'
001134 4710 F312            0113A  1581+         BO    *+6
001138 0A07                        1582+         SVC   7
                                   1583+* 360N-CL-453 EXCP     CHANGE LEVEL 3-0
00113A 0A00                        1584+         SVC   0
00113C 47F0 F7A2            015CA  1585+         B     IJLUSER RETURN TO USER
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   35


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   1587+* PROGRAM GENERATION/EXECUTION LOGIC FOR LOCAL 2260 AND LOCAL 3277  3-A

001140                             1589+IJLFDLCB EQU   *
001140 50C0 F0B4            00EDC  1590+         ST    IJLDECBR,IJLFWWA1 PUT DECB ADDRESS IN WORK AREA
001144 D202 D005 F0B5 00005 00EDD  1591+         MVC   IJLDTFDX+1(3),IJLFWWA1+1 MOVE IT TO DTFBT HEADER
00114A 9501 C005      00005        1592+         CLI   IJLDEOTC,IJLOTCRI IS OPTYPE READ INITIAL           3-A
00114E 4780 F332            0115A  1593+         BE    IJLRDINT YES, DO LCB SCANNING                   3-A
001152 950D C005      00005        1594+         CLI   IJLDEOTC,IJLOTCRO IS OPTYPE A READ SHORT           3-A
001156 4770 F418            01240  1595+         BNE   IJLW2848 NO, HANDLE LIKE A WRITE                3-A
00115A                             1596+IJLRDINT EQU   * 3-A

                                   1598+* THE NEXT TWO INSTRUCTIONS DYNAMICALLY CREATE THE DISPLACEMENT
                                   1599+* FIELD OF TWO LA INSTRUCTIONS.

00115A D200 F357 D001 0117F 00001  1601+         MVC   IJLDLA01+3(1),IJLDTFSL INITIALIZE LA INSTRUCTION
001160 D200 F3D5 D001 011FD 00001  1602+         MVC   IJLDLA02+3(1),IJLDTFSL INITIALIZE LA INSTRUCTION
001166 94FD D004      00004        1603+         NI    IJLDTFDX,X'FF'-IJLB60RS TURN OFF RESCAN FLAG
00116A D703 F414 F414 0123C 0123C  1604+         XC    IJLZOWNF,IJLZOWNF CLEAR DEVICE OWNERSHIP FLG FIELD 3-A
001170                             1605+IJLFLCB1 EQU   * SEARCH FOR NON-SKIP NON-PRINTER LCB
001170 9103 1010      00010        1606+         TM    IJLLCBFL,IJLBSKPP+IJLB1053 TEST FLAGS
001174 4780 F382            011AA  1607+         BZ    IJLFLCB3 IF BOTH OFF, THIS IS IT
001178 9180 1010      00010        1608+         TM    IJLLCBFL,IJLBLLCB ELSE CHECK FOR LAST LCB

                                   1610+* THE FOLLOWING LA INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACE-
                                   1611+* MENT FIELD.

00117C 4111 0000            00000  1613+IJLDLA01 LA    IJLLCBRG,*-*(IJLLCBRG) POINT TO NEXT POSSIBLE LCB
001180 4780 F348            01170  1614+         BZ    IJLFLCB1 IF WAS NOT LAST, POINTER IS RIGHT
001184 9102 D004      00004        1615+         TM    IJLDTFDX,IJLB60RS CHECK RESCAN FLAG
001188 4780 F376            0119E  1616+         BZ    IJLFLCB2 IF NOT, KEEP GOING
00118C 9210 F0AB      00ED3        1617+         MVI   IJLRCLOC,IJLRALSK SET RETURN CODE FOR ALL SKIPPED
001190                             1618+IJLZRTRN EQU   * 3-A
001190 9480 D004      00004        1619+         NI    IJLDTFDX,IJLZ3RFT TURN OFF ALL FLAGS EXCEPT TERMTST  3-A
001194 D702 D005 D005 00005 00005  1620+         XC    IJLDTFDX+IJLKONT1(IJLKONT3),IJLDTFDX+IJLKONT1 3-A
                                   1621+*                                  CLEAR DTFBT HEADER               3-A
00119A 47F0 F7A2            015CA  1622+         B     IJLUSER RETURN TO USER                   3-A

00119E                             1624+IJLFLCB2 EQU   * FIRST TIME TO REACH LAST LCB
00119E 4110 D028            00028  1625+         LA    IJLLCBRG,IJLDTFRC SET POINTER TO 0'TH LCB
0011A2 9602 D004      00004        1626+         OI    IJLDTFDX,IJLB60RS SET RESCAN FLAG
0011A6 47F0 F348            01170  1627+         B     IJLFLCB1 CONTINUE SEARCH

0011AA                             1629+IJLFLCB3 EQU   * FIRST NON-SKIP NON-PRINTER LCB IS FOUND
0011AA 45E0 F51C            01344  1630+         BAL   IJLLNKRG,IJLBLDCW GENERATE UNIVERSAL CHANNEL PROGRAM
0011AE                             1631+IJLZCHKQ EQU   * CHECK Q FLAG                     3-A
0011AE 9108 1010      00010        1632+         TM    IJLLCBFL,IJLBQUED CHECK Q FLAG
0011B2 4710 F3CE            011F6  1633+         BO    IJLCKLC4 IF ON, ALREADY ENQUEUED, GO CHECK NEXT LCB
0011B6 9104 1010      00010        1634+         TM    IJLLCBFL,IJLBATTN CHECK ATTENTION FLAG
0011BA 4780 F3A6            011CE  1635+         BZ    IJLCKLC2 IF OFF, Q IS ALSO OFF, GO TO ENQUEUE
                                   1636+*        IF PASS HERE, Q OFF AND ATTN ON
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   36


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   1638+* THE FOLLOWING NOP INSTRUCTION IS SET TO AN UNCONDITIONAL BRANCH
                                   1639+* AFTER ONE EXECUTION   ON EACH MACRO CALL.

0011BE 4700 F3CE            011F6  1641+IJLCKBC  BC    X'0',IJLCKLC4 BRANCH TO CHECK NEXT LCB AFTER ONE ATT

                                   1643+* THE FOLLOWING INSTRUCTION SETS THE PRECEDING NOP TO AN UNCONDI-
                                   1644+* TIONAL BRANCH.

0011C2 92F0 F397      011BF        1646+         MVI   IJLCKBC+1,X'F0' DISABLE FURTHER ATTN READS
0011C6 5010 F410            01238  1647+         ST    IJLLCBRG,IJL26LCB SAVE LCB ADDRESS                   3-7
0011CA 47F0 F3CE            011F6  1648+         B     IJLCKLC4 GO TO CONTINUE SCAN

0011CE                             1650+IJLCKLC2 EQU   * ENQUE HERE
0011CE 9203 1030      00030        1651+         MVI   IJLLCBC1+IJLKONT8,IJLZNOPC MAKE 2ND CCW A NOP        3-A
0011D2 4140 1030            00030  1652+         LA    IJLWKRGE,IJLLCBC1+IJLKONT8 POINT TO 2ND CCW          3-A
0011D6 5040 1008            00008  1653+         ST    IJLWKRGE,IJLLCBCA-IJLKONT1 STORE IN CCB              3-A
0011DA 4520 F5D6            013FE  1654+         BAL   IJLWKRG3,IJLZCKPB DETERMINE IF OLTEP OWNS DEVICE   3-A
0011DE 1255                        1655+         LTR   IJLWKRGO,IJLWKRGO DOES OLTEP OWN DEVICE            3-A
0011E0 4780 F3C0            011E8  1656+         BZ    IJLZISIO NO, START I/O                         3-A
0011E4 47F0 F3CE            011F6  1657+         B     IJLCKLC4 CONTINUE SCAN OF OTHER LCBS      3-A
0011E8                             1658+IJLZISIO EQU   * SCHEDULE I/O                     3-A
0011E8 94F7 D004      00004        1659+         NI    IJLDTFDX,X'FF'-IJLB60NW TURN OFF NOP-WAIT FLAG
                                   1660+* 360N-CL-453 EXCP     CHANGE LEVEL 3-0
0011EC 0A00                        1661+         SVC   0
0011EE 9108 D004      00004        1662+         TM    IJLDTFDX,IJLB60NW HAS NOP INTERRUPT COME THROUGH
0011F2 4780 F3C6            011EE  1663+         BZ    *-4 IF NOT STAY HERE UNTIL COMPLETED
0011F6                             1664+IJLCKLC4 EQU   * CHECK FOR FINISH
0011F6 9180 1010      00010        1665+         TM    IJLLCBFL,IJLBLLCB CHECK FOR LAST LCB

                                   1667+* THE FOLLOWING LA INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACE-
                                   1668+* MENT FIELD.

0011FA 4111 0000            00000  1670+IJLDLA02 LA    IJLLCBRG,*-*(IJLLCBRG) POINT TO NEXT POSSIBLE LCB
0011FE 4780 F3EA            01212  1671+         BZ    IJLCKLC5 IF IT WAS NOT LAST, POINTER IS RIGHT
001202 4110 D028            00028  1672+         LA    IJLLCBRG,IJLDTFRC ELSE SET POINTER TO 0'TH LCB
001206 9102 D004      00004        1673+         TM    IJLDTFDX,IJLB60RS CHECK RESCAN FLAG
00120A 4710 F3FA            01222  1674+         BO    IJLSCEND GO TO END OF SCAN IF SO
00120E 9602 D004      00004        1675+         OI    IJLDTFDX,IJLB60RS TURN ON RESCAN FLAG
001212                             1676+IJLCKLC5 EQU   * CHECK FOR PRINTER OR SKIP
001212 9103 1010      00010        1677+         TM    IJLLCBFL,IJLBSKPP+IJLB1053 TEST FLAGS
001216 4770 F3CE            011F6  1678+         BNZ   IJLCKLC4 EITHER FLAG INVALIDATES
00121A 45E0 F5B2            013DA  1679+         BAL   IJLLNKRG,IJLW28Y4 MOVE 3277 CCWS TO LCB            3-A
00121E 47F0 F386            011AE  1680+         B     IJLZCHKQ CHECK FOR ATTENTION              3-A

001222                             1682+IJLSCEND EQU   * END OF LCB SCAN
001222 95F0 F397      011BF        1683+         CLI   IJLCKBC+1,X'F0' CHECK WHETHER ATTN CAUSED A READ

                                   1685+* THE FOLLOWING INSTRUCTION SETS THE UNCONDITIONAL BRANCH BACK TO
                                   1686+* A NOP WITHOUT AFFECTING THE CONDITION CODE.

001226 9200 F397      011BF        1688+         MVI   IJLCKBC+1,X'00' RESTORE ATTN BRANCH
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   37


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00122A 4780 F4A6            012CE  1689+         BE    IJLSTRTR GO START READ                              3-7
00122E                             1690+IJLZENAB EQU   * 3-A
00122E 9601 D004      00004        1691+         OI    IJLDTFDX,IJLBERA ENABLE READ IN APPENDAGE
001232 47F0 F7A2            015CA  1692+         B     IJLUSER GO TO NORMAL USER EXIT

001236 0000
001238 FFFFFFFF                    1694+IJL26LCB DC    F'-1' LCB ADDRESS SAVE AREA                          3-7
00123C 00000000                    1695+IJLZOWNF DC    F'0' FIELD OF 32 OWNERSHIP FLAGS                3-A
001240                             1696+IJLW2848 EQU   * HERE FOR ALL OPTYPES EXCEPT READ INITIAL OR SHORT
001240 9140 1015      00015        1697+         TM    IJLLCBAK,IJLZBFCL IS BUFFER CLOBBERED              3-A
001244 4780 F42C            01254  1698+         BZ    IJLZZPRT NO, CHECK FOR PRINTER            3-A
001248 9230 F0AB      00ED3        1699+         MVI   IJLRCLOC,IJLRZBCL UNRELIABLE BUFFER CONTENTS       3-A
00124C 94BF 1015      00015        1700+         NI    IJLLCBAK,X'FF'-IJLZBFCL TURN OFF ASYNCH ERROR FLAG  3-A
001250 47F0 F368            01190  1701+         B     IJLZRTRN CLEAR FLAGS, HEADER, AND RETURN            3-A
001254                             1702+IJLZZPRT EQU   * 3-A
001254 9101 1010      00010        1703+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER              3-A
001258 4780 F448            01270  1704+         BZ    IJLZRPOS NO, CHECK READ FROM POSITION     3-A
00125C 9180 1015      00015        1705+         TM    IJLLCBAK,IJLZPBSY IS PRINTER BUSY                  3-A
001260 4780 F444            0126C  1706+         BZ    IJLZZ001 NO, TURN ON PRINTER BUSY FLAG         3-A
001264 9228 F0AB      00ED3        1707+         MVI   IJLRCLOC,IJLRZPBS PRINTER BUSY RETURN CODE         3-A
001268 47F0 F368            01190  1708+         B     IJLZRTRN CLEAR FLAGS, HEADER, AND RETURN            3-A
00126C                             1709+IJLZZ001 EQU   * 3-A
00126C 9680 1015      00015        1710+         OI    IJLLCBAK,IJLZPBSY TURN ON PRINTER BUSY FLAG        3-A
001270                             1711+IJLZRPOS EQU   * 3-A
001270 9513 C005      00005        1712+         CLI   IJLDEOTC,IJLOZRBP OPTYPE READ FROM POSITION        3-A
001274 4740 F464            0128C  1713+         BL    IJLZ3277 NO, DON'T CHECK FOR SBA ORDER         3-A
001278 58A0 C014            00014  1714+         L     IJLWKRG2,IJLDELCC POINT TO USER RD FROM POS DATA   3-A
00127C 9511 A001      00001        1715+         CLI   IJLKONT1(IJLWKRG2),IJLZZSBA IS THIS A SBA ORDER      3-A
001280 4780 F464            0128C  1716+         BE    IJLZ3277 YES, CHECK FOR OLTEP OWNED DEVICE     3-A
001284 922C F0AB      00ED3        1717+         MVI   IJLRCLOC,IJLRZNSB SBA ORDER NOT FOUND              3-A
001288 47F0 F368            01190  1718+         B     IJLZRTRN CLEAR FLAGS, HEADER, AND RETURN            3-A
00128C                             1719+IJLZ3277 EQU   * 3-A
00128C 4520 F5D6            013FE  1720+         BAL   IJLWKRG3,IJLZCKPB DETERMINE IF OLTEP OWNS DEVICE   3-A
001290 1255                        1721+         LTR   IJLWKRGO,IJLWKRGO DOES OLTEP OWN DEVICE            3-A
001292 4780 F476            0129E  1722+         BZ    IJLZQATN NO, CHECK FOR WRITE INITIAL           3-A
001296 9234 F0AB      00ED3        1723+         MVI   IJLRCLOC,IJLRZOTP OLTEP OWNS DEVICE RET CODE       3-A
00129A 47F0 F368            01190  1724+         B     IJLZRTRN CLEAR FLAGS, HEADER, AND RETURN       3-A
00129E                             1725+IJLZQATN EQU   * 3-A
00129E 9502 C005      00005        1726+         CLI   IJLDEOTC,IJLOTCWI OPTYPE WRITE INITIAL             3-A
0012A2 4770 F492            012BA  1727+         BNE   IJLZ2848 NO, DON'T CHECK MDT BIT          3-A
0012A6 5820 C00C            0000C  1728+         L     IJLWKRG3,IJLDEIOA-IJLKONT1 GET I/O AREA ADDRESS      3-A
0012AA 9101 2000      00000        1729+         TM    IJLKONT0(IJLWKRG3),IJLZZMDT IS RESET MDT BIT ON      3-A
0012AE 4710 F492            012BA  1730+         BO    IJLZ2848 YES, TURN OFF QUE & ATTN FLAGS        3-A
0012B2 94F7 1010      00010        1731+         NI    IJLLCBFL,X'FF'-IJLBQUED TURN OFF QUEUE FLAG          3-A
0012B6 47F0 F496            012BE  1732+         B     IJLZQUAT GO START I/O                          3-A
0012BA                             1733+IJLZ2848 EQU   * 3-A
0012BA 94F3 1010      00010        1734+         NI    IJLLCBFL,X'FF'-IJLBQUED-IJLBATTN TURN OFF QUE,ATTN   3-A
0012BE                             1735+IJLZQUAT EQU   * 3-A
0012BE 0A19                        1736+         SVC   IJLHIODQ REQUEST SPVSR HALT I/O AND DEQUEUE CCB
0012C0 45E0 F51C            01344  1737+         BAL   IJLLNKRG,IJLBLDCW MAKE CHANNEL PROGRAM
0012C4                             1738+IJLZDOIO EQU   * 3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   38


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0012C4 94F7 1015      00015        1739+         NI    IJLLCBAK,X'FF'-IJLZIORQ TURN OFF I/O REQ FLAG        3-C
0012C8                             1740+IJLZDOII EQU   * 3-A
                                   1741+* 360N-CL-453 EXCP     CHANGE LEVEL 3-0
0012C8 0A00                        1742+         SVC   0
0012CA 47F0 F7A2            015CA  1743+         B     IJLUSER RETURN TO USER

0012CE                             1745+IJLSTRTR EQU   * 3-7
0012CE 5810 F410            01238  1746+         L     IJLLCBRG,IJL26LCB GET LCB ADDRESS WITH ATTN          3-7
0012D2 9140 1015      00015        1747+         TM    IJLLCBAK,IJLZBFCL IS DEVICE BUFFER CLOBBERED FLAG O3-A
0012D6 4780 F4C4            012EC  1748+         BZ    IJLZDEQ NO, DEQUEUE THE CCB              3-A
0012DA 9230 F0AB      00ED3        1749+         MVI   IJLRCLOC,IJLRZBCL DEVICE BUFFER UNRELIABLE RETURN C3-A
0012DE D200 C027 1014 00027 00014  1750+         MVC   IJLDEPP+IJLKONT2(IJLKONT1),IJLLCBRL POST RLN IN     3-A
                                   1751+*                                            POLLING POINTER        3-A
0012E4 94BF 1015      00015        1752+         NI    IJLLCBAK,X'FF'-IJLZBFCL TURN OFF ASYCH ERROR FLAG   3-A
0012E8 47F0 F368            01190  1753+         B     IJLZRTRN CLEAR FLAGS, HEADER, AND RETURN            3-A
0012EC                             1754+IJLZDEQ  EQU   * 3-A
0012EC 4520 F5D6            013FE  1755+         BAL   IJLWKRG3,IJLZCKPB DETERMINE IF OLTEP OWNS DEVICE   3-A
0012F0 1255                        1756+         LTR   IJLWKRGO,IJLWKRGO DOES OLTEP OWN DEVICE            3-A
0012F2 4780 F50C            01334  1757+         BZ    IJLZDEQD NO, GO DEQUEUE THE CCB                3-A
0012F6 1B55                        1758+         SR    IJLWKRGO,IJLWKRGO CLEAR WORK REG                   3-A
0012F8 4351 0014            00014  1759+         IC    IJLWKRGO,IJLKNT20(IJLLCBRG) GET RLN OF DEVICE        3-A
0012FC 1B44                        1760+         SR    IJLWKRGE,IJLWKRGE CLEAR WORK REG                   3-A
0012FE 4120 0008            00008  1761+         LA    IJLWKRG3,IJLKONT8 REGISTER 2 CONTAINS 8            3-A
001302 1D42                        1762+         DR    IJLWKRGE,IJLWKRG3 DIVIDE RLN BY 8             3-A
                                   1763+*  IJLWKRGE CONTAINS REMAINDER, OR BIT INTO THE BYTE                3-A
                                   1764+*  IJLWKRGO CONTAINS QUOTIENT, OR BYTE IN THE FIELD                 3-A
001304 1824                        1765+         LR    IJLWKRG3,IJLWKRGE FREE UP IJLWKRGE                 3-A
001306 1835                        1766+         LR    IJLWKRG4,IJLWKRGO FREE UP IJLWKRGO                 3-A
001308 4140 0001            00001  1767+         LA    IJLWKRGE,IJLKONT1 TURN ON LOW BIT IN REGISTER      3-A
00130C 1B55                        1768+         SR    IJLWKRGO,IJLWKRGO CLEAR WORK REG                   3-A
00130E 8C40 2019            00019  1769+         SRDL  IJLWKRGE,IJLKNT25(IJLWKRG3) SHIFT BIT TO MASK POS.   3-A
001312 4140 F414            0123C  1770+         LA    IJLWKRGE,IJLZOWNF POINT TO FIELD              3-A
001316 1A43                        1771+         AR    IJLWKRGE,IJLWKRG4 POINT TO RIGHT BYTE IN FIELD     3-A
001318 4450 F508            01330  1772+         EX    IJLWKRGO,IJLZTSTB TEST IF BIT IS ON           3-A
00131C 4710 F406            0122E  1773+         BO    IJLZENAB YES, SET ENABLE READ        3-A
001320 4450 F504            0132C  1774+         EX    IJLWKRGO,IJLZSETB TURN BIT ON                 3-A
001324 94FD D004      00004        1775+         NI    IJLDTFDX,X'FF'-IJLB60RS TURN OFF RESCAN FLAG        3-A
001328 47F0 F3CE            011F6  1776+         B     IJLCKLC4 CONTINUE SCAN                    3-A
00132C 9600 4000      00000        1777+IJLZSETB OI    IJLKONT0(IJLWKRGE),IJLKTX00 INDICATE DEVICE        3-A
                                   1778+*                                       WAS PROCESSED               3-A
001330 9100 4000      00000        1779+IJLZTSTB TM    IJLKONT0(IJLWKRGE),IJLKTX00 WAS THIS DEVICE        3-A
                                   1780+*                                       PROCESSED                   3-A
001334                             1781+IJLZDEQD EQU   * 3-A
001334 0A19                        1782+         SVC   IJLHIODQ REQUEST HALT I/O AND DEQUEUE CCB 3-A
001336 94F7 1015      00015        1783+         NI    IJLLCBAK,X'FF'-IJLZIORQ TURN OFF I/O REQ FLAG        3-C
00133A                             1784+IJLZOFAT EQU   * 3-A
00133A 94FB 1010      00010        1785+         NI    IJLLCBFL,X'FF'-IJLBATTN TURN OFF ATTENTION FLAG      3-7
                                   1786+* 360N-CL-453 EXCP     CHANGE LEVEL 3-0
00133E 0A00                        1787+         SVC   0
001340 47F0 F7A2            015CA  1788+         B     IJLUSER RETURN TO USER                               3-7
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   39


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   1790+**** IJLBLDCW -- BUILD A ONE-CCW CHANNEL PROGRAM FOR L2260 OR A ONE,3-A
                                   1791+*                TWO, OR THREE-CCW CHANNEL PROGRAM FOR L3277        3-A

001344                             1793+IJLBLDCW EQU   *
001344 5840 C00C            0000C  1794+         L     IJLWKRGE,IJLDEIOA-1 PICK UP EXISTING IOAREA ADDRESS
001348                             1795+IJLZVIOA EQU   * 3-A
001348 5040 F050            00E78  1796+         ST    IJLWKRGE,IJLZ77CW+IJLKONT8 STORE DATA ADDR IN 2ND CCW3-A
00134C 58A0 D020            00020  1797+         L     IJLBCBRG,IJLDTFTO-IJLKONT1 GET ADDR OF CCW COMMAND   3-A
                                   1798+*                                       CODE TABLE                  3-A
001350 1B55                        1799+         SR    IJLWKRGO,IJLWKRGO CLEAR ODD WORK REGISTER          3-A
001352 4350 C005            00005  1800+         IC    IJLWKRGO,IJLDEOTC GET OPERATION TYPE CODE          3-A
001356 1AA5                        1801+         AR    IJLBCBRG,IJLWKRGO ADDR COMMAND CODE IN OFFSETS     3-A
001358 D200 F050 A000 00E78 00000  1802+         MVC   IJLZ77CW+IJLKONT8(IJLKONT1),IJLKONT0(IJLBCBRG) MOVE  3-A
                                   1803+*                                       COMMAND CODE TO 2ND CCW     3-A
00135E 4130 000F            0000F  1804+         LA    IJLWKRG4,IJLKNT15 LENGTH OF EXED MOVE COMMAND        3-A
001362 41A0 F048            00E70  1805+         LA    IJLBCBRG,IJLZ77CW GET ADDR OF 3 CCW AREA           3-A
001366 415A 0008            00008  1806+         LA    IJLWKRGO,IJLKONT8(IJLBCBRG) POINT TO 2ND CCW         3-A
00136A 9101 C005      00005        1807+         TM    IJLDEOTC,IJLBRDOP IS OPTYPE A READ                 3-A
00136E 4780 F57A            013A2  1808+         BZ    IJLW28Y3 NO, COMPLETE CCWS                3-A
001372 9513 C005      00005        1809+         CLI   IJLDEOTC,IJLOZRBP IS OPTYPE A READ FROM POSITION   3-A
001376 4740 F57A            013A2  1810+         BL    IJLW28Y3 NO, COMPLETE CCWS                3-A
00137A D203 5008 5000 00008 00000  1811+         MVC   IJLKONT8(IJLKONT4,IJLWKRGO),IJLKONT0(IJLWKRGO) MOVE  3-A
                                   1812+*                                  CMD & ADDR TO 3RD CCW            3-A
001380 D201 5006 F7E4 00006 0160C  1813+         MVC   IJLKONT6(IJLKONT2,IJLWKRGO),=X'0004' SET 2ND CCW     3-A
                                   1814+*                                  COUNT EQUAL TO 4                 3-A
001386 9201 5000      00000        1815+         MVI   IJLKONT0(IJLWKRGO),IJLZWRTC SET WT CMD CODE IN 2ND   3-A
00138A D202 5001 C015 00001 00015  1816+         MVC   IJLKONT1(IJLKONT3,IJLWKRGO),IJLDELEA PUT DATA ADDR   3-A
                                   1817+*                                  IN 2ND CCW                       3-A
001390 9260 5004      00004        1818+         MVI   IJLKONT4(IJLWKRGO),IJLCCWFG+IJLKTX20 TURN ON CC &    3-A
                                   1819+*                                  SLI CCW FLAGS                    3-A
001394 D702 C015 C015 00015 00015  1820+         XC    IJLDELEA,IJLDELEA CLEAR THE DECB ENTRY FIELD  3-A
00139A 4155 0008            00008  1821+         LA    IJLWKRGO,IJLKONT8(IJLWKRGO) POINT TO 3RD CCW         3-A
00139E 4130 0017            00017  1822+         LA    IJLWKRG4,IJLKNT23 LENGTH OF EXED MOVE COMMAND        3-A
0013A2                             1823+IJLW28Y3 EQU   * 3-A
0013A2 9220 5004      00004        1824+         MVI   IJLKONT4(IJLWKRGO),IJLKTX20 SET SLI CCW FLAG         3-A
0013A6 9512 C005      00005        1825+         CLI   IJLDEOTC,IJLOZWUS IS OPTYPE WRITE UNPROTECTED ERASE3-A
0013AA 4780 F5A4            013CC  1826+         BE    IJLW28Y7 YES, SET DATA COUNT OF 1              3-A
0013AE D201 5006 C006 00006 00006  1827+         MVC   IJLKONT6(IJLKONT2,IJLWKRGO),IJLDELGT MOVE DATA       3-A
                                   1828+*                                  COUNT INTO CCW                   3-A
0013B4 9502 C005      00005        1829+         CLI   IJLDEOTC,IJLOTCWI IS OPTYPE WRITE INITIAL          3-A
0013B8 4780 F5AE            013D6  1830+         BE    IJLWZ8Y4 YES, MOVE CCW'S                       3-A
0013BC 9101 C005      00005        1831+         TM    IJLDEOTC,IJLBRDOP IS OPTYPE A READ                 3-A
0013C0 4710 F5AE            013D6  1832+         BO    IJLWZ8Y4 YES, MOVE CCW'S                        3-A
0013C4                             1833+IJLW28Y8 EQU   * 3-A
0013C4 4140 1030            00030  1834+         LA    IJLWKRGE,IJLLCBC1+IJLKONT8 POINT TO 2ND CCW          3-A
0013C8 47F0 F5BA            013E2  1835+         B     IJLW28Y5 GO MOVE CCW INTO LCB                  3-A
0013CC D201 5006 F5D4 00006 013FC  1836+IJLW28Y7 MVC   IJLKONT6(IJLKONT2,IJLWKRGO),IJLZZHW1 SET DATA CT OF 13-A
0013D2 47F0 F59C            013C4  1837+         B     IJLW28Y8 POINT TO 2ND CCW                 3-A
0013D6                             1838+IJLWZ8Y4 EQU   * 3-A
0013D6 5030 F640            01468  1839+         ST    IJLWKRG4,IJLZ3SAV SAVE LENGTH FOR MOVING CCW'S     3-A
0013DA                             1840+IJLW28Y4 EQU   * MOVE CCW(S) INTO LCB AND GET SET FOR EXCP       3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   40


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0013DA 5830 F640            01468  1841+         L     IJLWKRG4,IJLZ3SAV RESTORE LENGTH FOR CCW MOVE      3-A
0013DE 4140 1028            00028  1842+         LA    IJLWKRGE,IJLLCBC1 POINT TO 1ST CCW            3-A
0013E2                             1843+IJLW28Y5 EQU   * 3-A
0013E2 4430 F5CE            013F6  1844+         EX    IJLWKRG4,IJLW28Y6 MOVE 1,2, OR 3 CCWS TO LCB  3-A
0013E6 D202 1011 F0B5 00011 00EDD  1845+         MVC   IJLLCBDE,IJLFWWA1+IJLKONT1 PUT DECB ADDR IN LCB      3-A
0013EC 5040 1008            00008  1846+         ST    IJLWKRGE,IJLLCBCA-IJLKONT1 PUT CCW ADDR IN CCW       3-A
0013F0 94F0 1016      00016        1847+         NI    IJLLCBAR,X'FF'-IJLRSBAR CLEAR RETRY COUNTER          3-A
0013F4 07FE                        1848+         BR    IJLLNKRG RETURN TO CALLER                 3-A
0013F6 D200 1028 A000 00028 00000  1849+IJLW28Y6 MVC   IJLLCBC1(IJLKONT1),IJLKONT0(IJLBCBRG) IJLBCBRG CON-  3-A
                                   1850+*                                  TAINS BEGIN ADDR                 3-A
0013FC 0001                        1851+IJLZZHW1 DC    H'1' LENGTH FOR A WRITE UNPROT ERASE  3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   41


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   1853+**** IJLZCKPB -- CHECK FOR OLTEP CONTROLLED DEVICE                  3-A
                                   1854+*        SUPERVISOR INTERFACES FOR IJLZCKPB,IJLZPBCK,OLTEP          3-A
                                   1855+*        PROCESSING IN COMPLETION LOGIC, AND SUBROUTINE IJLZRF1A    3-A
                                   1856+*        IN ROUTINE IJLZRFT1--                                      3-A
                                   1857+*        1.    ADDRESS OF DOS COMMUNICATION REGION IS LOADED FROM   3-A
                                   1858+*              LOCATION 20 IN LOW CORE (LOAD FULL WORD).            3-A
                                   1859+*        2.    FOLLOWING ARE SECURED FROM DOS COMMUNICATION REGION  3-A
                                   1860+*                                                                   3-A
                                   1861+*              ADDRESS OF PIB TABLE                                 3-A
                                   1862+*              ADDRESS OF PUB TABLE                                 3-A
                                   1863+*              ADDRESS OF LUB TABLE                                 3-A
                                   1864+*              ADDRESS OF ERROR RECOVERY BLOCK                      3-A
                                   1865+*              ADDRESS OF COMREG EXTENSION                          3-A
                                   1866+*              ADDRESS OF END OF STORAGE                            3-A
                                   1867+*              ADDRESS OF FICL                                      3-A
                                   1868+*              ADDRESS OF LUBID QUEUE                               3-A
                                   1869+*              LENGTH OF LUBID QUEUE = NO. OF CHANNEL QUEUE ENTRIES 3-A
                                   1870+*                                                                   3-A
                                   1871+*              ADDRESS OF SYSTEM CONFIGURATION BYTE                 3-A
                                   1872+*              ADDRESS OF NICL                                      3-A
                                   1873+*              ADDRESS OF PIK                                       3-A
                                   1874+*        3.    ADDRESS OF CHANNEL QUEUE TABLE IS SECURED FROM THE   3-A
                                   1875+*              ERROR RECOVERY BLOCK.                                3-A
                                   1876+*        4.    ADDRESS OF TSKIDTAB IS SECURED FROM COMREG EXTENSION 3-A
                                   1877+*        5.    ADDRESS OF REQIDTAB IS FOUND BY ADDING NO. OF        3-A
                                   1878+*              CHANNEL QUEUE ENTRIES TO THE ADDRESS OF THE LUBID    3-A
                                   1879+*              QUEUE.                                               3-A
                                   1880+*        6     ADDRESS OF CCB IS SECURED FROM LAST 3 BYTES OF 4     3-A
                                   1881+*              BYTE CHANNEL Q ENTRY.                                3-A
                                   1882+*        7.    FIRST BYTE OF A CHANNEL QUEUE ENTRY IS CHAIN BYTE    3-A
                                   1883+*        8.    PIBS ARE ASSUMED TO BE IN THE FOLLOWING SEQUENCE     3-A
                                   1884+*                                                                   3-A
                                   1885+*                   ALL BOUND PIB       16 BYTES IN LENGTH          3-A
                                   1886+*                   BG        PIB       16 BYTES IN LENGTH          3-A
                                   1887+*                   F2        PIB       16 BYTES IN LENGTH          3-A
                                   1888+*                   F1        PIB       16 BYTES IN LENGTH          3-A
                                   1889+*                   ETC.                                            3-A
                                   1890+*        9.    THE FOLLOWING PARTS OF PROGRAM INFORMATION BLOCK     3-A
                                   1891+*              (PIB) ARE REFERENCED:                                3-A
                                   1892+*                                                                   3-A
                                   1893+*              ADDRESS OF ORIGIN OF PARTITION                       3-A
                                   1894+*              PIB ASSIGN FLAG                                      3-A
                                   1895+*              USER LUB INDEX                                       3-A
                                   1896+*                                                                   3-A
                                   1897+*              BIT 1 OF PIB ASSIGN FLAG (X'40') MUST BE ON IF       3-A
                                   1898+*              BTAM IS ACTIVE WITHIN THAT PARTITION.                3-A
                                   1899+*              BITS 5,6 OR 7 OF PIB ASSIGN FLAG MUST BE ON IF       3-A
                                   1900+*              DEVICE IS ASSIGNED TO A SPECIFIC PARTITION           3-A
                                   1901+*        10.   THE FOLLOWING PARTS OF PHYSICAL UNIT BLOCK (PUB)     3-A
                                   1902+*              ARE REFERENCED:                                      3-A
                                   1903+*                                                                   3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   42


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   1904+*              CHANNEL-UNIT ADDRESS     BYTES 0,1                   3-A
                                   1905+*              CHANNEL QUEUE POINTER    BYTE 2                      3-A
                                   1906+*              DEVICE TYPE              BYTE 4                      3-A
                                   1907+*              CHANNEL SCHEDULER FLAGS  BYTE 6                      3-A
                                   1908+*              JOB CONTROL FLAGS        BYTE 7                      3-A
                                   1909+*        12.   THE DEVICE BUSY BIT (BIT 0) AND DEVICE END POSTING   3-A
                                   1910+*              REQUIRED BIT (BIT 5) ARE REFERENCED AND ALTERED IN   3-A
                                   1911+*              BYTE 6 OF THE PUB                                    3-A
                                   1912+*        11.   THE CHANNEL QUEUE POINTER (BYTE 2) OF PUB IS ALTERED 3-A
                                   1913+*        13.   THE OWNERSHIP INDICATED IN JOB CONTROL FLAGS (BYTE   3-A
                                   1914+*              7,BITS 5,6 AND 7) ARE CHECKED AND ALTERED            3-A
                                   1915+*        14.   BYTE 0 OF LUB (THE PUB POINTER) IS REFERENCED AND    3-A
                                   1916+*              ALTERED                                              3-A
                                   1917+*        15.   THE CHAIN FIELD OF CHANNEL QUEUE ENTRY (BYTE 0) IS   3-A
                                   1918+*              EITHER ALTERED TO X'FF' OR MADE TO CHAIN TO ITSELF   3-A
                                   1919+*        16.   THE FOLLOWING VALUES WILL BE PLACED IN TSKIDTAB OR   3-A
                                   1920+*              REQIDTAB:                                            3-A
                                   1921+*                                                                   3-A
                                   1922+*                   X'FF'     ENTRY IS NOT IN USE                   3-A
                                   1923+*                   X'10'     I/O REQUEST FOR BG PARTITION          3-A
                                   1924+*                   X'20'     I/O REQUEST FOR F1 PARTITION          3-A
                                   1925+*                   X'30'     I/O REQUEST FOR F2 PARTITION          3-A
                                   1926+*                                                                   3-A
                                   1927+*                                                                   3-A
                                   1928+*        17. PIK VALUES                                             3-A
                                   1929+*            X'00'  ALL BOUND                                       3-A
                                   1930+*            X'10'  BG                                              3-A
                                   1931+*            X'20'  F2                                              3-A
                                   1932+*            X'30'  F1                                              3-A
                                   1933+*            ETC.                                                   3-A
                                   1934+*        18.NICL AND FICL TABLE ORGANIZATION:                       3-A
                                   1935+*           BYTE  0 - SYSTEM CLASS UNITS                            3-A
                                   1936+*           BYTE  1 - BG                                            3-A
                                   1937+*           BYTE  2 - F2                                            3-A
                                   1938+*           BYTE  3 - F1                                            3-A
0013FE                             1939+IJLZCKPB EQU   * 3-A
0013FE 5020 F638            01460  1940+         ST    IJLWKRG3,IJLZSVRT SAVE RETURN ADDRESS              3-A
001402 5840 0014            00014  1941+         L     IJLWKRGE,IJLKNT20 GET ADDR OF                        3-A
001406 4844 0084            00084  1942+         LH    IJLWKRGE,IJLKT132(IJLWKRGE) COMMUNICATION REGION     3-A
00140A 4824 002E            0002E  1943+         LH    IJLWKRG3,IJLKNT46(IJLWKRGE) GET PIK (PID) FROM COMREG3-A
00140E 4A24 005A            0005A  1944+         AH    IJLWKRG3,IJLKNT90(IJLWKRGE) ADD ADDR OF PIB TABLE    3-A
001412 1B33                        1945+         SR    IJLWKRG4,IJLWKRG4 CLEAR WORK REGISTER              3-A
001414 4330 1007            00007  1946+         IC    IJLWKRG4,IJLLCBLU+IJLKONT1 GET SYS INDEX NUMBER      3-A
001418 1B55                        1947+         SR    IJLWKRGO,IJLWKRGO CLEAR WORK REGISTER              3-A
00141A 4352 000D            0000D  1948+         IC    IJLWKRGO,IJLKNT13(IJLWKRG3) GET USER LUB INDEX       3-A
00141E 1A53                        1949+         AR    IJLWKRGO,IJLWKRG4 COMPUTE INDEX TO CORRECT LUB     3-A
001420 4155 5000            00000  1950+         LA    IJLWKRGO,IJLKONT0(IJLWKRGO,IJLWKRGO) TABLE TO     3-A
                                   1951+*                                       GET BYTE OFFSET             3-A
001424 4A54 004C            0004C  1952+         AH    IJLWKRGO,IJLKNT76(IJLWKRGE) ADD ADDR OF LUB TABLE    3-A
001428 4335 0000            00000  1953+         IC    IJLWKRG4,IJLKONT0(IJLWKRGO) GET PUB INDEX FROM LUB   3-A
00142C 95FE 5000      00000        1954+         CLI   IJLKONT0(IJLWKRGO),IJLKTXFE IS LUB UNASSIGNED OR IS  3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   43


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   1955+*                                       IT TO BE IGNORED            3-A
001430 4150 0000            00000  1956+         LA    IJLWKRGO,IJLKONT0 SET RETURN CODE OF 0             3-A
001434 47B0 F62C            01454  1957+         BNL   IJLZGCAL YES, RETURN                      3-A
001438 8930 0003            00003  1958+         SLL   IJLWKRG4,IJLKONT3 MULT BY 8 TO GET BYTE OFFSET     3-A
00143C 4A34 0040            00040  1959+         AH    IJLWKRG4,IJLKNT64(IJLWKRGE) ADD ADDR OF PUB TABLE    3-A
001440 4342 000C            0000C  1960+         IC    IJLWKRGE,IJLKNT12(IJLWKRG3) GET PIB ASSIGN FLAGS     3-A
001444 5440 F63C            01464  1961+         N     IJLWKRGE,IJLZMSKO TURN OFF ALL BUT LOW 3 BITS 3-A
001448 4440 F632            0145A  1962+         EX    IJLWKRGE,IJLZTSOW IS PUB OWNED BY THIS PARTN  3-A
00144C 4710 F62C            01454  1963+         BO    IJLZGCAL RETURN TO CALLER            3-A
001450 4150 0004            00004  1964+         LA    IJLWKRGO,IJLKONT4 SET RETURN CODE OF 4             3-A
001454                             1965+IJLZGCAL EQU   * 3-A
001454 5820 F638            01460  1966+         L     IJLWKRG3,IJLZSVRT RESTORE RETURN ADDRESS           3-A
001458 07F2                        1967+         BR    IJLWKRG3 RETURN TO CALLER            3-A
00145A 9100 3007      00007        1968+IJLZTSOW TM    IJLKONT7(IJLWKRG4),IJLKTX00 IS PUB OWNED BY THIS     3-A
                                   1969+*                                            PARTITION              3-A
00145E 0000
001460 00000000                    1970+IJLZSVRT DC    F'0' SAVE AREA FOR RETURN ADDRESS          3-A
001464 00000007                    1971+IJLZMSKO DC    X'00000007' MASK TO GET LOW 3 BITS PIB ASSGN FLAG 3-A
001468 00000000                    1972+IJLZ3SAV DC    F'0' CCW MOVE LENGTH SAVE             3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   44


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   1974+********* IJLWAIT -- MULTIPLE WAIT SUPPORT LOGIC **********

00146C                             1976+IJLWAIT  EQU   *
00146C D703 F7B4 F7B4 015DC 015DC  1977+         XC    IJLBASV,IJLBASV CLEAR ADDRESS SAVE WORD
001472 1200                        1978+         LTR   IJLCTREG,IJLCTREG IS COUNT GREATER THAN ZERO
001474 4720 F660            01488  1979+         BP    IJLWAIT1 PLUS IS NORMAL USAGE
001478 4780 F7A2            015CA  1980+         BZ    IJLUSER COUNT  0,  RETURN TO USER
00147C 1BDD                        1981+         SR    IJLDTFRG,IJLDTFRG CLEAR DTFBT POINTER
00147E 18C1                        1982+         LR    IJLDECBR,IJLPRMRG SET DECB REGISTER TO ECBLIST ADDRE
001480 9203 F0B8      00EE0        1983+         MVI   IJLCNBLK,IJLMWAA SET CANCEL CODE FOR NEGATIVE WAIT CO
001484 47F0 F778            015A0  1984+         B     IJLCANCL PREPARE CANCEL

001488                             1986+IJLWAIT1 EQU   * POSITIVE NON-ZERO WAIT COUNT
001488 1811                        1987+         LR    IJLECBRE,IJLPRMRG LOAD ECB LIST POINTER
00148A 9001 F064            00E8C  1988+         STM   IJLCTREG,IJLECBRE,IJLWTSAV SAVE COUNT AND LIST ADDRES
00148E 4600 F66E            01496  1989+IJLLOOP  BCT   IJLCTREG,*+8 DECREMENT COUNT REGISTER
001492 47F0 F68A            014B2  1990+         B     IJLMWOFF COUNT VALID, GO TURN OFF MASTER WAIT
001496 58C1 0000            00000  1991+         L     IJLDECBR,0(IJLECBRE) LOAD LIST ADDRESS
00149A 12CC                        1992+         LTR   IJLDECBR,IJLDECBR TEST ADDRESS
00149C 4111 0004            00004  1993+         LA    IJLECBRE,4(IJLECBRE) INCREMENT LIST POINTER
0014A0 4720 F666            0148E  1994+         BP    IJLLOOP NOT LAST ENTRY
0014A4 1BDD                        1995+         SR    IJLDTFRG,IJLDTFRG CLEAR DTFBT POINTER
0014A6 58C0 F068            00E90  1996+         L     IJLDECBR,IJLWTSAV+4 SET DECB REGISTER TO ECBLIST ADDR
0014AA 9204 F0B8      00EE0        1997+         MVI   IJLCNBLK,IJLMWAB SET CANCEL CODE FOR EXCESS WAIT CNT
0014AE 47F0 F778            015A0  1998+         B     IJLCANCL PREPARE CANCEL

0014B2                             2000+IJLMWOFF EQU   * LOOP POINT FOR COMPLETION CHECKING
0014B2 9200 F062      00E8A        2001+         MVI   IJLMWAIT+2,X'00' TURN OFF MASTER WAIT FLAG
0014B6 95FF F0B8      00EE0        2002+         CLI   IJLCNBLK,X'FF' IS CANCEL PENDING
0014BA 4770 F78C            015B4  2003+         BNE   IJLCNC10 IF SO, GO EXECUTE CANCEL
0014BE 9801 F064            00E8C  2004+         LM    IJLCTREG,IJLECBRE,IJLWTSAV LOAD COUNT AND LIST ADDR
0014C2 58C1 0000            00000  2005+IJLLOOP2 L     IJLDECBR,0(IJLECBRE) GET ECB ADDRESS
0014C6 9140 C000      00000        2006+         TM    IJLDEECB,IJLBECBC CHECK FOR COMPLETION
0014CA 4710 F6AE            014D6  2007+         BO    IJLCTDWN FOUND, GO COUNT
0014CE 9180 C018      00018        2008+         TM    IJLDEOF2,IJLBPCI CHECK FOR PCI PSEUDO-COMPLETION
0014D2 4780 F6BA            014E2  2009+         BZ    IJLWAIT2 NO PCI, SO NO COMPLETION EITHER TYPE
0014D6 4600 F6BA            014E2  2010+IJLCTDWN BCT   IJLCTREG,IJLWAIT2 DECREMENT COUNT, CHECK FOR ZERO
0014DA 50C0 F7B4            015DC  2011+         ST    IJLDECBR,IJLBASV SAVE ECB ADDRESS
0014DE 47F0 F7A2            015CA  2012+         B     IJLUSER RETURN TO USER

0014E2 4111 0004            00004  2014+IJLWAIT2 LA    IJLECBRE,4(IJLECBRE) POINT TO NEXT LIST ENTRY
0014E6 12CC                        2015+         LTR   IJLDECBR,IJLDECBR TEST FOR PREVIOUS ADDRESS MINUS
0014E8 4720 F69A            014C2  2016+         BP    IJLLOOP2 BACK TO VERIFY NEXT COMPLETION
0014EC 4110 F060            00E88  2017+         LA    IJLCCBAR,IJLMWAIT PREPARE FOR SIMPLE WAIT
                                   2018+* 360N-CL-453 WAIT     CHANGE LEVEL 3-0
0014F0 9180 1002      00002        2019+         TM    2(1),X'80'
0014F4 4710 F6D2            014FA  2020+         BO    *+6
0014F8 0A07                        2021+         SVC   7
0014FA 47F0 F68A            014B2  2022+         B     IJLMWOFF READY FOR A COMPLETION CHECK
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   45


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   2024+******** IJLRSPL -- RESETPL LOGIC ********

0014FE                             2026+IJLRSPL  EQU   * 3-5
0014FE 9204 F0AB      00ED3        2027+         MVI   IJLRCLOC,IJLFOUR NO RESETPL LOGIC PRESENT          3-7
001502 47F0 F7A2            015CA  2028+         B     IJLUSER RETURN TO USER                              3-7
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   46


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001506                             2030+IJLRQB   EQU   * 3-6
                                   2031+******** NULL REQBUF/RELBUF LOGIC ********

001506                             2033+IJLRQBF  EQU   *
001506                             2034+IJLRQBFI EQU   *
001506                             2035+IJLRLBF  EQU   *
001506                             2036+IJLRLBFI EQU   *
001506 D703 F7B4 F7B4 015DC 015DC  2037+         XC    IJLBASV,IJLBASV CLEAR DATA CELL TO SHOW NO BUFFERS
00150C 9210 F0AB      00ED3        2038+         MVI   IJLRCLOC,IJLRNBMB RETURN CODE FOR NO BUFFER MANAGEMT
001510 47F0 F7A2            015CA  2039+         B     IJLUSER BRANCH TO USER RETURN
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   47


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   2041+******** NULL TERMINAL TEST LOGIC ********

001514                             2043+IJLONLTT EQU   *
001514 58E0 F0A4            00ECC  2044+         L     IJLLNKRG,IJLSVR14 GET USER RETURN ADDRESS
001518 41EE 0004            00004  2045+         LA    IJLLNKRG,4(IJLLNKRG) SET RETURN ADDRESS
00151C 50E0 F0A4            00ECC  2046+         ST    IJLLNKRG,IJLSVR14 SAVE RETURN ADDRESS
001520 9204 F0AB      00ED3        2047+         MVI   IJLRCLOC,IJLTTNPB RETURN CODE FOR NO TERMINAL TEST
001524 47F0 F7A2            015CA  2048+         B     IJLUSER RETURN TO USER
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   48


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001528                             2050+IJLTRAN  EQU   * 3-6
                                   2051+******** NULL TRANSLATE LOGIC ********

001528                             2053+IJLTRANS EQU   *
001528 9204 F0AB      00ED3        2054+         MVI   IJLRCLOC,IJLTRANL NO TRANSLATE LOGIC
00152C 47F0 F7A2            015CA  2055+         B     IJLUSER RETURN TO USER
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   49


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001530                             2057+IJLBTRO  EQU   * 3-6
                                   2058+******** NULL BTRD LOGIC ********                                   3-5

001530                             2060+IJLBTROD EQU   * NULL BTRD LOGIC                                    3-5
001530 9208 F0AB      00ED3        2061+         MVI   IJLRCLOC,IJLNBTRD SET NO OBRSDR RETURN CODE
001534 47F0 F7A2            015CA  2062+         B     IJLUSER NO LOGIC PRESENT, RETURN TO USER             3-5
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   50


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001538                             2064+IJLBONLT EQU   * 3-1
001538 9210 F0AB      00ED3        2065+         MVI   IJLRCLOC,IJLNTSLG SET ERROR RETURN CODE          3-1
00153C 47F0 F7A2            015CA  2066+         B     IJLUSER 3-1
                                   2067+* MISCELLANEOUS BTMOD SUBROUTINES


                                   2069+******** IJLPTLCB -- SUBROUTINE TO POINT TO LINE CONTROL BLOCK *****

001540                             2071+IJLPTLCB EQU   *
001540 D500 D000 C019 00000 00019  2072+         CLC   IJLDTFNL,IJLDERLN COMPARE LINE COUNT AND REL
001546 4720 F73E            01566  2073+         BH    IJLPLCB1 PROCEED IF NUMBER OF LINES IS GREATER
00154A 9208 F0AB      00ED3        2074+         MVI   IJLRCLOC,IJLRXRLN RELATIVE LINE NUMBER TOO LARGE
00154E 950A F001      00001        2075+         CLI   IJLKONT1(IJLBTBAS),IJLKTX0A IS MACRO CODE            3-B
                                   2076+*                            BYTE FOR TERMTST IN TWAIT?             3-B
001552 4770 F7A2            015CA  2077+         BNE   IJLUSER IF NOT, THEN JUST RETURN TO USER            3-B
001556 5820 F0A4            00ECC  2078+         L     IJLWKRG3,IJLSVR14 ADDRESS USERS REG 14              3-B
00155A 4122 0004            00004  2079+         LA    IJLWKRG3,IJLKONT4(IJLWKRG3) BUMP RETURN ADDR BY 4    3-B
00155E 5020 F0A4            00ECC  2080+         ST    IJLWKRG3,IJLSVR14 REPLACE RETURN REG                3-B
001562 47F0 F7A2            015CA  2081+         B     IJLUSER RETURN TO USER

001566                             2083+IJLPLCB1 EQU   *
001566 1B22                        2084+         SR    IJLWKRG3,IJLWKRG3 CLEAR EVEN WORK REGISTER
001568 4320 C019            00019  2085+         IC    IJLWKRG3,IJLDERLN GET RELATIVE LINE NUMBER FROM DECB
00156C 1B33                        2086+         SR    IJLWKRG4,IJLWKRG4 CLEAR ODD WORK REG
00156E 4330 D001            00001  2087+         IC    IJLWKRG4,IJLDTFSL LOAD SIZE OF LCB FROM DTFBT
001572 1C22                        2088+         MR    IJLWKRG3,IJLWKRG3 COMPUTE DISPLACEMENT FROM 0'TH LCB
001574 4110 D028            00028  2089+         LA    IJLLCBRG,IJLDTFRC POINT TO 0'TH LCB
001578 1A13                        2090+         AR    IJLLCBRG,IJLWKRG4 POINT TO N'TH LCB
00157A 07FE                        2091+         BR    IJLLNKRG RETURN TO CALLER

                                   2093+******** IJLPTSGM -- SUBROUTINE TO POINT TO A SEGMENT MODEL ********

00157C                             2095+IJLPTSGM EQU   * PRIMARY ENTRY POINT FOR OFFSET INDEX IN IJLICREG
00157C 1850                        2096+         LR    IJLWKRGO,IJLICREG LOAD  WORK REGISTER

00157E                             2098+IJLPTSGW EQU   * SECONDARY ENTRY POINT FOR OFFSET INDEX IN IJLWKRGO
00157E 5820 D020            00020  2099+         L     IJLWKRG3,IJLDTFTO-1 GET OFFSET ADDRESS AND        3-4
001582 4352 5000            00000  2100+         IC    IJLWKRGO,0(IJLWKRG3,IJLWKRGO) CCW MODEL DISPLACEMENT 3-4
001586 4950 F7E6            0160E  2101+         CH    IJLWKRGO,=X'00FF' COMPARE TO NULL OFFSET
00158A 4770 F76E            01596  2102+         BNE   IJLSGE10 NOT EQUAL IS O. K.
00158E 920C F0AB      00ED3        2103+         MVI   IJLRCLOC,IJLRUDOT UNDEFINED OP TYPE
001592 47F0 F7A2            015CA  2104+         B     IJLUSER

001596                             2106+IJLSGE10 EQU   * O.K. TO GENERATE SEGMENT
001596 8950 0002            00002  2107+         SLL   IJLWKRGO,2 MULTIPLY BY 4 -- WIDTH OF CCW MODEL
00159A 5A50 D00C            0000C  2108+         A     IJLWKRGO,IJLDTFMA-1 ADD MODEL TABLE ADDR TO OFFSET
00159E 07FE                        2109+         BR    IJLLNKRG RETURN TO CALLER
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   51


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   2111+******** IJLCANCL -- CANCEL A BTAM PROGRAM ********

                                   2113+*        LOADS THE FIELDS OF THE CANCEL BLOCK AS REQUIRED, THEN
                                   2114+*        WRITES OUT OPERATOR AWARENESS MESSAGE.  IF USER HAS CODED
                                   2115+*        'CANCEL=NO', PUTS CANCEL CODE IN RETURN CODE REGISTER.

0015A0                             2117+IJLCANCL EQU   * ENTRY TO LOAD FIELDS (EXCEPT MESSAGE CODE)
0015A0 50D0 F0B4            00EDC  2118+         ST    IJLDTFRG,IJLFWWA1 HOLD DTFBT ADDRESS
0015A4 D202 F0B9 F0B5 00EE1 00EDD  2119+         MVC   IJLCNBLK+1(3),IJLFWWA1+1 POST DTFBT ADDRESS
0015AA 50C0 F0B4            00EDC  2120+         ST    IJLDECBR,IJLFWWA1 HOLD DECB ADDRESS
0015AE D202 F0BD F0B5 00EE5 00EDD  2121+         MVC   IJLCNBLK+5(3),IJLFWWA1+1 POST DECB ADDRESS

0015B4                             2123+IJLCNC10 EQU   * ENTRY FOR FIELDS ALREADY LOADED
0015B4 4100 F0B8            00EE0  2124+         LA    0,IJLCNBLK SET POINTER TO CANCEL BLOCK (0 MANDATORY)
0015B8 5000 F7B4            015DC  2125+         ST    0,IJLBASV SAVE ADDRESS FOR USER CANCEL, IF ANY
0015BC 4110 F7D8            01600  2126+         LA    1,=CL8'$$BTCNCL' SET POINTER TO NAME (1 MANDATORY)
0015C0 0A02                        2127+         SVC   IJLLGTRN EXECUTE MESSAGE MODULE (WRITE SYSLOG)

                                   2129+*        RETURN HERE ONLY FOR CANCEL=NO.

0015C2 9201 F0AB      00ED3        2131+         MVI   IJLRCLOC,IJLRCNCL SET RETURN CODE TO CANCEL
                                   2132+*        FALL THROUGH TO USER RETURN FOR BUFFER MACROS

                                   2134+******** IJLUSER -- GENERAL EXIT PROCEDURE FOR USER RETURN ********

0015C6                             2136+IJLUSERB EQU   * ENTRY POINT FOR BUFFER MACROS
0015C6 94FE F7B8      015E0        2137+         NI    IJLBASV+4,X'FF'-X'01' RESET BUFFER OPERATION SWITCH  3-1

0015CA                             2139+IJLUSER  EQU   * NORMAL ENTRY POINT
0015CA 9102 F0BC      00EE4        2140+         TM    IJLPRGSW,IJLBNLNK+0*IJLCPLNK TEST FOR NON-EXT
0015CE 4770 F7BC            015E4  2141+         BNZ   IJLNXUSR EITHER FLAG ON IS NON-EXTERNAL
                                   2142+* MUST BE NORMAL EXTERNAL USER
0015D2 980F F06C            00E94  2143+         LM    0,15,IJLSVURA RESTORE USER REGISTERS
0015D6 12FF                        2144+         LTR   IJLRCREG,IJLRCREG SET CONDITION CODE FOR EXTERNAL USE
0015D8 0700                        2145+         CNOP  2,4 FORCE THE FOLLOWING INSTRUCTION ONTO A HALF WORD
0015DA 051E                        2146+         BALR  IJLPRMRG,IJLRETRG RETURN TO USER AFTER LINKING
0015DC FFFFFFFF                    2147+IJLBASV  DC    F'-1' THE PARAMETER REGISTER TO FULL-WORD DATA SAVER
0015E0 00FFFFFF                    2148+         DC    X'00FFFFFF' ALTERNATE BUFFER ADDR SAVE FOR APPENDAGE

0015E4                             2150+IJLNXUSR EQU   * NON-EXTERNAL USER, I.E. SOME BTAM FUNCTION
0015E4 4300 F0AB            00ED3  2151+         IC    IJLICREG,IJLRCLOC GET RETURN CODE
0015E8 9102 F7B8      015E0        2152+         TM    IJLBASV+4,X'02' SHOULD INTERNAL LINK SW STAY ON      3-1
0015EC 4710 F7CC            015F4  2153+         BO    *+8 IF SO, DONT TURN  IT OFF                         3-1
0015F0 94FD F0BC      00EE4        2154+         NI    IJLPRGSW,X'FF'-IJLBNLNK RESET INTERNAL LINKAGE SWITCH
0015F4 94FD F7B8      015E0        2155+         NI    IJLBASV+4,X'FF'-X'02' RESET CHECK SWITCH             3-1
0015F8 1200                        2156+         LTR   IJLICREG,IJLICREG SET CONDITION CODE FOR INTERNAL
0015FA 07FE                        2157+         BR    IJLLNKRG RETURN TO INTERNAL CALLER
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   52


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001600                             2159+         LTORG
001600 5B5BC2E3C3D5C3D3            2160                =CL8'$$BTCNCL'
001608 00000000                    2161                =V(IJLSGEN)
00160C 0004                        2162                =X'0004'
00160E 00FF                        2163                =X'00FF'
001610 000000                      2164                =XL3'0'
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   53


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001618                             2166+IJLSGEN  CSECT  3-6
001618                             2167+         USING IJLSGEN,IJLWKRG2 3-6
                                   2168+******** IJLSGEN -- SEGMENT GENERATOR ********

                                   2170+*        GENERATES THE CHANNEL PROGRAM SEGMENT REQUESTED BY THE
                                   2171+*        SEGMENT MODEL ADDRESS PREVIOUSLY LOADED INTO IJLWKRGO

001618                             2173+         DC    0H'0' 3-6
001618 1B44                        2174+         SR    IJLWKRGE,IJLWKRGE CLEAR OTHER WORK REG
00161A 4340 5003            00003  2175+         IC    IJLWKRGE,IJLMCCW3 GET PACKED BYTE FROM MODEL
00161E 8A40 0005            00005  2176+         SRA   IJLWKRGE,5 SHIFT OUT GARBAGE
001622 8B40 0002            00002  2177+         SLA   IJLWKRGE,2 MULT BY 4 (WIDTH OF BRANCH)
001626 9200 F0C5      00EED        2178+         MVI   IJLPDGIT,X'00' CLEAR IJLPDIGIT BEFORE USING          3-5
00162A D100 F0C5 5003 00EED 00003  2179+         MVN   IJLPDGIT,IJLMCCW3 EXTRACT PACKED NUMERICS
001630 4404 A01C            01634  2180+         EX    0,IJLSGBT(IJLWKRGE) BRANCH TO REQUESTED MODEL EXPDR

001634                             2182+IJLSGBT  EQU   * BRANCH TABLE FOR MODEL EXPANDERS
001634 47F0 A030            01648  2183+         B     IJLSG100
001638 47F0 A040            01658  2184+         B     IJLSG200
00163C 47F0 A05C            01674  2185+         B     IJLSG300
001640 47F0 A086            0169E  2186+         B     IJLSG400
001644 47F0 A0A8            016C0  2187+         B     IJLSG500

                                   2189+******** MODEL EXPANDER 1 (COUNT AND ADDRESS) ********

001648                             2191+IJLSG100 EQU   *
001648 D202 1029 C00D 00029 0000D  2192+         MVC   IJLLCBDA,IJLDEIOA IOADDRESS FROM DECB TO CCW
00164E D201 102E F0C4 0002E 00EEC  2193+         MVC   IJLLCBDC,IJLPDGIT-1 MOVE COUNT INTO CCW
001654 47F0 A0BE            016D6  2194+         B     IJLSGX GO FINISH MODEL

                                   2196+******** MODEL EXPANDER 2 (COUNT AND ADDRESS) ********

001658                             2198+IJLSG200 EQU   *
001658 5840 C00C            0000C  2199+         L     IJLWKRGE,IJLDEIOA-1 LOAD IO AREA ADDRESS
00165C 4A40 F0C4            00EEC  2200+         AH    IJLWKRGE,IJLPDGIT-1 ADD MODIFER
001660 5040 1028            00028  2201+         ST    IJLWKRGE,IJLLCBDA-1 STORE IN DATA ADDRESS
001664 4840 C006            00006  2202+         LH    IJLWKRGE,IJLDELGT LOAD LENGTH
001668 4B40 F0C4            00EEC  2203+         SH    IJLWKRGE,IJLPDGIT-1 SUBTRACT MODIFER
00166C 4040 102E            0002E  2204+         STH   IJLWKRGE,IJLLCBDC STORE IN DATA COUNT
001670 47F0 A0BE            016D6  2205+         B     IJLSGX GO FINISH

                                   2207+******** MODEL EXPANDER 3 (COUNT AND ADDRESS) ********

001674                             2209+IJLSG300 EQU   *
001674 9504 5000      00000        2210+         CLI   IJLMCCW0,X'04' 3-3
001678 4770 A068            01680  2211+         BNE   IJLSG30A 3-3
00167C 92FF C01A      0001A        2212+         MVI   IJLDERAD,X'FF' MOVE X'FF' IN THE RESPONSE FIELD      3-2
001680                             2213+IJLSG30A EQU   * 3-2
001680 4840 F0C4            00EEC  2214+         LH    IJLWKRGE,IJLPDGIT-1 LOAD WORK REGISTER
001684 8A40 0002            00002  2215+         SRA   IJLWKRGE,2 SHIFT OFF LOW GARBAGE
001688 4144 C01A            0001A  2216+         LA    IJLWKRGE,IJLDERAD(IJLWKRGE) ADD RESPONSE FIELD ADDR
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   54


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00168C 5040 1028            00028  2217+         ST    IJLWKRGE,IJLLCBDA-1 STORE AS DATA ADDRESS
001690 9403 F0C5      00EED        2218+         NI    IJLPDGIT,B'00000011' ELIMINATE HIGH-ORDER 6 POSITIONS
001694 D201 102E F0C4 0002E 00EEC  2219+         MVC   IJLLCBDC,IJLPDGIT-1 MOVE RESULT TO DATA COUNT
00169A 47F0 A0BE            016D6  2220+         B     IJLSGX GO FINISH CCW

                                   2222+******** MODEL EXPANDER 4 (COUNT AND ADDRESS) ********

00169E                             2224+IJLSG400 EQU   *
00169E 5820 D018            00018  2225+         L     IJLWKRG3,IJLDTSPC-1 GET SPECIAL CHAR ADDRESS
0016A2 4840 F0C4            00EEC  2226+         LH    IJLWKRGE,IJLPDGIT-1 LOAD WORK REGISTER
0016A6 1A44                        2227+         AR    IJLWKRGE,IJLWKRGE DOUBLE THE MODIFIER
0016A8 1A42                        2228+         AR    IJLWKRGE,IJLWKRG3 POINT TO SPECIAL CHAR
0016AA D200 102F 4000 0002F 00000  2229+         MVC   IJLLCBDC+1(1),0(IJLWKRGE) PICK OUT SPEC CHAR COUNT
0016B0 9200 102E      0002E        2230+         MVI   IJLLCBDC,X'00' CLEAR COUNT HIGH ORDER
0016B4 4144 0001            00001  2231+         LA    IJLWKRGE,1(IJLWKRGE) MOVE ADDRESS UP 1
0016B8 5040 1028            00028  2232+         ST    IJLWKRGE,IJLLCBDA-1 STORE AS DATA ADDRESS
0016BC 47F0 A0BE            016D6  2233+         B     IJLSGX GO FINISH CCW

                                   2235+******** MODEL EXPANDER 5 (COUNT AND ADDRESS) ********

0016C0                             2237+IJLSG500 EQU   *
0016C0 D202 1029 C015 00029 00015  2238+         MVC   IJLLCBDA,IJLDELEA PUT LIST ENTRY AS DATA ADDRESS
0016C6 D100 F0C5 5003 00EED 00003  2239+         MVN   IJLPDGIT,IJLMCCW3 EXTRACT NUMERICS
0016CC D201 102E F0C4 0002E 00EEC  2240+         MVC   IJLLCBDC,IJLPDGIT-1 MOVE TO DATA COUNT
0016D2 47F0 A0BE            016D6  2241+         B     IJLSGX GO FINISH CCW

                                   2243+******** MODEL EXPANDER X ********

                                   2245+*        (COMMAND CODE, CHANNEL FLAGS, TP CODE, HOUSEKEEPING)

0016D6                             2247+IJLSGX   EQU   *
0016D6 D200 1028 5000 00028 00000  2248+         MVC   IJLLCBCC,IJLMCCW0 MOVE COMMAND CODE FROM MODEL
0016DC                             2249+IJLSGX02 EQU   * 3-6
0016DC D201 102C 5001 0002C 00001  2250+         MVC   IJLLCBCF(2),IJLMCCW1 MOVE CHAN FLAGS & TP CODE
0016E2 9101 F0BC      00EE4        2251+         TM    IJLPRGSW,IJLBMACC CHECK FOR MULTI-ADDR AND COMMAND CH
0016E6 4780 A0E2            016FA  2252+         BZ    IJLSGX01 SWITCH OFF IS NORMAL
0016EA 9506 102D      0002D        2253+         CLI   IJLLCBTC,IJLTRRWA CHECK WHETHER MULT-ADDR IN THIS MOD
0016EE 4770 A0E2            016FA  2254+         BNE   IJLSGX01 NO MULT-ADDR IS NORMAL  CASE
0016F2 9640 102C      0002C        2255+         OI    IJLLCBCF,X'40' CMD CHAIN REQD IN THIS MODEL
0016F6 94FE F0BC      00EE4        2256+         NI    IJLPRGSW,X'FF'-IJLBMACC ONLY ONCE, RESET SWITCH
0016FA                             2257+IJLSGX01 EQU   *
0016FA 4111 0008            00008  2258+         LA    IJLLCBRG,8(IJLLCBRG) POINT DSECT REG TO NEXT CCW
0016FE 9110 5003      00003        2259+         TM    IJLMCCW3,B'00010000' CHECK FOR LAST CCW MODEL
001702 071E                        2260+         BCR   1,IJLLNKRG RETURN TO CALLER
001704                             2261+IJLSGX03 EQU   *
001704 4155 0004            00004  2262+         LA    IJLWKRGO,4(IJLWKRGO) ELSE POINT TO NEXT MODEL CCW
001708 47F0 A000            01618  2263+         B     IJLSGEN BACK TO EXPAND THE NEXT MODEL
                                   2264+         DROP  IJLWKRG2 3-6
001710                             2265+         LTORG  3-6
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   55


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   2267+******** IJLBTIH -- BTAM INTERRUPTION HANDLER ********

                                   2269+*        RECEIVES CONTROL ON INTERRUPTIONS FOR TELECOMMUNICATIONS
                                   2270+*        DEVICES ACCESSED THROUGH CCB'S WITH BYTE 12 = X'40'.
                                   2271+*        INTERPRETS THE INTERRUPTION FOR TELEPROCESSING SIGNIFICANCE
                                   2272+*        POSTS COMPLETION TO ECB, TURNS MASTER WAIT BIT ON, AND
                                   2273+*        RETURNS CONTROL TO THE SUPERVISOR FOR FURTHER PROCESSING.

001710                             2275+         USING IJLBTIH,IJLBTIHB,IJLBTIH1,IJLBTIH2
                                   2276+         DROP  IJLBUFRG
000000                             2277+         USING IJLTABLE,IJLSPCRG

                                   2279+*        INITIALIZATION

001710                             2281+IJLBTIH  CSECT  CHANNEL APPENDAGE
001710 9020 80F4            01804  2282+         STM   2,0,IJLSVSUP SAVE SUPERVISOR REGISTERS
001714 1868                        2283+         LR    IJLBTIH1,IJLBTIHB PRIME 2ND BASE REGISTER
001716 4A60 8130            01840  2284+         AH    IJLBTIH1,IJLB4096
00171A 1876                        2285+         LR    IJLBTIH2,IJLBTIH1 PRIME 3RD BASE REGISTER
00171C 4A70 8130            01840  2286+         AH    IJLBTIH2,IJLB4096
001720 58F0 8C68            02378  2287+         L     IJLBTBAS,=A(IJLBTM) SET UP BTMOD ADDRESSABILITY
001724 189F                        2288+         LR    IJLBTBA2,IJLBTBAS
001726 4A90 8130            01840  2289+         AH    IJLBTBA2,IJLB4096
00172A 9620 F0BC      00EE4        2290+         OI    IJLPRGSW,IJLBDSAB SET SWITCH TO SHOW RUNNING DISABLED
00172E 1811                        2291+         LR    IJLLCBRG,IJLCCBAR ADDRESS USER LCB, USING CCB ADDRESS
001730 D502 1011 8C98 00011 023A8  2292+         CLC   IJLLCBDE(3),=XL3'0' DECB ADDRESS PRESENT?            3-5
001736 4770 8034            01744  2293+         BNE   *+14 3-5
00173A D201 0044 8C7C 00044 0238C  2294+         MVC   IJLCSWS0(2),=XL2'0' SET ZERO STATUS                 3-9
001740 47F0 8BEC            022FC  2295+         B     IJLNOERM RETURN TO SUPERVISOR                       3-B
001744 58C0 1010            00010  2296+         L     IJLDECBR,IJLLCBDE-1 ADDR USER DECB BY ADDR FROM LCB
001748 58D0 C008            00008  2297+         L     IJLDTFRG,IJLDEDFA-1 ADDRESS USER DTFBT FROM DECB
00174C 9547 D014      00014        2298+         CLI   IJLDTFTU,IJLKTX40+IJLC3272 CU = 3272              3-A
001750 4780 84AA            01BBA  2299+         BE    IJLI3277 YES, GO PROCESS 3277L INTERRUPT       3-A
001754 D501 8C7E 0044 0238E 00044  2300+         CLC   =XL2'7000',IJLCSWS0 SM,CUE,BUSY FOR 2702/3 OR 777X
00175A 4780 8BFA            0230A  2301+         BE    IJLNTRY0
00175E 5840 0040            00040  2302+         L     IJLWKRGE,IJLCSWCA-1 GET ADDR LAST CCW + 8
001762 4144 0000            00000  2303+         LA    IJLWKRGE,0(IJLWKRGE) CLEAR OUT PROTECTION KEY
001766 4B40 8C80            02390  2304+         SH    IJLWKRGE,=H'8' BACK UP TO CCW
00176A D502 8C98 0041 023A8 00041  2305+         CLC   =XL3'0',IJLCSWCA CHECK CSW CCW ADDRESS
001770 4770 8068            01778  2306+         BNE   IJLCKTP IF NON-ZERO, GO TO TP CODE CHECK
001774 4140 1028            00028  2307+         LA    IJLWKRGE,IJLLCBC1 ELSE POINT TO PROGRAM CCW

                                   2309+*       CHECK FOR SPECIAL PROCESSING REQUIREMENTS

001778                             2311+IJLCKTP  EQU   * CHECK TP CODE
001778 9530 4005      00005        2312+         CLI   IJLCCWTC,X'30' IS TP CODE = 30
00177C 4780 8132            01842  2313+         BE    IJLTP30 GO TO SPECIAL TP CODE ROUTINE
001780 9504 4000      00000        2314+         CLI   IJLCCWCC,X'04' WAS LAST COMMAND SENSE
001784 4780 81B4            018C4  2315+         BE    IJLBTSNS IF SO, GO TO SENSE PROCESSOR
001788 9120 1010      00010        2316+         TM    IJLLCBFL,IJLBHIOR CHECK FOR HALT I/O REQUEST FLAG
00178C 4710 81F2            01902  2317+         BO    IJLBTHIO IF ON, GO TO HALT I/O PROCESSOR
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   56


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   2319+*        CHECK FOR NORMAL ENDING CONDITIONS

001790 D501 8C82 0044 02392 00044  2321+         CLC   =XL2'0C00',IJLCSWS0 CE,DE ONLY
001796 4780 81FE            0190E  2322+         BE    IJLIP03
00179A D501 8C84 0044 02394 00044  2323+         CLC   =XL2'0C40',IJLCSWS0 CE,DE AND IL
0017A0 4780 8A9C            021AC  2324+         BE    IJLIP18

                                   2326+*        CHECK FOR ABNORMAL AND SPECIAL CONDITIONS

0017A4                             2328+IJL2260E EQU   *
0017A4 9108 0045      00045        2329+         TM    IJLCSWS1,X'08' CDC PRESENT
0017A8 4710 82DA            019EA  2330+         BO    IJLIP05
0017AC 910C 0044      00044        2331+         TM    IJLCSWS0,X'0C' CHECK FOR CE+DE PRESENT
0017B0 4710 80D0            017E0  2332+         BO    IJLIP02A IF BOTH, SKIP NEXT TEST
0017B4 9511 D00C      0000C        2333+         CLI   IJLDTFDV,IJLD3277 IS DEVICE A 3277                 3-A
0017B8 4770 80C8            017D8  2334+         BNE   IJLZCHCK NO, TEST FOR CHAINING CHECK           3-A
0017BC 9182 0044      00044        2335+         TM    IJLCSWS0,IJLZ1S80+IJLZ1S02 ATTN,UC PRESENT?          3-C
0017C0 47E0 80B8            017C8  2336+         BNO   IJLZ327J NO, DON'T RESET PUB FLAGS                   3-C
0017C4 947B 3006      00006        2337+         NI    IJLKONT6(IJLPUBRG),X'FF'-IJLZPBSZ-IJLZPBDE TURN OFF 3-A
                                   2338+*                                       PUB BUSY AND DE             3-A
0017C8                             2339+IJLZ327J EQU   * 3-A
0017C8 9184 0044      00044        2340+         TM    IJLCSWS0,IJLZ1S80+IJLZ1S04 ASYNCHRONOUS STATUS      3-A
0017CC 4740 80D0            017E0  2341+         BM    IJLIP02A YES, DO A SENSE                  3-A
0017D0 9102 0044      00044        2342+         TM    IJLCSWS0,IJLZ1S02 IS UC SET IN STATUS?              3-B
0017D4 4710 831A            01A2A  2343+         BO    IJLIP13E IF YES, GO ISSUE SENSE                     3-B
0017D8                             2344+IJLZCHCK EQU   * 3-A
0017D8 9101 0045      00045        2345+         TM    IJLCSWS1,X'01' TEST FOR CHAINING CHECK
0017DC 4780 82FA            01A0A  2346+         BZ    IJLIP13 IF NO , GO CHECK FOR RETRY

0017E0                             2348+IJLIP02A EQU   * NOT ERROR AT INITIAL SELECTION
0017E0 9102 0044      00044        2349+         TM    IJLCSWS0,X'02' UC PRESENT
0017E4 4710 831A            01A2A  2350+         BO    IJLIP13E GO TO ISSUE SENSE COMMAND
0017E8 9101 0045      00045        2351+         TM    IJLCSWS1,X'01' CC PRESENT
0017EC 4710 8340            01A50  2352+         BO    IJLIP14
0017F0 9130 0045      00045        2353+         TM    IJLCSWS1,X'20'+X'10' PROGRAM CHECK OR PROTECTION CHEC
0017F4 4770 8350            01A60  2354+         BNZ   IJLIP15
0017F8 9101 0044      00044        2355+         TM    IJLCSWS0,X'01' UE PRESENT
0017FC 4710 8374            01A84  2356+         BO    IJLIP17
001800 47F0 82EE            019FE  2357+         B     IJLIP12E CONDITION NOT IDENTIFIABLE BY BTAM

001804 FFFFFFFFFFFFFFFF            2359+IJLSVSUP DC    15F'-1'
001840 1000                        2360+IJLB4096 DC    H'4096'

001842                             2362+IJLTP30  EQU   * SPECIAL ROUTINE FOR ERP-COMMAND PROCESSING
001842 9541 4000      00000        2363+         CLI   IJLCCWCC,X'41' IS COMMAND = 2848 BREAK               3-3
001846 4780 81AC            018BC  2364+         BE    IJLPRTP1 3-3
00184A 9542 4000      00000        2365+         CLI   IJLCCWCC,X'42' IS COMMAND = 2848 READ CLEAR          3-3
00184E 4780 818E            0189E  2366+         BE    IJLSTRTB IF SO, START BREAK                          3-3
001852 9502 4000      00000        2367+         CLI   IJLCCWCC,X'02' IS COMMAND CODE 'READ'
001856 4770 8A32            02142  2368+         BNE   IJLPSNO IF NOT, SHOULD NOT OCCUR
00185A 9108 C004      00004        2369+         TM    IJLDEOF1,IJLAUTPL IS AUTOPOLL USED                   3-3
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   57


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00185E 4710 8174            01884  2370+         BO    IJLTP30B 3-3
001862 951F 1018      00018        2371+IJLNAPL1 CLI   IJLLCBSW,IJLMSBOC IS BUS-OUT MESSAGE CODE SET        3-6
001866 4780 816A            0187A  2372+         BE    IJLTP30A IF SO, GO ADJUST CCB CCW-ADDRESS
00186A 9520 1018      00018        2373+         CLI   IJLLCBSW,IJLMSDTC IS DATA CHECK MESSAGE CODE SET
00186E 4780 8A68            02178  2374+         BE    IJLERXT3 IF SO POST ERROR & PRINT MESSAGE
001872 921C 1018      00018        2375+         MVI   IJLLCBSW,IJLMSLSD ELSE SET LOST DATA MESSAGE
001876 47F0 8A68            02178  2376+         B     IJLERXT3 GO POST COMPLETION AND WRITE MESSAGE

00187A                             2378+IJLTP30A EQU   *
00187A D202 1009 C001 00009 00001  2379+         MVC   IJLLCBCA,IJLDEECB+1 PUT SAVED CCW ADDRESS INTO CCB
001880 47F0 8BFA            0230A  2380+         B     IJLNTRY0 GO FOR RE-EXECUTION

001884                             2382+IJLTP30B EQU   * 3-3
001884 9509 C014      00014        2383+         CLI   IJLDELCC,X'09' POLL ERROR                            3-6
001888 4770 8152            01862  2384+         BNE   IJLNAPL1 3-6
00188C 4140 1028            00028  2385+         LA    IJLWKRGE,IJLLCBC1 GET ADDRESS OF 1ST CCW             3-3
001890 5040 1008            00008  2386+         ST    IJLWKRGE,IJLLCBCA-1 STORE IN LCB                     3-3
001894 D707 1020 1020 00020 00020  2387+         XC    IJLLCBC0,IJLLCBC0 CLEAR READ SKIP                    3-3
00189A 47F0 8BFA            0230A  2388+         B     IJLNTRY0 RE-EXECUTE                                  3-3

00189E                             2390+IJLSTRTB EQU   * 3-3
00189E 951D 1018      00018        2391+         CLI   IJLLCBSW,IJLMSTOT IS TIME OUT MESSAGE SET UP         3-3
0018A2 4780 8A68            02178  2392+         BE    IJLERXT3 IF SO, POST ERROR & PRINT MESSAGE           3-3
0018A6 921D 1018      00018        2393+         MVI   IJLLCBSW,IJLMSTOT SET UP TIME MESSAGE                3-3
0018AA 4150 1028            00028  2394+         LA    IJLWKRGO,IJLLCBC1 GET ADDRESS OF 1ST CCW             3-3
0018AE 5050 1008            00008  2395+         ST    IJLWKRGO,IJLLCBCA-1 STORE IN LCB                     3-3
0018B2 D201 0044 8C82 00044 02392  2396+         MVC   IJLCSWS0(2),=XL2'0C00' SET CE,DE                    3-9
0018B8 47F0 8BFA            0230A  2397+         B     IJLNTRY0 RE-EXECUTE                                  3-3

0018BC                             2399+IJLPRTP1 EQU   * 3-3
0018BC 921D 1018      00018        2400+         MVI   IJLLCBSW,IJLMSTOT SET UP TIME OUT MESSAGE            3-3
0018C0 47F0 8A68            02178  2401+         B     IJLERXT3 POST ERROR AND PRINT MESSAGE                3-3
0018C4                             2402+IJLBTSNS EQU   * SENSE PROCESSOR
0018C4 D501 8C82 0044 02392 00044  2403+         CLC   =XL2'0C00',IJLCSWS0 CE,DE ONLY
0018CA 4770 8A3E            0214E  2404+         BNE   IJLERXT2
0018CE 910C C01E      0001E        2405+         TM    IJLDEST0,X'0C' CE,DE PRESENT IN LAST USER OPERATION
0018D2 4710 8542            01C52  2406+         BO    IJLSENS2
0018D6 9120 C010      00010        2407+         TM    IJLDESN0,X'20' SENSE STORED BO-CHECK
0018DA 4780 81D6            018E6  2408+         BZ    IJLIP13D
0018DE 921F 1018      00018        2409+         MVI   IJLLCBSW,IJLMSBOC PUT BUS OUT CHECK CODE IN LCB
0018E2 47F0 8A68            02178  2410+         B     IJLERXT3

0018E6 9180 C010      00010        2412+IJLIP13D TM    IJLDESN0,X'80' SENSE STORED COMMAND REJECT
0018EA 4780 81E6            018F6  2413+         BZ    IJLIP13F
0018EE 9222 1018      00018        2414+         MVI   IJLLCBSW,IJLMSCRJ PUT COMMAND REJECT CODE IN LCB
0018F2 47F0 8A68            02178  2415+         B     IJLERXT3

0018F6                             2417+IJLIP13F EQU   *
0018F6 9216 1018      00018        2418+         MVI   IJLLCBSW,IJLMSSNO POST SHOULD NOT OCCUR MSG CODE
0018FA 9640 C01D      0001D        2419+         OI    IJLDEEI,B'01000000' SET SHOULD NOT OCCUR BIT IN DECB
0018FE 47F0 8A68            02178  2420+         B     IJLERXT3
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   58


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001902                             2422+IJLBTHIO EQU   * HALT I/O PROCESSOR
001902 94DF 1010      00010        2423+         NI    IJLLCBFL,X'FF'-IJLBHIOR TURN OFF HALT I/O FLAG IN LCB
001906 9248 C000      00000        2424+         MVI   IJLDEECB,IJLCHIOR POST HALT I/O REQUESTED TO USER DEC
00190A 47F0 8B04            02214  2425+         B     IJLPOST GO TO POST THE DECB

00190E                             2427+IJLIP03  EQU   * CE, DE ONLY

00190E                             2429+IJLOIUCK EQU   * CHECK FOR MESSAGE COMING FROM 2760                 3-5
00190E 9101 D002      00002        2430+         TM    IJLDTFFE,X'01' OIU FEATURE FLAG?                     3-5
001912 4780 8224            01934  2431+         BZ    IJLRRWAC IF NOT, CONTINUE                            3-5
001916 5850 C00C            0000C  2432+         L     IJLWKRGO,IJLDEIOA-1 GET ADDRESS OF DATA AREA         3-5
00191A D501 5000 8C86 00000 02396  2433+         CLC   0(2,IJLWKRGO),=X'3E4C' IS MESSAGE FROM THE OIU       3-5
001920 4780 821C            0192C  2434+         BE    IJLOIUFL 3-5
001924 94FE 1010      00010        2435+         NI    IJLLCBFL,X'FF'-X'01' TURN OFF OIU MSG FLAG IN LCB    3-5
001928 47F0 8224            01934  2436+         B     IJLRRWAC CONTINUE                                    3-5
00192C                             2437+IJLOIUFL EQU   * TURN ON LCB FLAG                                   3-5
00192C 9601 1010      00010        2438+         OI    IJLLCBFL,IJLOIUMS TURN ON OIU MSG FLAG IN LCB        3-5
001930 47F0 8224            01934  2439+         B     IJLRRWAC CONTINUE                                    3-5

001934                             2441+IJLRRWAC EQU   *
001934 9506 4005      00005        2442+         CLI   IJLCCWTC,IJLTRRWA READ RESP TO WRITE ADDR CHAR
001938 4780 8246            01956  2443+         BE    IJLIP03X
00193C 9501 4005      00005        2444+         CLI   IJLCCWTC,IJLTRSAE RESTART AFTER ENABLE
001940 4780 8238            01948  2445+         BE    IJLIP03R
001944 47F0 8AD8            021E8  2446+         B     IJLCNOER POST COMPLETE WITHOUT ERROR
001948                             2447+IJLIPO3D EQU   * 3-A
001948                             2448+IJLIP03R EQU   * RESTART AFTER ENABLE
001948 94F7 C018      00018        2449+         NI    IJLDEOF2,X'FF'-IJLBENAB RESET DECB ENABLE
00194C D202 1009 0041 00009 00041  2450+         MVC   IJLLCBCA,IJLCSWCA PUT CURRENT CCW+8 ADDR IN USER CCB
001952 47F0 8BFA            0230A  2451+         B     IJLNTRY0 RE-EXECUTE

001956                             2453+IJLIP03X EQU   * READ RESPONSE TO WRITE ADDRESSING CHARACTERS
001956 4B40 8C80            02390  2454+         SH    IJLWKRGE,=H'8' BACK UP TO ADDR PREVIOUS CCW
00195A 9503 4005      00005        2455+         CLI   IJLCCWTC,IJLTWPAC CHECK FOR ADDRESSING CCW
00195E 4780 8256            01966  2456+         BE    *+8
001962 4B40 8C80            02390  2457+         SH    IJLWKRGE,=H'8' ELSE BACK UP ONE MORE CCW
001966 4850 4006            00006  2458+         LH    IJLWKRGO,IJLCCWDC PICK UP ADDR CHAR COUNT

                                   2460+* THE NEXT FIVE INSTRUCTIONS DYNAMICALLY CREATE THE DISPLACEMENT
                                   2461+* FIELD OF FIVE TM INSTRUCTIONS

00196A 4250 8279            01989  2463+         STC   IJLWKRGO,IJLDTM01+3 STORE COUNT AS TM DISPL
00196E 4250 8281            01991  2464+         STC   IJLWKRGO,IJLDTM02+3 STORE COUNT AS TM DISPL
001972 4250 82B1            019C1  2465+         STC   IJLWKRGO,IJLDTM03+3 STORE COUNT AS TM DISPL
001976 4250 82C5            019D5  2466+         STC   IJLWKRGO,IJLDTM04+3 STORE COUNT AS TM DISPL
00197A 4250 82CD            019DD  2467+         STC   IJLWKRGO,IJLDTM05+3 STORE COUNT AS TM DISPL
00197E 58E0 C020            00020  2468+         L     IJLALPTR,IJLDEAP-1 LOAD CURRENT ADDR LIST PTR
001982                             2469+IJLST440 EQU   * POINTER IS INITIALLY NOT AT LAST NON-SKIP ENTRY
001982 41E5 E001            00001  2470+         LA    IJLALPTR,1(IJLWKRGO,IJLALPTR) ADD CHAR COUNT + 1

                                   2472+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   59


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001986 9140 E000      00000        2474+IJLDTM01 TM    *-*(IJLALPTR),IJLBSKIP CHECK FOR SKIP
00198A 4780 8290            019A0  2475+         BZ    IJLST450 IF NO, MORE CHECKING

                                   2477+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

00198E 9180 E000      00000        2479+IJLDTM02 TM    *-*(IJLALPTR),IJLBPEOL CHECK FOR END OF LIST
001992 4780 8272            01982  2480+         BZ    IJLST440 IF NO, BACK FOR NEXT ENTRY

                                   2482+*        THE ONLY REASON FOR PASSING HERE IS ILLEGAL USE OF CHGNTRY

001996 D202 1009 0041 00009 00041  2484+         MVC   IJLLCBCA,IJLCSWCA PUT CSW CHAN ADDR INTO USER CCB
00199C 47F0 8AD0            021E0  2485+         B     IJLCNONP POST NON-PRODUCTIVE OPERATION

0019A0                             2487+IJLST450 EQU   *
0019A0 5040 1008            00008  2488+         ST    IJLWKRGE,IJLLCBCA-1 STORE WRITE AC ADDR IN CCB
0019A4 50E0 C020            00020  2489+         ST    IJLALPTR,IJLDEAP-1 SAVE NEW ADDRESS
0019A8 D202 4001 C021 00001 00021  2490+         MVC   IJLCCWDA,IJLDEAP MOVE ADDR PTR TO CCW
0019AE 4144 0008            00008  2491+         LA    IJLWKRGE,8(IJLWKRGE) POINT TO READ RESPONSE CCW
0019B2 9506 4005      00005        2492+         CLI   IJLCCWTC,IJLTRRWA CHECK FOR READ RESPONSE TO ADDR
0019B6 4780 82AE            019BE  2493+         BE    *+8
0019BA 4144 0008            00008  2494+         LA    IJLWKRGE,8(IJLWKRGE) POINT TO READ RESPONSE CCW

                                   2496+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

0019BE 9180 E000      00000        2498+IJLDTM03 TM    *-*(IJLALPTR),IJLBPEOL CHECK FOR END OF LIST
0019C2 4780 82BE            019CE  2499+         BZ    IJLST460 IF NO, CHECK FOR MORE NONSKIPS
0019C6 9640 4004      00004        2500+         OI    IJLCCWCF,X'40' ELSE TURN ON ONCOMMAND CHAIN FLAG
0019CA 47F0 8BFA            0230A  2501+         B     IJLNTRY0 RE-EXECUTE CCW

0019CE                             2503+IJLST460 EQU   *
0019CE 41E5 E001            00001  2504+         LA    IJLALPTR,1(IJLWKRGO,IJLALPTR) ADVANCE TO NEXT ENTRY

                                   2506+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

0019D2 9140 E000      00000        2508+IJLDTM04 TM    *-*(IJLALPTR),IJLBSKIP CHECK SKIP
0019D6 4780 8BFA            0230A  2509+         BZ    IJLNTRY0 IF OFF, NO C.C.

                                   2511+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

0019DA 9180 E000      00000        2513+IJLDTM05 TM    *-*(IJLALPTR),IJLBPEOL CHECK FOR END OF LIST
0019DE 4780 82BE            019CE  2514+         BZ    IJLST460 IF OFF, CHECK NEXT
0019E2 9640 4004      00004        2515+         OI    IJLCCWCF,X'40' DO CHAIN COMMAND
0019E6 47F0 8BFA            0230A  2516+         B     IJLNTRY0 RE-EXECUTE CCW

0019EA                             2518+IJLIP05  EQU   * CDC PRESENT
0019EA 9215 1018      00018        2519+         MVI   IJLLCBSW,IJLMSCDC PUT CHANNEL DATA CHECK CODE IN LCB
0019EE 9180 F0BC      00EE4        2520+         TM    IJLPRGSW,IJLBCNCL CANCEL=YES
0019F2 4780 8A4A            0215A  2521+         BZ    IJLERXT1 COMPLETION WITH KNOWN I/O ERROR
0019F6 9610 1010      00010        2522+         OI    IJLLCBFL,IJLLCBCN SET CANCEL FLAG IN LCB
0019FA 47F0 8A4A            0215A  2523+         B     IJLERXT1
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   60


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0019FE                             2525+IJLIP12E EQU   * SHOULD NOT OCCUR
0019FE 9216 1018      00018        2526+         MVI   IJLLCBSW,IJLMSSNO PUT SHOULD NOT OCCUR CODE IN LCB
001A02 9640 C01D      0001D        2527+         OI    IJLDEEI,B'01000000' POST SHOULD NOT OCCUR ERROR BIT
001A06 47F0 8A4A            0215A  2528+         B     IJLERXT1

001A0A                             2530+IJLIP13  EQU   * RETRY AT INITIAL SELECTION
001A0A D100 8C55 1016 02365 00016  2531+         MVN   IJLDIGIT,IJLLCBAR EXTRACT ERP COUNTER
001A10 9502 8C55      02365        2532+         CLI   IJLDIGIT,X'02' RETRY COUNT EQUAL 2
001A14 47B0 80D0            017E0  2533+         BNL   IJLIP02A
001A18 1B55                        2534+         SR    IJLWKRGO,IJLWKRGO
001A1A 4350 1016            00016  2535+         IC    IJLWKRGO,IJLLCBAR GET RETRY COUNT PLUS OTHER DATA
001A1E 4155 0001            00001  2536+         LA    IJLWKRGO,1(IJLWKRGO) UPDATE RETRY COUNT
001A22 4250 1016            00016  2537+         STC   IJLWKRGO,IJLLCBAR
001A26 47F0 8BFA            0230A  2538+         B     IJLNTRY0

001A2A                             2540+IJLIP13E EQU   * ISSUANCE OF SENSE COMMAND
001A2A D207 1020 F040 00020 00E68  2541+         MVC   IJLLCBC0,IJLSNSCW SHIFT STD. SENSE CCW TO USER LCB
001A30 4150 1020            00020  2542+         LA    IJLWKRGO,IJLLCBC0 PICK UP ADDRESS OF EXTRA CCW
001A34 5050 1008            00008  2543+         ST    IJLWKRGO,IJLLCBCA-1 STORE IT IN CCB
001A38 4150 C010            00010  2544+         LA    IJLWKRGO,IJLDESN0 GET ADDRESS OF SENSE FIELD
001A3C 5050 8C50            02360  2545+         ST    IJLWKRGO,IJLFWWB1 HOLD IT IN TEMP
001A40 D202 1021 8C51 00021 02361  2546+         MVC   IJLLCBC0+1(3),IJLFWWB1+1 MOVE IT TO SENSE
001A46 D206 1019 0041 00019 00041  2547+         MVC   IJLLCBSW+1(7),IJLCSWCA CSW INFO TO SAVE AREA
001A4C 47F0 8B04            02214  2548+         B     IJLPOST

001A50                             2550+IJLIP14  EQU   * CC PRESENT
001A50 9217 1018      00018        2551+         MVI   IJLLCBSW,IJLMSCHC PUT CHAINING CHECK CODE IN LCB
001A54 9502 4000      00000        2552+         CLI   IJLCCWCC,X'02' LAST COMMAND READ
001A58 4780 8A4A            0215A  2553+         BE    IJLERXT1
001A5C 47F0 82EE            019FE  2554+         B     IJLIP12E

001A60                             2556+IJLIP15  EQU   * PROGRAM CHECK OR PROTECTION CHECK PRESENT
001A60 9120 0045      00045        2557+         TM    IJLCSWS1,X'20' IS PROGRAM CHECK PRESENT
001A64 4710 8360            01A70  2558+         BO    IJLIP15D
001A68 9219 1018      00018        2559+         MVI   IJLLCBSW,IJLMSPTC PUT PROTECTION CHECK CODE IN LCB
001A6C 47F0 8364            01A74  2560+         B     IJLIP15E

001A70 9218 1018      00018        2562+IJLIP15D MVI   IJLLCBSW,IJLMSPRC PUT PROGRAM CHECK CODE IN LCB
001A74                             2563+IJLIP15E EQU   *
001A74 9180 F0BC      00EE4        2564+         TM    IJLPRGSW,IJLBCNCL CANCEL=YES
001A78 4780 8A4A            0215A  2565+         BZ    IJLERXT1
001A7C 9610 1010      00010        2566+         OI    IJLLCBFL,IJLLCBCN SET CANCEL FLAG IN LCB
001A80 47F0 8A4A            0215A  2567+         B     IJLERXT1

001A84                             2569+IJLIP17  EQU   * UE PRESENT
001A84 9543 D014      00014        2570+         CLI   IJLDTFTU,X'40'+IJLC2848 CU=2848
001A88 4780 82EE            019FE  2571+         BE    IJLIP12E
001A8C 9502 4000      00000        2572+         CLI   IJLCCWCC,X'02' LAST COMMAND READ
001A90 4780 8398            01AA8  2573+         BE    IJLIP17B
001A94 9501 4000      00000        2574+         CLI   IJLCCWCC,X'01' LAST COMMAND WRITE
001A98 4780 84DC            01BEC  2575+         BE    IJLERUNE 3-3
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   61


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001A9C 9509 4000      00000        2576+         CLI   IJLCCWCC,X'09' IS COMMAND = POLL                     3-3
001AA0 4780 84DC            01BEC  2577+         BE    IJLERUNE 3-3
001AA4 47F0 82EE            019FE  2578+         B     IJLIP12E 3-3

001AA8                             2580+IJLIP17B EQU   *
001AA8 D501 8C88 0044 02398 00044  2581+         CLC   =XL2'0D00',IJLCSWS0 IS STATUS CE, DE, UE
001AAE 4780 83B0            01AC0  2582+         BE    IJLIP17X
001AB2 D501 8C8A 0044 0239A 00044  2583+         CLC   =XL2'0D40',IJLCSWS0 IS STATUS CE,DE, UE, IL
001AB8 4780 83D8            01AE8  2584+         BE    IJLIP17Y
001ABC 47F0 82EE            019FE  2585+         B     IJLIP12E

001AC0                             2587+IJLIP17X EQU   * CE,DE,UE
001AC0 9506 4005      00005        2588+         CLI   IJLCCWTC,IJLTRRWA READ RESPONSE TO WRITE ADDR CHARS
001AC4 4780 8AD0            021E0  2589+         BE    IJLCNONP GO POST NON-PRODUCTIVE OPERATION
001AC8 9505 4005      00005        2590+         CLI   IJLCCWTC,IJLTRRWP READ RESPONSE TO WRITE POLL CHARS
001ACC 4780 8AD8            021E8  2591+         BE    IJLCNOER
001AD0 9520 4005      00005        2592+         CLI   IJLCCWTC,IJLTRRWT READ RESPONSE TO WRITE TEXT
001AD4 4770 83E0            01AF0  2593+         BNE   IJLIP17C IF NOT, KEEP CHECKING
001AD8 9180 D003      00003        2594+         TM    IJLDTFFE+1,IJLBTSTC 2740 W. STATION CONTROL?         3-5
001ADC 4780 8AC4            021D4  2595+         BZ    IJLCUKER IF NOT, POST COMPLETION WITH ERROR          3-5
001AE0 9226 1018      00018        2596+         MVI   IJLLCBSW,IJLMSHBO ELSE STORE MSG CODE FOR HDW BF OFL
001AE4 47F0 8A4A            0215A  2597+         B     IJLERXT1 GO POST INFO & WRITE MESSAGE

001AE8                             2599+IJLIP17Y EQU   * CE,DE,UE,IL
001AE8 9505 4005      00005        2600+         CLI   IJLCCWTC,IJLTRRWP READ RESPONSE TO WRITE POLL CHARS
001AEC 4780 8408            01B18  2601+         BE    IJLIP17Z
001AF0                             2602+IJLIP17C EQU   *
001AF0 9511 4005      00005        2603+         CLI   IJLCCWTC,IJLTRTWT READ-TEXT/WRITE-TEXT
001AF4 4780 8404            01B14  2604+         BE    IJLIP17A
001AF8 9522 4005      00005        2605+         CLI   IJLCCWTC,IJLTRDSK IS OPERATION READ SKIP
001AFC 4780 8AD8            021E8  2606+         BE    IJLCNOER IF SO,POST NORMAL COMPLETION
001B00 9503 D00C      0000C        2607+         CLI   IJLDTFDV,IJLD2848 DEVICE=2848
001B04 4770 82EE            019FE  2608+         BNE   IJLIP12E
001B08 9520 4005      00005        2609+         CLI   IJLCCWTC,IJLTRRWT TP-CODE READ RESP TO WRITE TEXT
001B0C 4770 82EE            019FE  2610+         BNE   IJLIP12E GO POST SHOULD NOT OCCUR
001B10 47F0 8AC8            021D8  2611+         B     IJLCKIOE GO POST I/O ERROR

001B14                             2613+IJLIP17A EQU   * READ-TEXT/WRITE-TEXT
001B14 47F0 8AD8            021E8  2614+         B     IJLCNOER

001B18                             2616+IJLIP17Z EQU   * READ RESPONSE TO WRITE POLLING CHARACTERS
001B18 4B40 8C80            02390  2617+         SH    IJLWKRGE,=H'8' BACK UP TO PRECEDING CCW
001B1C 9503 4005      00005        2618+         CLI   IJLCCWTC,IJLTWPAC CHECK FOR POLLING CCW
001B20 4780 8418            01B28  2619+         BE    *+8
001B24 4B40 8C80            02390  2620+         SH    IJLWKRGE,=H'8' ELSE BACK UP ONE MORE CCW
001B28 4850 4006            00006  2621+         LH    IJLWKRGO,IJLCCWDC PICK UP POLL CHAR COUNT

                                   2623+* THE NEXT THREE INSTRUCTIONS DYNAMICALLY CREATE THE DISPLACEMENT
                                   2624+* FIELD OF THREE TM INSTRUCTIONS

001B2C 4250 842F            01B3F  2626+         STC   IJLWKRGO,IJLDTM06+3 STORE COUNT AS TM DISPL
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   62


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001B30 4250 8437            01B47  2627+         STC   IJLWKRGO,IJLDTM07+3 STORE COUNT AS TM DISPL
001B34 4250 8461            01B71  2628+         STC   IJLWKRGO,IJLDTM08+3 STORE COUNT AS TM DISPL
001B38 58E0 C024            00024  2629+         L     IJLPLPTR,IJLDEPP-1 LOAD POINTER TO FAILED POLL
001B3C                             2630+IJLST510 EQU   *

                                   2632+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

001B3C 9180 E000      00000        2634+IJLDTM06 TM    *-*(IJLPLPTR),IJLBPEOL CHECK FOR END OF LIST
001B40 4780 845A            01B6A  2635+         BZ    IJLST511 IF EOL OFF, GO CHECK NEXT ENTRY

                                   2637+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

001B44 9120 E000      00000        2639+IJLDTM07 TM    *-*(IJLPLPTR),IJLBWRAP ELSE CHECK FOR WRAP LIST
001B48 4780 8490            01BA0  2640+         BZ    IJLST513 IF WRAP OFF, GO TO COMPLETION
001B4C 9104 F0BC      00EE4        2641+         TM    IJLPRGSW,IJLBWLAS TEST FOR WRAP LOOP
001B50 4710 849E            01BAE  2642+         BO    IJLST514 IF ON, WE HAVE WRAPPED AT LEAST ONCE
001B54 9604 F0BC      00EE4        2643+         OI    IJLPRGSW,IJLBWLAS SET SWITCH TO CATCH IT NEXT TIME
001B58 41E5 E001            00001  2644+         LA    IJLPLPTR,1(IJLWKRGO,IJLPLPTR) POINT TO FORMAT CE
001B5C D201 8C58 E000 02368 00000  2645+         MVC   IJLHWWB1,0(IJLPLPTR) MOVE FORMAT TO WORK AREA
001B62 4BE0 8C58            02368  2646+         SH    IJLPLPTR,IJLHWWB1 BACK UP POINTER TO TOP OF LIST
001B66 47F0 845E            01B6E  2647+         B     IJLST512 GO CHECK FOR SKIP

001B6A                             2649+IJLST511 EQU   * NOT END OF LIST
001B6A 41E5 E001            00001  2650+         LA    IJLPLPTR,1(IJLWKRGO,IJLPLPTR) POINT TO NEXT LIST ENTR
001B6E                             2651+IJLST512 EQU   *

                                   2653+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

001B6E 9140 E000      00000        2655+IJLDTM08 TM    *-*(IJLPLPTR),IJLBSKIP CHECK FOR SKIP FLAG
001B72 4710 842C            01B3C  2656+         BO    IJLST510 IF ON, CHECK FOR EOL
001B76 9110 C018      00018        2657+         TM    IJLDEOF2,IJLBSTOP TEST STOP FLAG
001B7A 4710 849E            01BAE  2658+         BO    IJLST514 IF ON, SAVE PTR AND COMPLETE
001B7E 50E0 C014            00014  2659+         ST    IJLPLPTR,IJLDELEA-1 ELSE STORE PTR REG IN ENTRY
001B82 50E0 C024            00024  2660+         ST    IJLPLPTR,IJLDEPP-1 SAVE POLL POINTER
001B86 D202 4001 C025 00001 00025  2661+         MVC   IJLCCWDA,IJLDEPP SET CCW DATA ADDRESS
001B8C 9503 D00C      0000C        2662+         CLI   IJLDTFDV,IJLD2848 IS DEVICE 2848
001B90 4780 8488            01B98  2663+         BE    *+8 IF YES BRANCH
001B94 5040 1008            00008  2664+         ST    IJLWKRGE,IJLLCBCA-1 SET CCB CHAN PROG ADDRESS
001B98 94FB F0BC      00EE4        2665+         NI    IJLPRGSW,X'FF'-IJLBWLAS TURN OFF WRAP-LOOP CATCHER
001B9C 47F0 8BFA            0230A  2666+         B     IJLNTRY0 RESTART THE POLL

001BA0                             2668+IJLST513 EQU   *
001BA0 41E5 E001            00001  2669+         LA    IJLPLPTR,1(IJLWKRGO,IJLPLPTR) POINT TO FORMAT CELL
001BA4 D201 8C58 E000 02368 00000  2670+         MVC   IJLHWWB1,0(IJLPLPTR) MOVE FORMAT TO WORK AREA
001BAA 4BE0 8C58            02368  2671+         SH    IJLPLPTR,IJLHWWB1 BACK UP POINTER TO TOP OF LIST
001BAE                             2672+IJLST514 EQU   *
001BAE 50E0 C024            00024  2673+         ST    IJLPLPTR,IJLDEPP-1 STORE POINTER REG IN POLL PT
001BB2 94FB F0BC      00EE4        2674+         NI    IJLPRGSW,X'FF'-IJLBWLAS TURN OFF WRAP-LOOP CATCHER
001BB6 47F0 8AD0            021E0  2675+         B     IJLCNONP GO POST NON-PRODUCTIVE OPERATION
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   63


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   2678+********       3272/3277  APPENDAGE       **************************3-A

001BBA                             2680+IJLI3277 EQU   * 3-A
001BBA 58B0 8C6C            0237C  2681+         L     IJL277RG,=A(IJL277IP) 3277 APPENDAGE ADDRESS        3-A
001BBE 05EB                        2682+         BALR  IJLLNKRG,IJL277RG GO TO L3277 APPENDAGE              3-A
001BC0 47F0 8AD0            021E0  2683+         B     IJLCNONP POST NON-PRODUCTIVE OPERATION    3-A
001BC4 47F0 8BFA            0230A  2684+         B     IJLNTRY0 RETRY RETURN                     3-A
001BC8 47F0 8BCE            022DE  2685+         B     IJLNTRY4 POST RETURN TO SUPERVISOR        3-A
001BCC 47F0 8AD8            021E8  2686+         B     IJLCNOER POST NORMAL COMPLETION           3-A
001BD0 47F0 8094            017A4  2687+         B     IJL2260E CHECK OTHER CONDITIONS           3-A
001BD4 47F0 8B04            02214  2688+         B     IJLPOST POST EXIT                        3-A
001BD8 47F0 8B24            02234  2689+         B     IJLXCLDE PREPOSTED COMPLETION             3-A
001BDC 47F0 8A32            02142  2690+         B     IJLPSNO POST SHOULD NOT OCCUR            3-A
001BE0 47F0 8A68            02178  2691+         B     IJLERXT3 PRINT I/O ERROR MESSAGE          3-A
001BE4 47F0 8A3E            0214E  2692+         B     IJLERXT2 PRINT ERROR ON ERP MESSAGE       3-A
001BE8 47F0 8A4A            0215A  2693+         B     IJLERXT1 GO POST I/O ERROR                3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   64


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001BEC                             2695+IJLERUNE EQU   *
001BEC 9104 D015      00015        2696+         TM    IJLDTFF2,B'00000100' ERP REQUESTED IN DTF?
001BF0 4780 8AC4            021D4  2697+         BZ    IJLCUKER
001BF4 9503 4005      00005        2698+         CLI   IJLCCWTC,X'03' TP-CODE=03
001BF8 47D0 84F4            01C04  2699+         BNH   IJLERN1
001BFC 9521 4005      00005        2700+         CLI   IJLCCWTC,IJLTRSET RESET TP-CODE PRESENT
001C00 4770 853A            01C4A  2701+         BNE   IJLERPST
001C04                             2702+IJLERN1  EQU   *
001C04 D206 1019 0041 00019 00041  2703+         MVC   IJLLCBSW+1(7),IJLCSWCA PUT STATUS IN DTFBT
001C0A D100 8C55 1016 02365 00016  2704+         MVN   IJLDIGIT,IJLLCBAR SET UP RETRY COUNT IN ORDER TO TE
001C10 9502 8C55      02365        2705+         CLI   IJLDIGIT,X'02' RETRY COUNT EQUAL 2
001C14 47B0 853A            01C4A  2706+         BNL   IJLERPST
001C18 4150 1020            00020  2707+         LA    IJLWKRGO,IJLLCBC0 PICK UP ADDRESS OF CCW
001C1C 5050 1008            00008  2708+         ST    IJLWKRGO,IJLLCBCA-1 STORE ADDRESS INTO CCB
001C20 D202 100D 8C9B 0000D 023AB  2709+         MVC   IJLLCBAA,=AL3(IJLBTEIH) GET ERP APPENDAGE ADDRESS
001C26 9505 D00C      0000C        2710+         CLI   IJLDTFDV,IJLD115A IS DEVICE 115A
001C2A 4780 8526            01C36  2711+         BE    IJLWRBRK
001C2E 9504 D00C      0000C        2712+         CLI   IJLDTFDV,IJLD83B3 IS DEVICE 83B3
001C32 4770 8530            01C40  2713+         BNE   IJLRDSKP
001C36                             2714+IJLWRBRK EQU   *
001C36 D207 1020 8C38 00020 02348  2715+         MVC   IJLLCBC0,IJLBRKCW SHIFT BREAK CCW TO USER CCW
001C3C 47F0 8BFA            0230A  2716+         B     IJLNTRY0

001C40 D207 1020 8C08 00020 02318  2718+IJLRDSKP MVC   IJLLCBC0,IJLSKPCW MOVE READ SKIP CCW TO USER CCW
001C46 47F0 8BFA            0230A  2719+         B     IJLNTRY0

001C4A                             2721+IJLERPST EQU   *
001C4A 921A 1018      00018        2722+         MVI   IJLLCBSW,IJLMSUNE PUT UNIT EXECPTION CODE IN LCB
001C4E 47F0 8A4A            0215A  2723+         B     IJLERXT1

001C52                             2725+IJLSENS2 EQU   * ERROR RECOVERY SENSE ANALYSIS
001C52 9104 D015      00015        2726+         TM    IJLDTFF2,B'00000100' WAS ERP REQUESTED
001C56 4780 860E            01D1E  2727+         BZ    IJLNOERP
001C5A 9509 C005      00005        2728+         CLI   IJLDEOTC,IJLOTCRS OP-TYPE READ SKIP
001C5E 4780 860E            01D1E  2729+         BE    IJLNOERP
001C62 9500 C005      00005        2730+         CLI   IJLDEOTC,IJLOTCWB OP-TYPE WRITE BREAK
001C66 4780 860E            01D1E  2731+         BE    IJLNOERP
001C6A 9508 C014      00014        2732+         CLI   IJLDELCC,X'08' CHECK FOR ERROR ON TIC
001C6E 4780 8A32            02142  2733+         BE    IJLPSNO IF TIC, SHOULD NOT OCCUR
001C72 9110 C010      00010        2734+         TM    IJLDESN0,IJLEQCHK IS ERROR = EQUIPMENT CHECK
001C76 4710 85A6            01CB6  2735+         BO    IJLEREQC IF SO, POST EQUIPMENT CHECK ERROR
001C7A 9102 C010      00010        2736+         TM    IJLDESN0,IJLLSTDT IS ERROR=LOST DATA
001C7E 4710 85AE            01CBE  2737+         BO    IJLERLST IF SO, MAKE FURTHER CHECKS
001C82 9101 C010      00010        2738+         TM    IJLDESN0,IJLTMOUT IS ERROR = TIME OUT
001C86 4710 86E4            01DF4  2739+         BO    IJLTIOUT IF SO, MAKE FURTHER CHECKS
001C8A 9140 C010      00010        2740+         TM    IJLDESN0,IJLINTVR IS ERROR = INTERVENTION REQUIRED
001C8E 4710 8616            01D26  2741+         BO    IJLERINT IF SO, POST ERROR
001C92 9120 C010      00010        2742+         TM    IJLDESN0,IJLBOCHK IS ERROR = BUS OUT CHECK
001C96 4710 863C            01D4C  2743+         BO    IJLERBOC IF SO, MAKE FURTHER CHECKS
001C9A 9108 C010      00010        2744+         TM    IJLDESN0,IJLDTACK IS ERROR = DATA CHECK
001C9E 4710 87A4            01EB4  2745+         BO    IJLERDTC IF SO, MAKE FURTHER CHECKS
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   65


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001CA2 9104 C010      00010        2746+         TM    IJLDESN0,IJLOVRRN IS ERROR = OVERRUN
001CA6 4710 86C0            01DD0  2747+         BO    IJLEROVR IF SO, MAKE FURTHER CHECKS
001CAA 9180 C010      00010        2748+         TM    IJLDESN0,IJLCOMRJ IS ERROR = COMMAND REJECT
001CAE 4710 86D0            01DE0  2749+         BO    IJLERCMR IF SO, POST COMMAND REJECT
001CB2 47F0 8A32            02142  2750+         B     IJLPSNO

001CB6                             2752+IJLEREQC EQU   * EQUIPMENT CHECK ERROR
001CB6 921B 1018      00018        2753+         MVI   IJLLCBSW,IJLMSEQC PUT EQUIPMENT CHECK CODE IN LCB
001CBA 47F0 8A68            02178  2754+         B     IJLERXT3 POST ERROR & PRINT MESSAGE

001CBE                             2756+IJLERLST EQU   * LOST DATA ERROR
001CBE 9502 C014      00014        2757+         CLI   IJLDELCC,X'02' LAST USER COMMAND READ
001CC2 4770 85F0            01D00  2758+         BNE   IJLERDL IF SO, RETRY DISABLE-DIAL SEQUENCE
001CC6 9511 C01C      0001C        2759+         CLI   IJLDETPC,IJLTRTWT READ TEXT NON-BUFFER
001CCA 4780 85C6            01CD6  2760+         BE    IJLCKRSC
001CCE 9512 C01C      0001C        2761+         CLI   IJLDETPC,IJLTRBWB READ TEXT IN BUFFER
001CD2 4770 8A32            02142  2762+         BNE   IJLPSNO GO TO SHOULD NOT OCCUR ROUTINE
001CD6                             2763+IJLCKRSC EQU   *
001CD6 D501 8C8C C012 0239C 00012  2764+         CLC   =XL2'0000',IJLDERC IS RESIDUAL COUNT = 0
001CDC 4770 8A32            02142  2765+         BNE   IJLPSNO
001CE0                             2766+IJLERSKP EQU   *
001CE0 921C 1018      00018        2767+         MVI   IJLLCBSW,IJLMSLSD PUT LOST DATA CODE IN LCB
001CE4                             2768+IJLISUSK EQU   * 3-5
001CE4 D207 1020 8C08 00020 02318  2769+         MVC   IJLLCBC0,IJLSKPCW MOVE READ SKIP CCW TO ERP CCW AREA
001CEA 9230 1025      00025        2770+         MVI   IJLLCBC0+5,X'30' SET ERP READ SKIP TP CODE
001CEE                             2771+IJLSTART EQU   * 3-5
001CEE D201 0044 8C82 00044 02392  2772+         MVC   IJLCSWS0(2),=XL2'0C00' SET CE,DE                    3-9
001CF4 4140 1020            00020  2773+         LA    IJLWKRGE,IJLLCBC0 ADDRESS OF READ SKIP
001CF8 5040 1008            00008  2774+         ST    IJLWKRGE,IJLLCBCA-1 ADDRESS OF CCB
001CFC 47F0 8BFA            0230A  2775+         B     IJLNTRY0

001D00                             2777+IJLERDL  EQU   * ERROR ON DIAL
001D00 9529 C014      00014        2778+         CLI   IJLDELCC,X'29' IS COMMAND CODE = DIAL
001D04 4770 8A32            02142  2779+         BNE   IJLPSNO
001D08 D100 8C55 1016 02365 00016  2780+         MVN   IJLDIGIT,IJLLCBAR SET UP RETRY COUNT FOR TEST
001D0E 9502 8C55      02365        2781+         CLI   IJLDIGIT,X'02' RETRY COUNT = 2
001D12 4740 870A            01E1A  2782+         BL    IJLRTYDL IF NOT, RETRY DIAL
001D16 921C 1018      00018        2783+         MVI   IJLLCBSW,IJLMSLSD PUT LOST DATA CODE IN LCB
001D1A 47F0 8A68            02178  2784+         B     IJLERXT3 POST ERROR & PRINT MESSAGE

001D1E                             2786+IJLNOERP EQU   *
001D1E 9241 C000      00000        2787+         MVI   IJLDEECB,IJLCIOER POST COMPLETION WITH ERROR
001D22 47F0 8B24            02234  2788+         B     IJLXCLDE

001D26                             2790+IJLERINT EQU   * INTERVENTION REQUIRED ERROR
001D26 9502 C014      00014        2791+         CLI   IJLDELCC,X'02' COMMAND CODE = READ?                  3-5
001D2A 4770 8634            01D44  2792+         BNE   IJLIRMSG IF NOT, PRINT IR MSG                        3-5
001D2E 9505 C01C      0001C        2793+         CLI   IJLDETPC,X'05' TP CODE = READ RESPONSE?              3-5
001D32 4770 8634            01D44  2794+         BNE   IJLIRMSG IF NOT, PRINT IR MSG                        3-5
001D36 D100 8C55 1016 02365 00016  2795+         MVN   IJLDIGIT,IJLLCBAR SET UP RETRY COUNT FOR TEST        3-5
001D3C 9502 8C55      02365        2796+         CLI   IJLDIGIT,X'02' RETRY COUNT = 2?                      3-5
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   66


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001D40 4740 870A            01E1A  2797+         BL    IJLRTYDL IF LOW, RETRY                               3-5
001D44                             2798+IJLIRMSG EQU   * 3-5
001D44 921E 1018      00018        2799+         MVI   IJLLCBSW,IJLMSNVR SET INTERVENTION REQ'D MESSAGE
001D48 47F0 8A68            02178  2800+         B     IJLERXT3 POST ERROR & PRINT MESSAGE
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   67


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001D4C                             2802+IJLERBOC EQU   * BUS OUT CHECK ERROR
001D4C 9501 C014      00014        2803+         CLI   IJLDELCC,X'01' IS COMMAND = WRITE
001D50 4780 8686            01D96  2804+         BE    IJLBOWR BUS-OUT ON WRITE
001D54 9529 C014      00014        2805+         CLI   IJLDELCC,X'29' IS COMMAND CODE = DIAL
001D58 4770 8A32            02142  2806+         BNE   IJLPSNO
001D5C D100 8C55 1016 02365 00016  2807+         MVN   IJLDIGIT,IJLLCBAR SET UP RETRY COUNT FOR TEST
001D62 9502 8C55      02365        2808+         CLI   IJLDIGIT,X'02' IS RETRY COUNT = 2
001D66 47B0 86B8            01DC8  2809+         BNL   IJLPBOCK
001D6A                             2810+IJLCJRTY EQU   * 3-5
001D6A 5840 1018            00018  2811+         L     IJLWKRGE,IJLLCBSW GET CCW+8
001D6E 4144 0000            00000  2812+         LA    IJLWKRGE,0(IJLWKRGE) CLEAR MSG CODE FROM REGISTER
001D72 4B40 8C80            02390  2813+         SH    IJLWKRGE,=H'8' BACK UP TO CCW IN ERROR
001D76 5040 1008            00008  2814+         ST    IJLWKRGE,IJLLCBCA-1 PUT CCW ADDRESS IN CCB
001D7A                             2815+IJLRTYTO EQU   *
001D7A D707 1020 1020 00020 00020  2816+         XC    IJLLCBC0,IJLLCBC0 CLEAR ERP CCW AREA
001D80                             2817+IJLRTYT1 EQU   *
001D80 4350 1016            00016  2818+         IC    IJLWKRGO,IJLLCBAR RETRIEVE RETRY COUNT
001D84 4155 0001            00001  2819+         LA    IJLWKRGO,1(IJLWKRGO) INCREMENT RETRY COUNT
001D88 4250 1016            00016  2820+         STC   IJLWKRGO,IJLLCBAR RETURN TO LCB
001D8C D201 0044 8C82 00044 02392  2821+         MVC   IJLCSWS0(2),=XL2'0C00' SET CE,DE                    3-9
001D92 47F0 8BFA            0230A  2822+         B     IJLNTRY0

001D96                             2824+IJLBOWR  EQU   * BUS-OUT ON A WRITE
001D96 D100 8C55 1016 02365 00016  2825+         MVN   IJLDIGIT,IJLLCBAR SET UP RETRY COUNT
001D9C 9502 8C55      02365        2826+         CLI   IJLDIGIT,X'02' HAS RETRY COUNT REACHED 2
001DA0 47B0 86B8            01DC8  2827+         BNL   IJLPBOCK IF SO, GO POST BUS-OUT
001DA4 5840 1018            00018  2828+         L     IJLWKRGE,IJLLCBSW GET ADDR OF FAILING CCW            3-5
001DA8 4B40 8C80            02390  2829+         SH    IJLWKRGE,=H'8' POINT TO FAILING CCW                  3-5
001DAC 5040 8C50            02360  2830+         ST    IJLWKRGE,IJLFWWB1 HOLD CCW ADDRESS
001DB0 D202 C001 8C51 00001 02361  2831+         MVC   IJLDEECB+1(3),IJLFWWB1+1 SAVE ADDRESS IN ECB
001DB6 D207 1020 8C08 00020 02318  2832+         MVC   IJLLCBC0,IJLSKPCW MOVE READ-SKIP CCW TO ERP AREA
001DBC 9230 1025      00025        2833+         MVI   IJLLCBC0+5,X'30' SET TP CODE TO X'30'
001DC0 921F 1018      00018        2834+         MVI   IJLLCBSW,IJLMSBOC PUT BUS-OUT MESSAGE CODE
001DC4 47F0 8670            01D80  2835+         B     IJLRTYT1 GO UPDATE RETURN COUNT

001DC8                             2837+IJLPBOCK EQU   *
001DC8 921F 1018      00018        2838+         MVI   IJLLCBSW,IJLMSBOC PUT BUS OUT CHECK CODE IN LCB
001DCC 47F0 8A68            02178  2839+         B     IJLERXT3

001DD0                             2841+IJLEROVR EQU   * OVERRUN ERROR
001DD0 9502 C014      00014        2842+         CLI   IJLDELCC,X'02' IS COMMAND CODE = READ
001DD4 4770 8A32            02142  2843+         BNE   IJLPSNO
001DD8 9221 1018      00018        2844+         MVI   IJLLCBSW,IJLMSOVR PUT OVERRUN CODE IN LCB
001DDC 47F0 8A68            02178  2845+         B     IJLERXT3 POST ERROR & PRINT MESSAGE

001DE0                             2847+IJLERCMR EQU   * COMMAND REJECT ERROR
001DE0 9222 1018      00018        2848+         MVI   IJLLCBSW,IJLMSCRJ PUT COMMAND REJECT CODE IN LCB
001DE4 9180 F0BC      00EE4        2849+         TM    IJLPRGSW,IJLBCNCL IS CANCEL SPECIFIED
001DE8 4780 8A68            02178  2850+         BZ    IJLERXT3 IF NOT, DO NOT CANCEL
001DEC 9610 1010      00010        2851+         OI    IJLLCBFL,IJLLCBCN TURN ON CANCEL FLAG
001DF0 47F0 8A68            02178  2852+         B     IJLERXT3 POST ERROR & PRINT MESSAGE
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   68


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001DF4                             2854+IJLTIOUT EQU   * TIME OUT ERROR
001DF4 9529 C014      00014        2855+         CLI   IJLDELCC,X'29' IS COMMAND CODE = DIAL
001DF8 4780 86FC            01E0C  2856+         BE    IJLPOINT IF SO, POINT TO BEGINNING OF CHANNEL PROG
001DFC 9506 C014      00014        2857+         CLI   IJLDELCC,X'06' IS COMMAND CODE = PREPARE
001E00 4780 86FC            01E0C  2858+         BE    IJLPOINT
001E04 952F C014      00014        2859+         CLI   IJLDELCC,X'2F' IS COMMAND CODE = DISABLE
001E08 4770 871E            01E2E  2860+         BNE   IJLTIOD1

001E0C                             2862+IJLPOINT EQU   * POINT TO BEGINNING OF CHANNEL PROGRAM
001E0C                             2863+IJLRDRPP EQU   *
001E0C                             2864+IJLRTYD1 EQU   * 3-5
001E0C D100 8C55 1016 02365 00016  2865+         MVN   IJLDIGIT,IJLLCBAR SET UP RETRY COUNT FOR TEST
001E12 9502 8C55      02365        2866+         CLI   IJLDIGIT,X'02' RETRY COUNT = 2
001E16 47B0 8716            01E26  2867+         BNL   IJLPRTPT 3-5

001E1A                             2869+IJLRTYDL EQU   * 3-5
001E1A 4140 1028            00028  2870+         LA    IJLWKRGE,IJLLCBC1 POINT TO 1ST USER CCW              3-5
001E1E 5040 1008            00008  2871+         ST    IJLWKRGE,IJLLCBCA-1 ADDRESS TO LCB                   3-5
001E22 47F0 866A            01D7A  2872+         B     IJLRTYTO GO RETRY                                    3-5
001E26                             2873+IJLPRTPT EQU   *
001E26 921D 1018      00018        2874+         MVI   IJLLCBSW,IJLMSTOT PUT TIME OUT CODE IN LCB
001E2A 47F0 8A68            02178  2875+         B     IJLERXT3 POST ERROR & PRINT MESSAGE

001E2E                             2877+IJLTIOD1 EQU   *
001E2E 9502 C014      00014        2878+         CLI   IJLDELCC,X'02' IS COMMAND CODE = READ
001E32 4780 874C            01E5C  2879+         BE    IJLRDCHK IF SO, CHECK FURTHER
001E36 9501 C014      00014        2880+         CLI   IJLDELCC,X'01' IS COMMAND = WRITE                    3-3
001E3A 4780 873A            01E4A  2881+         BE    IJLTOWRT 3-3
001E3E 9527 C014      00014        2882+         CLI   IJLDELCC,X'27' IS COMMAND CODE = ENABLE
001E42 4770 8A32            02142  2883+         BNE   IJLPSNO IF NOT, POST SHOULD NOT OCCUR
001E46 47F0 86FC            01E0C  2884+         B     IJLPOINT RESTART CHANNEL PROGRAM

001E4A                             2886+IJLTOWRT EQU   * 3-3
001E4A 9503 D00C      0000C        2887+         CLI   IJLDTFDV,IJLD2848 IS DEVICE = 2260R                  3-3
001E4E 4770 8A32            02142  2888+         BNE   IJLPSNO IF NOT, POST SNO                             3-3
001E52 D20F 1020 8C40 00020 02350  2889+         MVC   IJLLCBC0(16),IJLB2848 SET UP 2848 RESET SEQUENCE     3-3
001E58 47F0 85DE            01CEE  2890+         B     IJLSTART 3-5
001E5C                             2891+IJLRDCHK EQU   *
001E5C 9511 C01C      0001C        2892+         CLI   IJLDETPC,X'11' IS TP CODE = READ TEXT
001E60 4780 8716            01E26  2893+         BE    IJLPRTPT IF SO, POST ERROR & PRINT MESSAGE
001E64 9512 C01C      0001C        2894+         CLI   IJLDETPC,X'12' IS TP CODE = READ TEXT IN BUFFERS
001E68 4780 8716            01E26  2895+         BE    IJLPRTPT
001E6C 9505 C01C      0001C        2896+         CLI   IJLDETPC,X'05' IS TP CODE READ RESPONSE TO POLLING  3-7
001E70 4770 8770            01E80  2897+         BNE   IJLRDRPA
001E74 9108 C004      00004        2898+         TM    IJLDEOF1,IJLAUTPL AUTOPOLL USED                      3-5
001E78 4780 86FC            01E0C  2899+         BZ    IJLPOINT 3-7
001E7C 47F0 8716            01E26  2900+         B     IJLPRTPT

001E80                             2902+IJLRDRPA EQU   *
001E80 9506 C01C      0001C        2903+         CLI   IJLDETPC,X'06' IS TP CODE = READ RESPONSE TO ADDRESSI
001E84 4780 878C            01E9C  2904+         BE    IJLTP021
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   69


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001E88 9507 C01C      0001C        2905+         CLI   IJLDETPC,X'07' IS TP CODE=READ RESPONSE TO TWX ID
001E8C 4780 86FC            01E0C  2906+         BE    IJLPOINT
001E90 9520 C01C      0001C        2907+         CLI   IJLDETPC,X'20' IS TP CODE = READ RESPONSE TO TEXT
001E94 4770 8A32            02142  2908+         BNE   IJLPSNO IF NOT, POST SHOULD NOT OCCUR
001E98 47F0 8716            01E26  2909+         B     IJLPRTPT

001E9C                             2911+IJLTP021 EQU   *
001E9C 9505 D00C      0000C        2912+         CLI   IJLDTFDV,IJLD115A DEVICE 115A
001EA0 4780 879C            01EAC  2913+         BE    IJLTONPO
001EA4 9504 D00C      0000C        2914+         CLI   IJLDTFDV,IJLD83B3 DEVICE 83B3
001EA8 4770 8716            01E26  2915+         BNE   IJLPRTPT
001EAC                             2916+IJLTONPO EQU   *
001EAC 9254 C000      00000        2917+         MVI   IJLDEECB,IJLCNPOP POST NON-PRODUCTIVE OPERATION
001EB0 47F0 8B24            02234  2918+         B     IJLXCLDE

001EB4                             2920+IJLERDTC EQU   * ERROR = DATA CHECK
001EB4 9502 C014      00014        2921+         CLI   IJLDELCC,X'02' IS COMMAND CODE = READ
001EB8 4780 87D4            01EE4  2922+         BE    IJLDTCRD IF SO, MAKE FURTHER CHECKS
001EBC 9501 C014      00014        2923+         CLI   IJLDELCC,X'01' IS COMMAND CODE = WRITE
001EC0 4770 8A32            02142  2924+         BNE   IJLPSNO IF NOT, POST SNO                             3-5

001EC4                             2926+IJLDTCWT EQU   * DATA CHECK ON WRITE
001EC4 9503 C01C      0001C        2927+         CLI   IJLDETPC,X'03' IS TP CODE = WRITE ADDR CHARS
001EC8 4780 87C4            01ED4  2928+         BE    IJLTWXCK IF SO, CHECK FOR TWX TERMINAL
001ECC 9504 C01C      0001C        2929+         CLI   IJLDETPC,X'04' IS TP CODE = WRITE SPACE CHARACTER
001ED0 4770 892C            0203C  2930+         BNE   IJLPDTCK IF NOT, POST ERROR & PRINT MESSAGE
001ED4                             2931+IJLTWXCK EQU   *
001ED4 9509 D00C      0000C        2932+         CLI   IJLDTFDV,IJLDTW33 IS TERMINAL A TWX
001ED8 47B0 892C            0203C  2933+         BNL   IJLPDTCK IF SO, POST ERROR & PRINT MESSAGE
001EDC 9220 1018      00018        2934+         MVI   IJLLCBSW,IJLMSDTC SET UP DATA CHECK MESSAGE CODE
001EE0 47F0 85D4            01CE4  2935+         B     IJLISUSK SET UP READ SKIP & ISSUE                    3-5

001EE4                             2937+IJLDTCRD EQU   * DATA CHECK ON A READ COMMAND
001EE4 9505 C01C      0001C        2938+         CLI   IJLDETPC,X'05' IS TP = READ RESPONSE TO POLLING
001EE8 4780 899E            020AE  2939+         BE    IJLTP02S IF SO, SEARCH FOR TP CODE OF X'02'
001EEC 9506 C01C      0001C        2940+         CLI   IJLDETPC,X'06' IS TP = READ RESPONSE TO ADDRESSING
001EF0 4780 89C0            020D0  2941+         BE    IJLTP03S IF SO, SEARCH FOR TP CODE OF X'03'
001EF4 9507 C01C      0001C        2942+         CLI   IJLDETPC,X'07' IS TP = READ TWX ID RESPONSE
001EF8 4770 87F8            01F08  2943+         BNE   IJLCK11T IF NOT, CHECK FOR TP CODE OF X'11'
001EFC 4140 1028            00028  2944+IJLRTYDC LA    IJLWKRGE,IJLLCBC1 ADDRESS OF 1ST USER CCB
001F00 5040 1008            00008  2945+         ST    IJLWKRGE,IJLLCBCA-1 CCW ADDRESS TO LCB
001F04 47F0 89E2            020F2  2946+         B     IJLRTY

001F08                             2948+IJLCK11T EQU   *
001F08 9511 C01C      0001C        2949+         CLI   IJLDETPC,X'11' IS TP = READ TEXT
001F0C 4780 8808            01F18  2950+         BE    IJLDTC11
001F10 9512 C01C      0001C        2951+         CLI   IJLDETPC,X'12' IS TP = READ TEXT IN BUFFERS
001F14 4770 8934            02044  2952+         BNE   IJLTP20C IF NOT, CHECK FOR TP = READ RESPONSE TO TEXT

001F18                             2954+IJLDTC11 EQU   *
001F18 9102 D015      00015        2955+         TM    IJLDTFF2,B'00000010' IS READ RETRY SPECIFIED
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   70


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001F1C 4780 892C            0203C  2956+         BZ    IJLPDTCK IF NOT, POST ERROR
001F20                             2957+IJLCKTRM EQU   * 3-5
001F20 9501 D00C      0000C        2958+         CLI   IJLDTFDV,IJLD1030 IS DEVICE = 1030
001F24 4780 8820            01F30  2959+         BE    IJLSTCRN
001F28 9502 D00C      0000C        2960+         CLI   IJLDTFDV,IJLD1060 IS DEVICE = 1060
001F2C 4770 8842            01F52  2961+         BNE   IJLCKDTH IF NOT, CHECK FOR OTHER TERMINAL TYPES
001F30                             2962+IJLSTCRN EQU   *
001F30 9520 C01C      0001C        2963+         CLI   IJLDETPC,X'20' TP CODE = READ RESPONSE               3-5
001F34 4780 87EC            01EFC  2964+         BE    IJLRTYDC 3-5
001F38 D207 1020 8C30 00020 02340  2965+         MVC   IJLLCBC0,IJLWNACK SET UP WRITE CIRCLE N CCW
001F3E 9221 1025      00025        2966+         MVI   IJLLCBC0+5,X'21' SET TP CODE
001F42 9280 1024      00024        2967+         MVI   IJLLCBC0+4,X'80' CHANGE CC TO CD IN CCW              3-1
001F46 4140 1020            00020  2968+         LA    IJLWKRGE,IJLLCBC0 ADDRESS OF ERP CCW
001F4A 5040 1008            00008  2969+         ST    IJLWKRGE,IJLLCBCA-1 ADDRESS TO LCB
001F4E 47F0 89E2            020F2  2970+         B     IJLRTY

001F52                             2972+IJLCKDTH EQU   *
001F52 9507 D00C      0000C        2973+         CLI   IJLDTFDV,IJLD1050 IS DEVICE = 1050
001F56 4780 885A            01F6A  2974+         BE    IJLBKONE
001F5A 9503 D00C      0000C        2975+         CLI   IJLDTFDV,IJLD2848 IS DEVICE = 2848
001F5E 4780 885A            01F6A  2976+         BE    IJLBKONE
001F62 9120 D003      00003        2977+         TM    IJLDTFFE+1,B'00100000' DOES 2740 HAVE CHECKING
001F66 4780 892C            0203C  2978+         BZ    IJLPDTCK IF NOT, POST DATA CHECK ERROR
001F6A                             2979+IJLBKONE EQU   *
001F6A 9512 C01C      0001C        2980+         CLI   IJLDETPC,X'12' READ IN BUFFERS                       3-5
001F6E 4780 8914            02024  2981+         BE    IJLSRCH IF SO, FIND TIC COMMAND                      3-5
001F72 9520 C01C      0001C        2982+         CLI   IJLDETPC,X'20' READ RESPONSE TO TEXT WRITE           3-5
001F76 4780 8948            02058  2983+         BE    IJLCKBUF IF SO, CHECK FOR BUFFERS                    3-5
001F7A 5840 1018            00018  2984+         L     IJLWKRGE,IJLLCBSW ADDRESS OF FAILING CCW
001F7E 4144 0000            00000  2985+         LA    IJLWKRGE,0(IJLWKRGE)
001F82 4B40 8C8E            0239E  2986+         SH    IJLWKRGE,=H'16' BACK UP TO PRECEDING CCW
001F86                             2987+IJLRTN1  EQU   *
001F86 9503 D00C      0000C        2988+         CLI   IJLDTFDV,IJLD2848 IS DEVICE = 2848
001F8A 4770 88B8            01FC8  2989+         BNE   IJLNT284
001F8E 9501 C005      00005        2990+         CLI   IJLDEOTC,IJLOTCRI READ INITIAL                       3-5
001F92 4780 888A            01F9A  2991+         BE    *+8 3-5
001F96 4B40 8C80            02390  2992+         SH    IJLWKRGE,=H'8' BACK UP ONE MORE CCW                  3-5
001F9A 9521 4005      00005        2993+         CLI   5(IJLWKRGE),X'21' RETRY ALREADY SET UP?              3-5
001F9E 4780 88B0            01FC0  2994+         BE    IJLRRTY IF SO, GO DO                                 3-5
001FA2 D207 4000 8C20 00000 02330  2995+         MVC   0(8,IJLWKRGE),IJLNACKC SET UP 2848 NACK
001FA8 9221 4005      00005        2996+         MVI   5(IJLWKRGE),X'21' RESET TP CODE
001FAC 9501 C005      00005        2997+         CLI   IJLDEOTC,IJLOTCRI IS OPTYPE READ INITIAL?           3-B
001FB0 4770 88B0            01FC0  2998+         BNE   *+16 NO, BRANCH AROUND                  3-B
001FB4 D201 400E C006 0000E 00006  2999+         MVC   IJLKNT14(IJLKONT2,IJLWKRGE),IJLDELGT MOVE INTO CCW  3-B
                                   3000+*                                                  LENGTH MINUS TWO 3-B
001FBA D202 4009 C00D 00009 0000D  3001+         MVC   IJLKONT9(IJLKONT3,IJLWKRGE),IJLDEIOA MOVE INTO CCW 3-B
                                   3002+*                                                   IOAREA PLUS TWO 3-B
001FC0                             3003+IJLRRTY  EQU   *
001FC0 5040 1008            00008  3004+         ST    IJLWKRGE,IJLLCBCA-1 ADDRESS TO LCB
001FC4 47F0 89E2            020F2  3005+         B     IJLRTY
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   71


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

001FC8                             3007+IJLNT284 EQU   *
001FC8 9521 4005      00005        3008+         CLI   5(IJLWKRGE),X'21' RETRY ALREADY SET UP?              3-5
001FCC 4780 88B0            01FC0  3009+         BE    IJLRRTY IF SO, GO DO                                 3-5
001FD0 D207 4000 8C30 00000 02340  3010+         MVC   0(8,IJLWKRGE),IJLWNACK SET UP WRITE CIRCLE N
001FD6 9221 4005      00005        3011+         MVI   5(IJLWKRGE),X'21' SET UP RESET TP CODE
001FDA 9505 C005      00005        3012+         CLI   IJLDEOTC,IJLOTCRV OPERATION = READ TV                3-5
001FDE 4780 88DA            01FEA  3013+         BE    *+12 3-5
001FE2 9501 C005      00005        3014+         CLI   IJLDEOTC,IJLOTCRI READ INITIAL                       3-5
001FE6 4770 88B0            01FC0  3015+         BNE   IJLRRTY 3-5
001FEA 4124 0008            00008  3016+         LA    IJLWKRG3,8(IJLWKRGE) POINT TO TEXT CCW               3-5
001FEE 9508 D00C      0000C        3017+         CLI   IJLDTFDV,IJLD2740 DEVICE = 2740                      3-5
001FF2 4770 88EE            01FFE  3018+         BNE   *+12 IF NOT, KEEP GOING                              3-5
001FF6 9180 D003      00003        3019+         TM    IJLDTFFE+1,IJLBTSTC STATION CONTROL PRESENT          3-5
001FFA 4780 88B0            01FC0  3020+         BZ    IJLRRTY IF NOT, GO RETRY                             3-5
001FFE 9102 C004      00004        3021+         TM    IJLDEOF1,IJLBARAS AREA ='S'                          3-6
002002 4780 88FA            0200A  3022+         BZ    *+8 3-6
002006 5820 C00C            0000C  3023+         L     IJLWKRG3,IJLDEIOA-1 GET BUFFER CCW ADDRESS           3-5
00200A 5852 0000            00000  3024+         L     IJLWKRGO,0(IJLWKRG3) GET ADDRESS IN CCW              3-5
00200E 0650                        3025+         BCTR  IJLWKRGO,0 SUBTRACT ONE                              3-5
002010 5052 0000            00000  3026+         ST    IJLWKRGO,0(IJLWKRG3) PUT BACK IN CCW                 3-5
002014 4852 0006            00006  3027+         LH    IJLWKRGO,6(IJLWKRG3) GET COUNT IN CCW                3-5
002018 4155 0001            00001  3028+         LA    IJLWKRGO,1(IJLWKRGO) ADD ONE                         3-5
00201C 4052 0006            00006  3029+         STH   IJLWKRGO,6(IJLWKRG3) PUT BACK IN CCW                 3-5
002020 47F0 88B0            01FC0  3030+         B     IJLRRTY

002024                             3032+IJLSRCH  EQU   *
002024 4140 1028            00028  3033+         LA    IJLWKRGE,IJLLCBC1 ADDRESS OF 1ST USRR CCW
002028                             3034+IJLFNTIC EQU   *
002028 4144 0008            00008  3035+         LA    IJLWKRGE,8(IJLWKRGE)
00202C 9508 4000      00000        3036+         CLI   0(IJLWKRGE),X'08' IS COMMAND CODE TIC
002030 4770 8918            02028  3037+         BNE   IJLFNTIC
002034 4B40 8C80            02390  3038+         SH    IJLWKRGE,=H'8' BACK UP ONE CCW                       3-5
002038 47F0 8876            01F86  3039+         B     IJLRTN1

00203C                             3041+IJLPDTCK EQU   *
00203C 9220 1018      00018        3042+         MVI   IJLLCBSW,IJLMSDTC SET DATA CHECK MESSAGE CODE IN LCB
002040 47F0 8A68            02178  3043+         B     IJLERXT3

002044                             3045+IJLTP20C EQU   *
002044 9520 C01C      0001C        3046+         CLI   IJLDETPC,X'20' IS TP = READ RESPONSE TO TEXT
002048 4770 8A32            02142  3047+         BNE   IJLPSNO
00204C 9101 D015      00015        3048+         TM    IJLDTFF2,X'01' IS WRITE RETRY SPECIFIED
002050 4780 892C            0203C  3049+         BZ    IJLPDTCK IF NOT, POST ERROR & PRINT MESSAGE
002054 47F0 8810            01F20  3050+         B     IJLCKTRM 3-5
002058                             3051+IJLCKBUF EQU   *
002058 5840 1018            00018  3052+         L     IJLWKRGE,IJLLCBSW ADDRESS OF FAILING CCW
00205C 9516 C005      00005        3053+         CLI   IJLDEOTC,IJLOTWVO IS IT A WRITE TVO?                 3-5
002060 4780 897C            0208C  3054+         BE    IJLOIURT BRANCH ON YES                               3-5
002064 9512 C005      00005        3055+         CLI   IJLDEOTC,IJLOTWIO IS IT A WRITE TIO?                 3-5
002068 4780 897C            0208C  3056+         BE    IJLOIURT BRANCH ON YES                               3-5
00206C 9514 C005      00005        3057+         CLI   IJLDEOTC,IJLOTWCO IS IT A WRITE TCO?                 3-5
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   72


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

002070 4780 897C            0208C  3058+         BE    IJLOIURT BRANCH ON YES                               3-5
002074 4B40 8C8E            0239E  3059+         SH    IJLWKRGE,=H'16' POINT TO WRITE TEXT CCW
002078 9508 4000      00000        3060+         CLI   0(IJLWKRGE),X'08' IS COMMAND CODE = TIC
00207C 4770 89DE            020EE  3061+         BNE   IJLSTORE
002080 5844 0000            00000  3062+         L     IJLWKRGE,0(IJLWKRGE) ADDRESS IN TIC COMMAND
002084 4144 0000            00000  3063+         LA    IJLWKRGE,0(IJLWKRGE) CLEAR HIGH ORDER BYTE
002088 47F0 89DE            020EE  3064+         B     IJLSTORE

00208C                             3066+IJLOIURT EQU   * RETRY FOR 2760 OPTICAL IMAGE UNIT                  3-5

00208C 4B40 8C90            023A0  3068+         SH    IJLWKRGE,=H'32' POINT TO WRITE EOA CCW               3-5
002090 9502 4007      00007        3069+         CLI   IJLCCWDC+1,X'02' CHECK WRITE EOA CCW FOR COUNT OF 2  3-5
002094 4780 89DE            020EE  3070+         BE    IJLSTORE COUNT AND DATA ADDRESS ARE ALREADY UPDATED  3-5
002098 5850 4000            00000  3071+         L     IJLWKRGO,IJLCCWDA-1 3-5
00209C 5A50 8C70            02380  3072+         A     IJLWKRGO,=F'01' POINT PAST CIRCLE D                  3-5
0020A0 5050 4000            00000  3073+         ST    IJLWKRGO,IJLCCWDA-1 3-5
0020A4 D201 4006 8C92 00006 023A2  3074+         MVC   IJLCCWDC,=H'02' POST BYTE COUNT OF 2 IN WRITE EOA CCW3-5
0020AA 47F0 89DE            020EE  3075+         B     IJLSTORE CONTINUE WITH REGULAR RETRY                 3-5

0020AE                             3077+IJLTP02S EQU   * SEARCH FOR TP OF X'02'
0020AE 5840 1018            00018  3078+         L     IJLWKRGE,IJLLCBSW ADDRESS OF FAILING CCW
0020B2 4144 0000            00000  3079+         LA    IJLWKRGE,0(IJLWKRGE)
0020B6 4150 1020            00020  3080+         LA    IJLWKRGO,IJLLCBC0 ADDRESS OF ERP CCW
0020BA                             3081+IJLDECR1 EQU   *
0020BA 4B40 8C80            02390  3082+         SH    IJLWKRGE,=H'8' POINT TO PRECEDING CCW
0020BE 1945                        3083+         CR    IJLWKRGE,IJLWKRGO IS THIS THE 1ST CCW
0020C0 4780 8A32            02142  3084+         BE    IJLPSNO IF SO, POST SHOULD NOT OCCUR ERROR
0020C4 9502 4005      00005        3085+         CLI   5(IJLWKRGE),X'02' IS TP CODE = X'02'
0020C8 4770 89AA            020BA  3086+         BNE   IJLDECR1 IF NOT, BACK TO PRECEEDING CCW
0020CC 47F0 89DE            020EE  3087+         B     IJLSTORE 3-5

0020D0                             3089+IJLTP03S EQU   *
0020D0 5840 1018            00018  3090+         L     IJLWKRGE,IJLLCBSW ADDRESS OF FAILING CCW
0020D4 4144 0000            00000  3091+         LA    IJLWKRGE,0(IJLWKRGE)
0020D8 4150 1020            00020  3092+         LA    IJLWKRGO,IJLLCBC0 ADDRESS OF ERP CCW
0020DC                             3093+IJLDERC2 EQU   *
0020DC 4B40 8C80            02390  3094+         SH    IJLWKRGE,=H'8' POINT TO PRECEDING CCW
0020E0 1945                        3095+         CR    IJLWKRGE,IJLWKRGO IS THIS THE 1ST CCW
0020E2 4780 8A32            02142  3096+         BE    IJLPSNO
0020E6 9503 4005      00005        3097+         CLI   5(IJLWKRGE),X'03' IS TP = X'03'
0020EA 4770 89CC            020DC  3098+         BNE   IJLDERC2 IF NOT, BACK TO PRECEEDING CCW
0020EE                             3099+IJLSTORE EQU   * 3-5
0020EE 5040 1008            00008  3100+         ST    IJLWKRGE,IJLLCBCA-1
0020F2                             3101+IJLRTY   EQU   *
0020F2 D100 8C55 1016 02365 00016  3102+         MVN   IJLDIGIT,IJLLCBAR RETRIEVE RETRY COUNT
0020F8 9502 8C55      02365        3103+         CLI   IJLDIGIT,X'02' IS RETRY COUNT = 2
0020FC 4780 8A14            02124  3104+         BE    IJLCK284
002100 4350 1016            00016  3105+         IC    IJLWKRGO,IJLLCBAR GET RETRY COUNT
002104 4155 0001            00001  3106+         LA    IJLWKRGO,1(IJLWKRGO) ADD ONE
002108 4250 1016            00016  3107+         STC   IJLWKRGO,IJLLCBAR
00210C D201 0044 8C82 00044 02392  3108+         MVC   IJLCSWS0(2),=XL2'0C00' SET CE,DE                    3-9
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   73


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

002112 9504 1020      00020        3109+         CLI   IJLLCBC0,X'04' IS SENSE COMMAND SET UP               3-1
002116 4770 8BFA            0230A  3110+         BNE   IJLNTRY0 IF NOT, GO EXECUTE                          3-1
00211A D707 1020 1020 00020 00020  3111+         XC    IJLLCBC0,IJLLCBC0 CLEAR ERP CCW
002120 47F0 8BFA            0230A  3112+         B     IJLNTRY0

002124 9503 D00C      0000C        3114+IJLCK284 CLI   IJLDTFDV,IJLD2848 IS DEVICE = 2848
002128 4770 892C            0203C  3115+         BNE   IJLPDTCK
00212C D207 1020 8C10 00020 02320  3116+         MVC   IJLLCBC0,IJLDIAGW SET UP DIAGNOSTIC WRITE
002132 D207 1028 8C18 00028 02328  3117+         MVC   IJLLCBC1,IJLDIAGR SET UP DIAGNOSTIC READ
002138 D202 100D 8C9E 0000D 023AE  3118+         MVC   IJLLCBAA,=AL3(IJLBTDIA) DIAGNOSTIC WRITE/READ APPENDA
00213E 47F0 85DE            01CEE  3119+         B     IJLSTART 3-5

002142                             3121+IJLPSNO  EQU   *
002142 9216 1018      00018        3122+         MVI   IJLLCBSW,IJLMSSNO PUT SHOULD NOT OCCUR CODE IN LCB
002146 9640 C01D      0001D        3123+         OI    IJLDEEI,B'01000000' POST SHOULD NOT OCCUR BIT
00214A 47F0 8A68            02178  3124+         B     IJLERXT3
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   74


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00214E                             3127+IJLERXT2 EQU   *
00214E 9214 1018      00018        3128+         MVI   IJLLCBSW,IJLMSERP PUT ERROR IN ERP CODE IN LCB
002152 9620 C01D      0001D        3129+         OI    IJLDEEI,B'00100000' POST ERROR IN ERP FLAG
002156 47F0 8A68            02178  3130+         B     IJLERXT3

00215A                             3132+IJLERXT1 EQU   *
00215A D206 1019 0041 00019 00041  3133+         MVC   IJLLCBSW+1(7),IJLCSWCA PUT STATUS IN DTFBT
002160 D201 C012 0046 00012 00046  3134+         MVC   IJLDERC,IJLCSWBC POST CSW RESIDUAL COUNT TO DECB
002166 D200 C014 4000 00014 00000  3135+         MVC   IJLDELCC,IJLCCWCC POST LAST COMMAND CODE TO DECB
00216C D201 C01E 0044 0001E 00044  3136+         MVC   IJLDEST0(2),IJLCSWS0 POST STATUS TO DECB
002172 D200 C01C 4005 0001C 00005  3137+         MVC   IJLDETPC,IJLCCWTC PUT LAST TP CODE IN DECB
002178                             3138+IJLERXT3 EQU   *
002178 9241 C000      00000        3139+         MVI   IJLDEECB,IJLCIOER SET COMPLETION WITH I/O ERROR
00217C                             3140+IJLZZZER EQU   * 3-A
00217C 9547 D014      00014        3141+         CLI   IJLDTFTU,IJLKTX40+IJLC3272 CU = 3272              3-A
002180 4770 8A8E            0219E  3142+         BNE   IJLCEDE1 NO, DON'T SET 3277L FLAGS             3-A
002184 9610 D004      00004        3143+         OI    IJLDTFDX,IJLBNORS SET NO RESETPL FLAG                3-3
002188 94B7 1010      00010        3144+         NI    IJLLCBFL,X'FF'-IJLBRSA-IJLBQUED TURN OFF READ STD, Q
00218C 947F 1015      00015        3145+         NI    IJLLCBAK,X'FF'-IJLZPBSY TURN OFF PRINTER BUSY FLAG  3-A
002190 9101 C005      00005        3146+         TM    IJLDEOTC,IJLBRDOP CHECK FOR READ OPTYPE
002194 4780 8A8E            0219E  3147+         BZ    IJLCEDE1 IF NOT READ, SKIP NEXT INSTRUCTION
002198 D200 C027 1014 00027 00014  3148+         MVC   IJLDEPP+2(1),IJLLCBRL ELSE POST ERROR RLN TO POLL
00219E                             3149+IJLCEDE1 EQU   *
00219E D201 0044 8C94 00044 023A4  3150+         MVC   IJLCSWS0(2),=XL2'0E00' SET STATUS TO CE,DE,UC
0021A4 9680 F062      00E8A        3151+         OI    IJLMWAIT+2,IJLBTRFC POST MASTER WAIT
0021A8 47F0 8BCE            022DE  3152+         B     IJLNTRY4
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   75


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0021AC                             3154+IJLIP18  EQU   * IL PRESENT
0021AC 9505 4005      00005        3155+         CLI   IJLCCWTC,IJLTRRWP READ RESPONSE TO WRITE POLL CHARS
0021B0 4780 8408            01B18  3156+         BE    IJLIP17Z
0021B4 47F0 8AC4            021D4  3157+         B     IJLCUKER COMPLETE WITH UNKNOWN ERROR
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   76


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   3160+******** COMPLETION LOGIC ********

0021B8                             3162+IJLCCANC EQU   * COMPLETION WITH CANCEL CONDITION OUTSTANDING
0021B8 9258 C000      00000        3163+         MVI   IJLDEECB,IJLCCNCL POST CANCEL CODE TO ECB
0021BC 50D0 8C50            02360  3164+         ST    IJLDTFRG,IJLFWWB1 HOLD DTFBT ADDRESS
0021C0 D202 F0B9 8C51 00EE1 02361  3165+         MVC   IJLCNBLK+1(3),IJLFWWB1+1 MOVE IT TO CANCEL BLOCK
0021C6 50C0 8C50            02360  3166+         ST    IJLDECBR,IJLFWWB1 HOLD DECB ADDRESS
0021CA D202 F0BD 8C51 00EE5 02361  3167+         MVC   IJLCNBLK+5(3),IJLFWWB1+1 MOVE IT TO CANCEL BLOCK
0021D0 47F0 8B04            02214  3168+         B     IJLPOST GO FINISH DECB POSTING

0021D4                             3170+IJLCUKER EQU   * COMPLETION WITH UNKNOWN ERROR
0021D4 9640 C01D      0001D        3171+         OI    IJLDEEI,B'01000000' SET UNKNOWN ERROR BIT
0021D8                             3172+IJLCKIOE EQU   * COMPLETION WITH KNOWN I/O ERROR
0021D8 9241 C000      00000        3173+         MVI   IJLDEECB,IJLCIOER SET COMPLETION WITH I/O ERROR
0021DC 47F0 8B04            02214  3174+         B     IJLPOST GO FINISH DECB POSTING

0021E0                             3176+IJLCNONP EQU   * ENTRY FOR POSTING NON-PRODUCTIVE OPERATION
0021E0 9254 C000      00000        3177+         MVI   IJLDEECB,IJLCNPOP POST CODE FOR NON-PRODUCTIVE
0021E4 47F0 8B04            02214  3178+         B     IJLPOST GO TO FINISH POSTING

0021E8                             3180+IJLCNOER EQU   * COMPLETION WITHOUT ERROR, NO FURTHER EXECUTION
0021E8 927F C000      00000        3181+         MVI   IJLDEECB,IJLCNORM POST NORMAL COMPLETION TO ECB
0021EC 9508 D00C      0000C        3182+         CLI   IJLDTFDV,IJLD2740 DEVICE = 2740                      3-5
0021F0 4770 8AFA            0220A  3183+         BNE   IJLDONOT 3-5
0021F4 9180 D003      00003        3184+         TM    IJLDTFFE+1,IJLBTSTC STATION CONTROL PRESENT          3-5
0021F8 4780 8AFA            0220A  3185+         BZ    IJLDONOT 3-5
0021FC 9502 C005      00005        3186+         CLI   IJLDEOTC,IJLOTCWI WRITE INITIAL                      3-5
002200 4770 8AFA            0220A  3187+         BNE   IJLDONOT NO.CLEAR SENSE AND ERROR FIELDS             3-B
002204 5820 8C74            02384  3188+         L     IJLWKRG3,=A(IJLRSPCK) GET 2740 ROUTINE ADDRESS       3-B
002208 05E2                        3189+         BALR  IJLLNKRG,IJLWKRG3 GO TO 2740 ROUTINE                 3-B
00220A                             3190+IJLDONOT EQU   * 3-5
00220A D701 C010 C010 00010 00010  3191+IJLCLEAR XC    IJLDESN0(2),IJLDESN0 ZERO OUT SENSE AND ERROR
002210 9200 C01D      0001D        3192+         MVI   IJLDEEI,X'00' CLEAR ERROR INFORMATION FIELD

002214                             3194+IJLPOST  EQU   * ENTRY POINT FOR ECB ALREADY POSTED
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   77


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

002214                             3196+IJLPOST3 EQU   * 3-2
002214 D201 C012 0046 00012 00046  3197+         MVC   IJLDERC,IJLCSWBC MOVE RESIDUAL COUNT TO DECB
00221A D200 C014 4000 00014 00000  3198+         MVC   IJLDELCC,IJLCCWCC MOVE LAST COMMAND CODE TO DECB
002220 D200 C01C 4005 0001C 00005  3199+         MVC   IJLDETPC,IJLCCWTC PUT LAST TP-CODE IN DECB
002226 D201 C01E 0044 0001E 00044  3200+         MVC   IJLDEST0(2),IJLCSWS0 POST STATUS TO DECB
00222C 9504 1020      00020        3201+         CLI   IJLLCBC0,X'04' IS A SENSE COMMAND SET UP IN LCB
002230 4780 8BFA            0230A  3202+         BE    IJLNTRY0 IF SO, GO FOR RE-EXECUTION OF CCB

002234                             3204+IJLXCLDE EQU   * ENTRY FOR CLEAR OF DECB ADDRESS WHEN PRE-POSTED COM
002234 D702 1011 1011 00011 00011  3205+         XC    IJLLCBDE,IJLLCBDE CLEAR OLD DECB ADDRESS IN LC
00223A 9547 D014      00014        3206+         CLI   IJLDTFTU,IJLKTX40+IJLC3272 CU = 3272              3-A
00223E 4770 8BAA            022BA  3207+         BNE   IJLCEDE NO, DON'T CLEAR DTFBT HEADER          3-A
002242 9480 D004      00004        3208+         NI    IJLDTFDX,IJLZ3RFT TURN OFF ALL FLAGS EXCEPT TERMTST  3-A
002246 D702 D005 D005 00005 00005  3209+         XC    IJLDTFDX+IJLKONT1(IJLKONT3),IJLDTFDX+IJLKONT1 3-A
                                   3210+*                                  CLEAR DTFBT HEADER               3-A
00224C 94B7 1010      00010        3211+         NI    IJLLCBFL,X'FF'-IJLBRSA-IJLBQUED TURN OFF READ STD, Q
002250 9101 C005      00005        3212+         TM    IJLDEOTC,IJLBRDOP CHECK FOR A READ
002254 4780 8B4E            0225E  3213+         BZ    IJLZDENQ IF NOT READ, DON'T POST RLN               3-A
002258 D200 C027 1014 00027 00014  3214+         MVC   IJLDEPP+2(1),IJLLCBRL POST RLN TO POLLING POINTER
00225E                             3215+IJLZDENQ EQU   * 3-A
00225E 9102 1010      00010        3216+         TM    IJLLCBFL,IJLBSKPP IS SKIP FLAG ON                  3-A
002262 4710 8BAA            022BA  3217+         BO    IJLCEDE YES, DON'T SET PCI STATUS             3-A
002266                             3218+IJLCDENQ EQU   * 3-7
002266 9140 D015      00015        3219+         TM    IJLDTFF2,IJLSDRF1 SDR THRESHOLD REACHED ?           3-B
00226A 47E0 8B68            02278  3220+         BNO   IJLSPCI NO, SET PCI STATUS               3-B
00226E D201 0044 8C5A 00044 0236A  3221+         MVC   IJLCSWS0(IJLKONT2),IJLSCEDE SET CE, DE STATUS        3-B
002274 47F0 8BCA            022DA  3222+         B     IJLNOMES PUT OUT SDR RECORD          3-B
002278                             3223+IJLSPCI  EQU   * 3-B
002278 D201 0044 8C96 00044 023A6  3224+         MVC   IJLCSWS0(2),=XL2'0080' SET STATUS TO PCI             3-7
00227E 9101 1010      00010        3225+         TM    IJLLCBFL,IJLB1053 PRINTER LCB                     3-A
002282 4710 8B7E            0228E  3226+         BO    IJLZDENW YES, POST PUB BUSY               3-A
002286 9684 3006      00006        3227+         OI    IJLKONT6(IJLPUBRG),IJLZPBSZ+IJLZPBDE POST BUSY AND  3-A
                                   3228+*                                       DE BITS IN PUB              3-A
00228A 47F0 8B82            02292  3229+         B     IJLZDENV CHECK FOR 3272 CU                3-A
00228E                             3230+IJLZDENW EQU   * 3-A
00228E 9680 3006      00006        3231+         OI    IJLKONT6(IJLPUBRG),IJLZPBSZ POST PUB BUSY            3-A
002292                             3232+IJLZDENV EQU   * 3-A
002292 9547 D014      00014        3233+         CLI   IJLDTFTU,IJLKTX40+IJLC3272 CU = 3272              3-A
002296 4770 8B92            022A2  3234+         BNE   IJLZDENY NO, DON'T CHECK FOR ATTN         3-A
00229A 9104 1010      00010        3235+         TM    IJLLCBFL,IJLBATTN ATTENTION POSTED            3-A
00229E 4710 8B96            022A6  3236+         BO    IJLZDENZ YES, SET Q FLAG                  3-A
0022A2                             3237+IJLZDENY EQU   * 3-A
0022A2 9608 1010      00010        3238+         OI    IJLLCBFL,IJLBQUED SET LCB QUEUED FLAG                3-7
0022A6                             3239+IJLZDENZ EQU   * 3-A
0022A6 50C0 8C50            02360  3240+         ST    IJLDECBR,IJLFWWB1 SAVE DECB ADDRESS                  3-7
0022AA D202 1011 8C51 00011 02361  3241+         MVC   IJLLCBDE(3),IJLFWWB1+1 PUT IN LCB                    3-7
0022B0 58A0 8C78            02388  3242+         L     IJLZWOR2,=A(IJLZ2NR2) GET OLTEP ADDRESS              3-B
0022B4 05EA                        3243+         BALR  IJLLNKRG,IJLZWOR2 GO TO OLTEP ROUTINE            3-B
0022B6 47F0 8BCA            022DA  3244+         B     IJLNOMES GO RETURN TO SUPERVISOR                    3-B

0022BA                             3246+IJLCEDE  EQU   *
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   78


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0022BA D201 0044 8C82 00044 02392  3247+         MVC   IJLCSWS0(2),=XL2'0C00' SET STATUS TO CE,DE FOR SPVSR
0022C0 947F 1018      00018        3248+         NI    IJLLCBSW,X'7F' TURN OFF SDR FLAG                     3-5
0022C4 9527 1018      00018        3249+         CLI   IJLLCBSW,IJLMSTRM 2740-M2 MSG SET UP                 3-5
0022C8 4740 8BCA            022DA  3250+         BL    IJLNOMES 3-5
0022CC 50C0 8C50            02360  3251+         ST    IJLDECBR,IJLFWWB1 PUT DECB ADDRESS IN SAVE CELL      3-5
0022D0 D202 1011 8C51 00011 02361  3252+         MVC   IJLLCBDE(3),IJLFWWB1+1 PUT ADDRESS IN LCB            3-5
0022D6 9602 0044      00044        3253+         OI    IJLCSWS0,X'02' SET UNIT CHECK                        3-5
0022DA                             3254+IJLNOMES EQU   * 3-5
0022DA 9680 F062      00E8A        3255+         OI    IJLMWAIT+2,IJLBTRFC POST MASTER WAIT

0022DE                             3257+IJLNTRY4 EQU   * RETURN FOR PASSING ERROR STATUS TO SUPERVISOR
0022DE 9102 0044      00044        3258+         TM    IJLCSWS0,X'02' UNIT CHECK SET                        3-5
0022E2 4780 8BEC            022FC  3259+         BZ    IJLNOERM 3-5
0022E6                             3260+IJLZERMG EQU   * 3-A
0022E6 94BF C000      00000        3261+         NI    IJLDEECB,X'FF'-IJLBECBC TURN OFF 'C' BIT FOR MSGWTR  3-6
0022EA 9200 F062      00E8A        3262+         MVI   IJLMWAIT+2,X'00' SET MWAIT TO ZERO                   3-5
0022EE 4140 F060            00E88  3263+         LA    IJLWKRGE,IJLMWAIT GET ADDRESS OF MASTER WAIT FIELD   3-5
0022F2 5040 8C50            02360  3264+         ST    IJLWKRGE,IJLFWWB1 PUT ADDRESS IN TEMP                3-5
0022F6 D202 C001 8C51 00001 02361  3265+         MVC   IJLDEECB+1(3),IJLFWWB1+1 PUT IN DECB                 3-5
0022FC                             3266+IJLNOERM EQU   * 3-5
0022FC 94DF F0BC      00EE4        3267+         NI    IJLPRGSW,X'FF'-IJLBDSAB RESET DISABLED SWITCH
002300 9820 80F4            01804  3268+         LM    2,0,IJLSVSUP
002304 4177 0004            00004  3269+         LA    IJLSPVRR,4(IJLSPVRR) BUMP RETURN ADDRESS BY 4
002308 07F7                        3270+         BR    IJLSPVRR RETURN TO SUPERVISOR           SWITCH

00230A                             3272+IJLNTRY0 EQU   * NO COMPLETION, FURTHER EXECUTION
00230A 94DF F0BC      00EE4        3273+         NI    IJLPRGSW,X'FF'-IJLBDSAB RESET DISABLED SWITCH
00230E 9820 80F4            01804  3274+         LM    2,0,IJLSVSUP
002312 07F7                        3275+         BR    IJLSPVRR RETURN TO SPVSR
002314 47F0 8AFA            0220A  3276+         B     IJLDONOT 3-5
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   79


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   3278+* CONSTANTS AND SAVE AREAS FOR APPENDAGE


002318 0200000030007FFF            3280+IJLSKPCW CCW   X'02',0,X'30',32767 READ SKIP CCW
002320 0500236E60000008            3281+IJLDIAGW CCW   X'05',IJLDIAMS,X'60',8 DIAGNOSTIC WRITE CCW
002328 0600236C00000002            3282+IJLDIAGR CCW   X'06',IJLDIAIN,X'00',2 DIAGNOSTIC READ CCW           3-4
002330 0100237660000001            3283+IJLNACKC CCW   X'01',IJLVNACK,X'60',1 2848 EOT
002338 0700000020000001            3284+IJLERASE CCW   X'07',0,X'20',1 WRITE ERASE CCW                     3-8
002340 0100237760000001            3285+IJLWNACK CCW   X'01',IJLONACK,X'60',1 WRITE CIRCLE N
002348 0D00000020000001            3286+IJLBRKCW CCW   X'0D',0,X'20',1 WRITE BREAK CCW
002350 42000001703003C0            3287+IJLB2848 DC    X'42000001703003C0' 2848 READ CLEAR                  3-3
002358 41000001203003E8            3288+         DC    X'41000001203003E8' 2848 BREAK                       3-3
002360 FFFFFFFF                    3289+IJLFWWB1 DC    F'-1' FULL WORD WORK AREA B1 FOR INTERRUPT HANDLER
002364 00                          3290+         DC    XL1'0' ALWAYS 0 AND PRECEDING IJLDIGIT
002365 00                          3291+IJLDIGIT DC    XL1'0' CELL FOR EXAMINING DIGIT (APPENDAGE)
002366 00                          3292+         DC    XL1'0' ALWAYS 0 AND PRECEDING IJLZONE
002367 00                          3293+IJLZONE  DC    XL1'0' CELL FOR EXAMINING ZONE
002368 FFFF                        3294+IJLHWWB1 DC    H'-1' HALF WORD WORK AREA B1 FOR INTERRUPT HANDLER
00236A 0C00                        3295+IJLSCEDE DC    X'0C00' CONSTANT USED TO SET CE, DE  STATUS         3-B
00236C FFFF                        3296+IJLDIAIN DC    H'-1' INPUT AREA FOR DIAGNOSTIC READ
00236E 02A1A2A3A4A5A603            3297+IJLDIAMS DC    X'02A1A2A3A4A5A603' DIAGNOSTIC WRITE MESSAGE
002376 15                          3298+IJLVNACK DC    X'15' 2848 NACK                                      3-9
002377 40                          3299+IJLONACK DC    X'40' CIRCLE N
002378                             3300+         LTORG  3-B
002378 00000E28                    3301                =A(IJLBTM)
00237C 000024E0                    3302                =A(IJL277IP)
002380 00000001                    3303                =F'01'
002384 00002490                    3304                =A(IJLRSPCK)
002388 000023B8                    3305                =A(IJLZ2NR2)
00238C 0000                        3306                =XL2'0'
00238E 7000                        3307                =XL2'7000'
002390 0008                        3308                =H'8'
002392 0C00                        3309                =XL2'0C00'
002394 0C40                        3310                =XL2'0C40'
002396 3E4C                        3311                =X'3E4C'
002398 0D00                        3312                =XL2'0D00'
00239A 0D40                        3313                =XL2'0D40'
00239C 0000                        3314                =XL2'0000'
00239E 0010                        3315                =H'16'
0023A0 0020                        3316                =H'32'
0023A2 0002                        3317                =H'02'
0023A4 0E00                        3318                =XL2'0E00'
0023A6 0080                        3319                =XL2'0080'
0023A8 000000                      3320                =XL3'0'
0023AB 002A18                      3321                =AL3(IJLBTEIH)
0023AE 002BC8                      3322                =AL3(IJLBTDIA)
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   80


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   3324+********* IJLZ2NR2-LOCAL 3277 OLTEP PROCESSING FOR *********        3-B
                                   3325+*********      COMPLETION LOGIC                    *********        3-B
0023B8                             3326+IJLZ2NR2 CSECT  3-B
0023B8                             3327+         USING IJLZ2NR2,IJLZWOR2 COVER THIS CSECT                   3-B
0023B8 9203 1030      00030        3328+         MVI   IJLLCBC1+IJLKONT8,IJLZNOPC MAKE 2ND CCW A NOP        3-B
0023BC 9101 1010      00010        3329+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER?              3-C
0023C0 4710 A010            023C8  3330+         BO    IJLZNWPR IF YES, LEAVE OP CODE AS IS                3-C
0023C4 5840 0014            00014  3331+         L     IJLWKRGE,IJLKNT20 GET ADDRESS OF                     3-B
0023C8                             3332+IJLZNWPR EQU   * 3-C
0023C8 4844 0084            00084  3333+         LH    IJLWKRGE,IJLKT132(IJLWKRGE) COMMUNICATION REGION     3-B
0023CC 9140 4035      00035        3334+         TM    IJLKNT53(IJLWKRGE),IJLKTX40 IS SUPVR MPS?            3-C
0023D0 47E0 8BCA            022DA  3335+         BNO   IJLNOMES IF NOT, SKIP FURTHER TESTS                 3-C
0023D4 4844 005A            0005A  3336+         LH    IJLWKRGE,IJLKNT90(IJLWKRGE) GET ADDR OF PIB TABLE    3-B
0023D8 4144 0010            00010  3337+         LA    IJLWKRGE,IJLKNT16(IJLWKRGE) POINT TO BG PIB          3-B
0023DC 4124 0010            00010  3338+         LA    IJLWKRG3,IJLKNT16(IJLWKRGE) POINT TO F2 PIB          3-B
0023E0 5822 0008            00008  3339+         L     IJLWKRG3,IJLKONT8(IJLWKRG3) GET ADDR OF ORIGIN       3-B
0023E4 4122 0000            00000  3340+         LA    IJLWKRG3,IJLKONT0(IJLWKRG3) OF F2 PARTITION          3-B
0023E8 4150 A000            023B8  3341+         LA    IJLWKRGO,IJLZ2NR2 GET OUR ADDRESS                    3-B
0023EC 1952                        3342+         CR    IJLWKRGO,IJLWKRG3 ARE WE IN BG PARTITION             3-B
0023EE 4740 A054            0240C  3343+         BL    IJLZFNDP YES,CHECK PUB OWNERSHIP                     3-B
0023F2 4144 0010            00010  3344+         LA    IJLWKRGE,IJLKNT16(IJLWKRGE) POINT TO F2 PIB          3-B
0023F6 4124 0010            00010  3345+         LA    IJLWKRG3,IJLKNT16(IJLWKRGE) POINT TO F1 PIB          3-B
0023FA 5822 0008            00008  3346+         L     IJLWKRG3,IJLKONT8(IJLWKRG3) GET ADDR OF ORIGIN       3-B
0023FE 4122 0000            00000  3347+         LA    IJLWKRG3,IJLKONT0(IJLWKRG3) OF F1 PARTITION          3-B
002402 1952                        3348+         CR    IJLWKRGO,IJLWKRG3 ARE WE IN F2 PARTITION             3-B
002404 4740 A054            0240C  3349+         BL    IJLZFNDP YES,CHECK PUB OWNERSHIP                     3-B
002408 4144 0010            00010  3350+         LA    IJLWKRGE,IJLKNT16(IJLWKRGE) POINT TO F1 PIB          3-B
00240C                             3351+IJLZFNDP EQU   * 3-B
00240C 4324 000C            0000C  3352+         IC    IJLWKRG3,IJLKNT12(IJLWKRGE) GET PIB ASSGN FLAGS      3-B
002410 5420 A0C8            02480  3353+         N     IJLWKRG3,IJLMASKZ TURN OFF ALL BUT LOW 3 BITS        3-B
002414 4420 A0C2            0247A  3354+         EX    IJLWKRG3,IJLZTOTS IS PUB OWNED THIS PARTITION        3-B
002418 4710 A0C0            02478  3355+         BO    IJLZ2NR3 YES.RETURN TO CALLER                        3-B
00241C 5840 0014            00014  3356+         L     IJLWKRGE,IJLKNT20 GET ADDRESS OF                     3-B
002420 4844 0084            00084  3357+         LH    IJLWKRGE,IJLKT132(IJLWKRGE) COMMUNICATION REGION     3-B
002424 4844 0062            00062  3358+         LH    IJLWKRGE,IJLKNT98(IJLWKRGE) GET ERROR BLOCK ADDRESS  3-B
002428 4844 0006            00006  3359+         LH    IJLWKRGE,IJLKONT6(IJLWKRGE) GET CHANQ TABLE ADDR     3-B
00242C 1B22                        3360+         SR    IJLWKRG3,IJLWKRG3 CLEAR WORK REG                     3-B
00242E 4323 0002            00002  3361+         IC    IJLWKRG3,IJLKONT2(IJLPUBRG) GET CHANQ INDEX PTR      3-B
002432 8920 0002            00002  3362+         SLL   IJLWKRG3,IJLKONT2 MULT INDEX BY 4                   3-B
002436 1A42                        3363+         AR    IJLWKRGE,IJLWKRG3 GET ADDR CHANQ ENTRY               3-B
002438 1B55                        3364+         SR    IJLWKRGO,IJLWKRGO CLEAR WORK REG                     3-B
00243A 4353 0002            00002  3365+         IC    IJLWKRGO,IJLKONT2(IJLPUBRG) SAVE CHANQ INDEX         3-B
00243E D200 3002 4000 00002 00000  3366+         MVC   IJLKONT2(IJLKONT1,IJLPUBRG),IJLKONT0(IJLWKRGE) MAKE  3-B
                                   3367+*                                   PUB INDEX POINTER FF            3-B
002444 4254 0000            00000  3368+         STC   IJLWKRGO,IJLKONT0(IJLWKRGE) MAKE CHAIN PT ITSELF     3-B
002448 947B 3006      00006        3369+         NI    IJLKONT6(IJLPUBRG),X'FF'-IJLZPBSZ-IJLZPBDE TURN      3-B
                                   3370+*                                  OFF PUB BUSY,DE BITS             3-B
00244C D201 0044 A0D0 00044 02488  3371+         MVC   IJLCSWS0(IJLKONT2),=XL2'0C00' SET CE,DE STATUS       3-B
                                   3372+*        THE FOLLOWING CODE PREVENTS $$BEOJ4 FROM EXECUTING A NEVER 3-B
                                   3373+*        ENDING 2 INSTRUCTION LOOP IF BTAM PROGRAM IS CANCELLED     3-B
                                   3374+********************************************************************3-B
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   81


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

002452 5840 0014            00014  3375+         L     IJLWKRGE,IJLKNT20 GET ADDR OF COMREG                 3-B
002456 9102 4035      00035        3376+         TM    IJLKNT53(IJLWKRGE),IJLKTX02 IS AP SUPPORTED          3-B
00245A 4780 A0B2            0246A  3377+         BZ    IJLZNOAP NO,GET NO. OF CHANQ ENTRIES                 3-B
00245E 5824 0088            00088  3378+         L     IJLWKRG3,IJLKT136(IJLWKRGE) GET ADDR COMREG EXT.     3-B
002462 5822 0014            00014  3379+         L     IJLWKRG3,IJLKNT20(IJLWKRG3) GET ADDR OF TSKIDTAB     3-B
002466 47F0 A0BA            02472  3380+         B     IJLZCPDQ GO AROUND NOAP                              3-B
00246A                             3381+IJLZNOAP EQU   * 3-B
00246A 4824 005E            0005E  3382+         LH    IJLWKRG3,IJLKNT94(IJLWKRGE) GET NO. CHANQ ENTRIES    3-B
00246E 4A24 006C            0006C  3383+         AH    IJLWKRG3,IJLKT108(IJLWKRGE) POINT TO REQIDTAB        3-B
002472                             3384+IJLZCPDQ EQU   * 3-B
002472 1A25                        3385+         AR    IJLWKRG3,IJLWKRGO ADDR TSKID OR REQID ENTRY          3-B
002474 92FF 2000      00000        3386+         MVI   IJLKONT0(IJLWKRG3),IJLKTXFF MARK ENTRY USED          3-B
                                   3387+********************************************************************3-B
002478                             3388+IJLZ2NR3 EQU   * 3-B
002478 07FE                        3389+         BR    IJLLNKRG RETURN TO CALLER                           3-B
00247A 9100 3007      00007        3390+IJLZTOTS TM    IJLKONT7(IJLPUBRG),IJLKTX00 PUB OWNED THIS PART.     3-B
00247E 0000
002480 00000007                    3391+IJLMASKZ DC    F'7' MASK TO GET LOW 3 BITS PIB ASSGN FLAG           3-B
                                   3392+         DROP  IJLZWOR2 3-B
002488                             3393+         LTORG  3-B
002488 0C00                        3394                =XL2'0C00'
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   82


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   3396+**********IJLTRSCH-SDR ROUTINE AND IJLRSPCK-2740 ROUTINE*********   3-B

002490                             3398+IJLTRSC1 CSECT  3-B
                                   3399+         ENTRY IJLRSPCK 3-B
002490                             3400+         USING IJLTRSC1,IJLWKRG3 COVER THIS PART OF CSECT           3-B
002490                             3401+         USING IJLRSPCK,IJLWKRG3 3-B
002490                             3402+IJLRSPCK EQU   * 3-B
002490 9501 C01A      0001A        3403+         CLI   IJLDERAD,X'01' SPACE CHARACTER?                      3-B
002494 4780 2048            024D8  3404+         BE    IJLDNTZZ YES.RETURN                                  3-B
002498 9581 C01A      0001A        3405+         CLI   IJLDERAD,X'81' SPACE CHARACTER?                      3-B
00249C 4780 2048            024D8  3406+         BE    IJLDNTZZ YES.RETURN                                  3-B
0024A0 4150 0027            00027  3407+         LA    IJLWKRGO,IJLMSTRM RETRIEVE TERM ERR MSG              3-B
0024A4 9523 C01A      0001A        3408+         CLI   IJLDERAD,X'23' CHARACTER = / (SLASH)                 3-B
0024A8 4780 2044            024D4  3409+         BE    IJLSETSL YES.SET MSG CODE IN LCB                     3-B
0024AC 9680 C01A      0001A        3410+         OI    IJLDERAD,X'80' MAKE RESPONSE UPPER CASE              3-B
0024B0 95A5 C01A      0001A        3411+         CLI   IJLDERAD,X'A5' CHARACTER= 'S'                        3-B
0024B4 4780 2040            024D0  3412+         BE    IJLSETES YES.SET LCB MSG CODE                        3-B
0024B8 95A9 C01A      0001A        3413+         CLI   IJLDERAD,X'A9' CHARACTER='U'                         3-B
0024BC 4780 203C            024CC  3414+         BE    IJLSETEU YES.SET LCB MSG CODE                        3-B
0024C0 95B1 C01A      0001A        3415+         CLI   IJLDERAD,X'B1' CHARACTER= 'Y'                        3-B
0024C4 4770 2048            024D8  3416+         BNE   IJLDNTZZ NO.GO RETURN                                3-B
0024C8 4155 0001            00001  3417+IJLSETY  LA    IJLWKRGO,IJLKONT1(IJLWKRGO) SET Y MSG CODE           3-B
0024CC 4155 0001            00001  3418+IJLSETEU LA    IJLWKRGO,IJLKONT1(IJLWKRGO) SET U MSG CODE           3-B
0024D0 4155 0001            00001  3419+IJLSETES LA    IJLWKRGO,IJLKONT1(IJLWKRGO) SET S MSG CODE           3-B
0024D4 4250 1018            00018  3420+IJLSETSL STC   IJLWKRGO,IJLLCBSW PUT MSG CODE IN LCB                3-B
0024D8 07FE                        3421+IJLDNTZZ BR    IJLLNKRG 3-B
                                   3422+         DROP  IJLWKRG3 3-B
0024E0                             3423+         LTORG
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   83


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   3425+********************************************************************3-A
                                   3426+*                                                                   3-A
                                   3427+******** 3277 LOCAL INTERRUPT HANDLER ********                      3-A
                                   3428+*                                                                   3-A
                                   3429+********************************************************************3-A


0024E0                             3431+         USING IJL277IP,IJL277RG ESTABLISH ADDRESSABILITY         3-A
0024E0                             3432+IJL277IP CSECT  3-A
0024E0 4140 1020            00020  3433+         LA    IJLWKRGE,IJLLCBC0 POINT TO ERP CCW SPACE           3-A
0024E4 9504 4000      00000        3434+         CLI   IJLCCWCC,IJLKTX04 WAS A SENSE EXECUTED             3-A
0024E8 4780 B318            027F8  3435+         BE    IJLANREP YES, GO TO 3277L SENSE ANALYZER  3-A
0024EC 4140 1030            00030  3436+         LA    IJLWKRGE,IJLLCBC1+IJLKONT8 PT TO PROGRAM CCW         3-A
0024F0 9503 4000      00000        3437+         CLI   IJLCCWCC,IJLZNOPC LAST CCW EXECUTED A NOP          3-A
0024F4 4770 B038            02518  3438+         BNE   IJLZ2STS NO, CHECK STATUS BYTES           3-A
0024F8 9180 0044      00044        3439+         TM    IJLCSWS0,IJLZ1S80 ATTN WITH NOP CCB QUEUED         3-A
0024FC 47E0 B034            02514  3440+         BNO   IJLZZNOP NO, POST NOP-WAIT FLAG           3-A
002500 9108 1010      00010        3441+         TM    IJLLCBFL,IJLBQUED IS LCB QUEUED?                    3-C
002504 4710 B02C            0250C  3442+         BO    IJL17819 IF YES, SKIP AROUND                        3-C
002508 9608 D004      00004        3443+         OI    IJLDTFDX,IJLB60NW TURN ON NO-OP WAIT FLAG            3-C
00250C                             3444+IJL17819 EQU   * 3-C
00250C 9102 0044      00044        3445+         TM    IJLCSWS0,IJLZ1S02 UNIT CHECK PRESENT               3-A
002510 47E0 B244            02724  3446+         BNO   IJLZSNAT NO, KEEP CCB ON THE QUEUE        3-A
002514                             3447+IJLZZNOP EQU   * 3-A
002514 9608 D004      00004        3448+         OI    IJLDTFDX,IJLB60NW POST NOP-WAIT FLAG               3-A
002518                             3449+IJLZ2STS EQU   * 3-A
002518 9500 0045      00045        3450+         CLI   IJLCSWS1,IJLKTX00 ANY STATUS IN 2ND BYTE             3-A
00251C 4770 B0E8            025C8  3451+         BNE   IJLZZCDC YES, CHECK CHANNEL DATA CHECK        3-A
002520 950C 0044      00044        3452+         CLI   IJLCSWS0,IJLZ1S08+IJLZ1S04 CE,DE ALONE            3-A
002524 4780 B114            025F4  3453+         BE    IJLZCEDE YES, GO TO CE,DE PROCESSOR       3-A
002528 952C 0044      00044        3454+         CLI   IJLCSWS0,IJLZ1S20+IJLZ1S08+IJLZ1S04 CUE,CE,DE ALONE  3-A
00252C 4780 B114            025F4  3455+         BE    IJLZCEDE YES, GO TO CE,DE PROCESSOR       3-A
002530 9508 0044      00044        3456+         CLI   IJLCSWS0,IJLZ1S08 CE ALONE                         3-A
002534 4780 B140            02620  3457+         BE    IJLZCEAL YES, GO TO CE PROCESSOR          3-A
002538 D502 0041 B52E 00041 02A0E  3458+         CLC   IJLCSWCA(3),=XL3'0' DOES CSW HAVE A CCW ADDRESS      3-A
00253E 4770 B070            02550  3459+         BNE   IJLZZCNT YES, DON'T UPDATE ADDR                3-A
002542 4144 0008            00008  3460+         LA    IJLWKRGE,IJLKONT8(IJLWKRGE) INCREMENT CCW ADDR       3-A
002546 5040 8C50            02360  3461+         ST    IJLWKRGE,IJLFWWB1 STORE IN WORK AREA               3-A
00254A D202 0041 8C51 00041 02361  3462+         MVC   IJLCSWCA(IJLKONT3),IJLFWWB1+IJLKONT1 MOVE ADR TO CSW 3-A
002550                             3463+IJLZZCNT EQU   * 3-A
002550 9580 0044      00044        3464+         CLI   IJLCSWS0,IJLZ1S80 ATTN ALONE                       3-A
002554 4780 B150            02630  3465+         BE    IJLZATTN YES, GO TO ATTENTION PROCESSOR   3-A
002558 95A0 0044      00044        3466+         CLI   IJLCSWS0,IJLZ1S20+IJLZ1S80 CUE,ATTN ALONE         3-A
00255C 4780 B1BA            0269A  3467+         BE    IJLZATCU YES, GO TO ATTN AND CUE PROCESSOR3-A
002560 9504 0044      00044        3468+         CLI   IJLCSWS0,IJLZ1S04 DE ALONE                    3-A
002564 4780 B1F0            026D0  3469+         BE    IJLZDEAL YES, GO TO DE PROCESSOR          3-A
002568 9514 0044      00044        3470+         CLI   IJLCSWS0,IJLZ1S10+IJLZ1S04 BUSY,DE ALONE          3-A
00256C 4780 B1F0            026D0  3471+         BE    IJLZDEAL YES, GO TO DE PROCESSOR          3-A
002570 9534 0044      00044        3472+         CLI   IJLCSWS0,IJLZ1S20+IJLZ1S10+IJLZ1S04 CUE,B,DE ALONE   3-A
002574 4780 B1F0            026D0  3473+         BE    IJLZDEAL GO TO DE  PROCESSOR                         3-C
002578 951C 0044      00044        3474+         CLI   IJLCSWS0,IJLZ1S10+IJLZ1S08+IJLZ1S04 B,CE,DE ALONE    3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   84


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00257C 4780 B114            025F4  3475+         BE    IJLZCEDE GO TO CE PROCESSOR                        3-C
002580 953C 0044      00044        3476+         CLI   IJLCSWS0,IJLZ1S20+IJLZ1S10+IJLZ1S08+IJLZ1S04 3-A
                                   3477+*                                       CUE,B,CE,DE ALONE           3-A
002584 4780 B114            025F4  3478+         BE    IJLZCEDE GO TO CE PROCESSOR                         3-C
002588 9101 0044      00044        3479+         TM    IJLCSWS0,IJLZ1S01 UNIT EXCEPTION PRESENT           3-A
00258C 4710 B21C            026FC  3480+         BO    IJLZUNEX YES, GO TO UE PROCESSOR          3-A
002590 9524 0044      00044        3481+         CLI   IJLCSWS0,IJLZ1S20+IJLZ1S04 CUE,DE ALONE             3-A
002594 4780 B1F0            026D0  3482+         BE    IJLZDEAL GO TO DE PROCESSOR                          3-C
002598 9590 0044      00044        3483+         CLI   IJLCSWS0,IJLZ1S80+IJLZ1S10 ATTN,B ALONE             3-A
00259C 4780 B1CA            026AA  3484+         BE    IJLZWRTI GO CHECK FOR WRITE INITIAL                  3-C
0025A0 95B0 0044      00044        3485+         CLI   IJLCSWS0,IJLZ1S80+IJLZ1S20+IJLZ1S10 A,CUE,B ALONE    3-A
0025A4 4780 B1CA            026AA  3486+         BE    IJLZWRTI GO CHECK FOR WRITE INITIAL                  3-C
0025A8 9530 0044      00044        3487+         CLI   IJLCSWS0,IJLZ1S20+IJLZ1S10 CUE,B ALONE            3-A
0025AC 4780 B254            02734  3488+         BE    IJLZAPCI YES, SET PCI STATUS              3-A
0025B0 9520 0044      00044        3489+         CLI   IJLCSWS0,IJLZ1S20 CUE ONLY                         3-A
0025B4 4780 B254            02734  3490+         BE    IJLZAPCI YES, SET PCI STATUS              3-A
0025B8 9538 0044      00044        3491+         CLI   IJLCSWS0,IJLZ1S20+IJLZ1S10+IJLZ1S08 CUE,B,CE ALONE   3-A
0025BC 4780 B140            02620  3492+         BE    IJLZCEAL GO TO CE PROCESSOR                         3-C
0025C0 9584 0044      00044        3493+         CLI   IJLCSWS0,IJLZ1S80+IJLZ1S04 ATTN AND DEV END?         3-C
0025C4 4780 B262            02742  3494+         BE    IJLZADE YES, PROCESS ATTN AND DE                    3-C

0025C8                             3496+IJLZZCDC EQU   * CHANNEL DATA CHECK PROCESSOR                    3-A
0025C8 9108 0045      00045        3497+         TM    IJLCSWS1,IJLZ2S08 CHANNEL DATA CHECK PRESENT       3-A
0025CC 47E0 B28A            0276A  3498+         BNO   IJLZN277 NO, CHECK OTHER CONDITIONS       3-A
0025D0 9215 1018      00018        3499+         MVI   IJLLCBSW,IJLMSCDC PUT CHANNEL DATA CHECK CODE IN LC3-A
0025D4 D100 8C55 1016 02365 00016  3500+         MVN   IJLDIGIT,IJLLCBAR EXTRACT ERP COUNTER              3-A
0025DA 9502 8C55      02365        3501+         CLI   IJLDIGIT,IJLKTX02 RETRY COUNT > 2                  3-A
0025DE 4720 B272            02752  3502+         BH    IJLZNX1L YES, POST I/O ERROR              3-A
0025E2 1B55                        3503+         SR    IJLWKRGO,IJLWKRGO CLEAR WORK REG                   3-A
0025E4 4350 1016            00016  3504+         IC    IJLWKRGO,IJLLCBAR GET RETRY COUNT PLUS OTHER DATA  3-A
0025E8 4155 0001            00001  3505+         LA    IJLWKRGO,IJLKONT1(IJLWKRGO) UPDATE RETRY COUNT       3-A
0025EC 4250 1016            00016  3506+         STC   IJLWKRGO,IJLLCBAR RESTORE                          3-A
0025F0 47F0 B1E2            026C2  3507+         B     IJLZSTAT RETRY I/O                        3-A

0025F4                             3509+IJLZCEDE EQU   * CHANNEL END, DEVICE END PROCESSOR               3-A
0025F4 94F7 1015      00015        3510+         NI    IJLLCBAK,X'FF'-IJLZIORQ TURN OFF I/O REQUEST FLAG   3-A
0025F8 9101 1010      00010        3511+         TM    IJLLCBFL,IJLB1053 IS LCB FOR PRINTER?               3-B
0025FC 4780 B124            02604  3512+         BZ    IJLZCD NO, SKIP AROUND                              3-B
002600 947F 1015      00015        3513+         NI    IJLLCBAK,IJLKTXFF-IJLZPBSY TURN OFF PRINTER BUSY FLA3-B
002604 9503 1030      00030        3514+IJLZCD   CLI   IJLLCBC1+IJLKONT8,IJLZNOPC IS THIS A QUEUE OPERATION3-B
002608 4770 B28E            0276E  3515+         BNE   IJLZNNOR NO, POST NORMAL COMPLETION       3-A
00260C 9206 1030      00030        3516+         MVI   IJLLCBC1+IJLKONT8,IJLKTX06 RESTORE RD MOD CMD CODE   3-A
002610 4140 1028            00028  3517+         LA    IJLWKRGE,IJLLCBC1 POINT TO FIRST CCW               3-A
002614 5040 1008            00008  3518+         ST    IJLWKRGE,IJLLCBCA-IJLKONT1 STORE IN LCB              3-A
002618 9608 1010      00010        3519+         OI    IJLLCBFL,IJLBQUED TURN ON LCB Q-FLAG               3-A
00261C 47F0 B250            02730  3520+         B     IJLZBPUB POST PUB BUSY                         3-A

002620                             3522+IJLZCEAL EQU   * CHANNEL END PROCESSOR                           3-A
002620 9608 1015      00015        3523+         OI    IJLLCBAK,IJLZIORQ TURN ON I/O REQ FLAG              3-C
002624 9101 1010      00010        3524+         TM    IJLLCBFL,IJLB1053 IS LCB FOR A PRINTER        3-A
002628 4780 B254            02734  3525+         BZ    IJLZAPCI SET PCI STATUS                        3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   85


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00262C 47F0 B28E            0276E  3526+         B     IJLZNNOR POST NORMAL COMPLETION FOR PRINTE3-A

002630                             3528+IJLZATTN EQU   * ATTENTION PROCESSOR                             3-A
002630 9101 1030      00030        3529+         TM    IJLLCBC1+IJLKONT8,IJLKTX01 WRITE OPERATION?          3-C
002634 4710 B1CA            026AA  3530+         BO    IJLZWRTI YES, GO WRITE                              3-C
002638 9102 1010      00010        3531+         TM    IJLLCBFL,IJLBSKPP IS LCB TO BE SKIPPED?             3-C
00263C 4710 B1A2            02682  3532+         BO    IJLZZZNQ YES,PREPARE TO RETURN TO SUPVR             3-C
002640                             3533+IJLZENBL EQU   * 3-A
002640 9101 D004      00004        3534+         TM    IJLDTFDX,IJLBERA IS ENABLE-READ FLAG ON           3-A
002644 4780 B244            02724  3535+         BZ    IJLZSNAT NO, RESET RESCAN FLAG                 3-A
002648 9104 D004      00004        3536+         TM    IJLDTFDX,IJLBZRPL IS RESETPL IN PROGRESS FLAG ON   3-A
00264C 4710 B244            02724  3537+         BO    IJLZSNAT YES, DO NOT START THE READ       3-A
002650 4520 B29C            0277C  3538+         BAL   IJLWKRG3,IJLZPBCK DETERMINE IF OLTEP OWNS DEVICE   3-A
002654 1255                        3539+         LTR   IJLWKRGO,IJLWKRGO DOES OLTEP OWN DEVICE            3-A
002656 4770 B244            02724  3540+         BNZ   IJLZSNAT YES, DO NOT START THE READ                 3-C
00265A 9140 1015      00015        3541+         TM    IJLLCBAK,IJLZBFCL ASYNCH ERROR FLAG ON              3-A
00265E 47E0 B192            02672  3542+         BNO   IJLZENBZ NO, START THE READ                         3-A
002662 94BF 1015      00015        3543+         NI    IJLLCBAK,X'FF'-IJLZBFCL TURN OFF ASYNCH ERROR FLAG  3-A
002666 9264 C000      00000        3544+         MVI   IJLDEECB,IJLCZBCL SET UNRELIABLE DEV BUFFER CONTENTS 3-A
00266A 9610 D004      00004        3545+         OI    IJLDTFDX,IJLBNORS SET NO RESETPL FLAG                3-A
00266E 47F0 B282            02762  3546+         B     IJLZNCDE BRANCH TO PRE-POSTED                        3-A
002672                             3547+IJLZENBZ EQU   * 3-A
002672 94FE D004      00004        3548+         NI    IJLDTFDX,X'FF'-IJLBERA TURN OFF ENABLE-READ FLAG   3-A
002676 9640 1010      00010        3549+         OI    IJLLCBFL,IJLBRSA TURN ON READ STARTED FLAG        3-A
00267A 947B 3006      00006        3550+         NI    IJLKONT6(IJLPUBRG),X'FF'-IJLZPBSZ-IJLZPBDE RESET    3-A
                                   3551+*                                       PUB BUSY AND DE FLAGS       3-A
00267E 47F0 B1E2            026C2  3552+         B     IJLZSTAT START THE READ                   3-A
002682                             3553+IJLZZZNQ EQU   * 3-A
002682 D201 0044 B528 00044 02A08  3554+         MVC   IJLCSWS0(IJLKONT2),=XL2'0C00' SET STATUS TO CE,DE    3-A
002688 9604 1010      00010        3555+         OI    IJLLCBFL,IJLBATTN POST ATTN IN LCB                 3-A
00268C 94F7 1010      00010        3556+         NI    IJLLCBFL,X'FF'-IJLBQUED TURN OFF LCB Q-FLAG         3-A
002690 D702 1011 1011 00011 00011  3557+         XC    IJLLCBDE,IJLLCBDE CLEAR DECB ADDR IN LCB           3-A
002696 47F0 B292            02772  3558+         B     IJLZNTY4 GO RETURN TO SUPERV+4                      3-A

00269A                             3560+IJLZATCU EQU   * ATTN AND CONTROL UNIT END PROCESSOR             3-A
00269A 9180 3006      00006        3561+         TM    IJLKONT6(IJLPUBRG),IJLZPBSZ DEVICE BUSY            3-A
00269E 4710 B150            02630  3562+         BO    IJLZATTN YES, SEE IF LCB TO BE SKIPPED         3-A
0026A2 9503 1030      00030        3563+         CLI   IJLLCBC1+IJLKONT8,IJLZNOPC A QUE OPERATION         3-A
0026A6 4780 B27E            0275E  3564+         BE    IJLZNSNO YES, SHOULD NOT OCCUR            3-A
0026AA                             3565+IJLZWRTI EQU   * 3-A
0026AA 9501 1030      00030        3566+         CLI   IJLLCBC1+IJLKONT8,IJLKTX01 WRITE INITIAL CCW         3-A
0026AE 4770 B1E2            026C2  3567+         BNE   IJLZSTAT NO, START I/O                    3-A
0026B2 5820 C00C            0000C  3568+         L     IJLWKRG3,IJLDEIOA-IJLKONT1 GET I/O AREA ADDR         3-A
0026B6 9101 2000      00000        3569+         TM    IJLKONT0(IJLWKRG3),IJLZZMDT RESET MDT BIT ON         3-A
0026BA 4710 B1E2            026C2  3570+         BO    IJLZSTAT YES, START I/O                   3-A
0026BE 9604 1010      00010        3571+         OI    IJLLCBFL,IJLBATTN POST ATTN IN LCB                 3-A
0026C2                             3572+IJLZSTAT EQU   * 3-A
0026C2 D201 0044 B528 00044 02A08  3573+         MVC   IJLCSWS0(IJLKONT2),=XL2'0C00' SET CE,DE STATUS       3-A
0026C8 94F7 1015      00015        3574+         NI    IJLLCBAK,IJLKTXFF-IJLZIORQ TURN OFF I/O REQ FLAG     3-C
0026CC 47F0 B296            02776  3575+         B     IJLZNTY0 RESTART I/O                 3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   86


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0026D0                             3577+IJLZDEAL EQU   * DEVICE END PROCESSOR                            3-A
0026D0 9114 0044      00044        3578+         TM    IJLCSWS0,IJLZ1S10+IJLZ1S04 DEVICE END BUSY?          3-C
0026D4 47E0 B200            026E0  3579+         BNO   IJL17873 IF NOT, THEN SKIP AROUND                    3-C
0026D8 9108 1015      00015        3580+         TM    IJLLCBAK,IJLZIORQ IS I/O REQ FLAG ON?                3-C
0026DC 47E0 B1E2            026C2  3581+         BNO   IJLZSTAT IF NOT, THEN RETRY OPERATION               3-C
0026E0                             3582+IJL17873 EQU   * 3-C
0026E0 9108 1015      00015        3583+         TM    IJLLCBAK,IJLZIORQ I/O REQUEST FLAG ON              3-A
0026E4 47E0 B254            02734  3584+         BNO   IJLZAPCI NO, SET PCI STATUS                         3-C
0026E8 94F7 1015      00015        3585+         NI    IJLLCBAK,IJLKTXFF-IJLZIORQ TURN OFF I/O REQ FLAG     3-C
0026EC 9101 1010      00010        3586+         TM    IJLLCBFL,IJLB1053 LCB FOR PRINTER                  3-A
0026F0 4780 B28E            0276E  3587+         BZ    IJLZNNOR NO, POST NORMAL COMPLETION       3-A
0026F4 947F 1015      00015        3588+         NI    IJLLCBAK,X'FF'-IJLZPBSY TURN OFF PRINTER BUSY FLAG  3-A
0026F8 47F0 B250            02730  3589+         B     IJLZBPUB POST PUB DE BIT                  3-A


0026FC                             3592+IJLZUNEX EQU   * UNIT EXCEPTION PROCESSOR                        3-A
0026FC D100 8C55 1016 02365 00016  3593+         MVN   IJLDIGIT,IJLLCBAR EXTRACT ERP COUNTER              3-A
002702 9502 8C55      02365        3594+         CLI   IJLDIGIT,IJLKTX02 RETRY COUNT > 2                  3-A
002706 4720 B23C            0271C  3595+         BH    IJLZZUES IF GREATER-BRANCH.                         3-A
00270A 1B55                        3596+         SR    IJLWKRGO,IJLWKRGO CLEAR WORK REG                   3-A
00270C 4350 1016            00016  3597+         IC    IJLWKRGO,IJLLCBAR GET RETRY COUNT PLUS OTHER DATA  3-A
002710 4155 0001            00001  3598+         LA    IJLWKRGO,IJLKONT1(IJLWKRGO) UPDATE RETRY COUNT       3-A
002714 4250 1016            00016  3599+         STC   IJLWKRGO,IJLLCBAR 3-A
002718 47F0 B1E2            026C2  3600+         B     IJLZSTAT RETRY I/O                        3-A
00271C                             3601+IJLZZUES EQU   * 3-A
00271C 921A 1018      00018        3602+         MVI   IJLLCBSW,IJLMSUNE PUT UE CODE IN LCB               3-A
002720 47F0 B27A            0275A  3603+         B     IJLZNX3L GO POST I/O ERROR                         3-A

002724                             3605+IJLZSNAT EQU   * 3-A
002724 94FD D004      00004        3606+         NI    IJLDTFDX,X'FF'-IJLB60RS RESET RESCAN FLAG           3-A
002728 9604 1010      00010        3607+         OI    IJLLCBFL,IJLBATTN POST ATTN IN LCB            3-A
00272C 94F7 1010      00010        3608+         NI    IJLLCBFL,X'FF'-IJLBQUED TURN OFF LCB Q-FLAG         3-A
002730                             3609+IJLZBPUB EQU   * 3-A
002730 9604 3006      00006        3610+         OI    IJLKONT6(IJLPUBRG),IJLZPBDE POST PUB DE            3-A
002734                             3611+IJLZAPCI EQU   * 3-A
002734 9680 3006      00006        3612+         OI    IJLKONT6(IJLPUBRG),IJLZPBSZ POST PUB BUSY          3-A
002738 D201 0044 B52A 00044 02A0A  3613+         MVC   IJLCSWS0(IJLKONT2),=XL2'0080' SET PCI STATUS         3-A
00273E 47F0 B292            02772  3614+         B     IJLZNTY4 GO RETURN TO SUPERV+4                      3-A

002742                             3616+IJLZADE  EQU   * 3-C
002742 9101 1010      00010        3617+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER?              3-C
002746 4710 B1F0            026D0  3618+         BO    IJLZDEAL YES, IGNORE ATTN - PROCESS DE ONLY         3-C
00274A 9604 1010      00010        3619+         OI    IJLLCBFL,IJLBATTN OTHERWISE POST ATTN IN LCB        3-C
00274E 47F0 B1F0            026D0  3620+         B     IJLZDEAL THEN PROCESS DEVICE END                    3-C

002752 41EE 0004            00004  3622+IJLZNX1L LA    IJLLNKRG,4(IJLLNKRG) 3-A
002756 41EE 0004            00004  3623+IJLZNX2L LA    IJLLNKRG,4(IJLLNKRG) ERROR IN ERP                3-A
00275A 41EE 0004            00004  3624+IJLZNX3L LA    IJLLNKRG,4(IJLLNKRG) I/O ERROR                   3-A
00275E 41EE 0004            00004  3625+IJLZNSNO LA    IJLLNKRG,4(IJLLNKRG) SHOULD NOT OCCUR            3-A
002762 41EE 0004            00004  3626+IJLZNCDE LA    IJLLNKRG,4(IJLLNKRG) PRE-POSTED                  3-A
002766 41EE 0004            00004  3627+IJLZNPST LA    IJLLNKRG,4(IJLLNKRG) EXIT                        3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   87


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00276A 41EE 0004            00004  3628+IJLZN277 LA    IJLLNKRG,4(IJLLNKRG) OTHER                       3-A
00276E 41EE 0004            00004  3629+IJLZNNOR LA    IJLLNKRG,4(IJLLNKRG) NORMAL                      3-A
002772 41EE 0004            00004  3630+IJLZNTY4 LA    IJLLNKRG,4(IJLLNKRG) RETURN SUPERVISOR           3-A
002776 41EE 0004            00004  3631+IJLZNTY0 LA    IJLLNKRG,4(IJLLNKRG) RESTART I/O                 3-A
00277A 07FE                        3632+IJLZNPNP BR    IJLLNKRG POST NON-PRODUCTIVE OPERATION         3-A



                                   3634+**** IJLZPBCK -- CHECK FOR OLTEP CONTROLLED DEVICE                  3-A
00277C                             3635+IJLZPBCK EQU   * 3-A
00277C 5020 B310            027F0  3636+         ST    IJLWKRG3,IJLZRTSV SAVE RETURN ADDRESS         3-A
002780 5840 0014            00014  3637+         L     IJLWKRGE,IJLKNT20 ADDR OF                          3-A
002784 4844 0084            00084  3638+         LH    IJLWKRGE,IJLKT132(IJLWKRGE) COMMUNICATION REGION     3-A
002788 9140 4035      00035        3639+         TM    IJLKNT53(IJLWKRGE),IJLKTX40 IS SUPVR MPS?           3-C
00278C 47E0 B2B6            02796  3640+         BNO   IJL17818 IF YES SKIP AROUND                         3-C
002790 1B55                        3641+         SR    IJLWKRGO,IJLWKRGO ZERO RETURN REGISTER               3-C
002792 47F0 B304            027E4  3642+         B     IJLZGOBK GO BACK TO CALLER                           3-C
002796                             3643+IJL17818 EQU   * 3-C
002796 4844 005A            0005A  3644+         LH    IJLWKRGE,IJLKNT90(IJLWKRGE) ADDR OF PIB TABLE        3-A
00279A 4144 0010            00010  3645+         LA    IJLWKRGE,IJLKNT16(IJLWKRGE) POINT TO BG PIB          3-A
00279E 4124 0010            00010  3646+         LA    IJLWKRG3,IJLKNT16(IJLWKRGE) POINT TO F2 PIB          3-A
0027A2 5822 0008            00008  3647+         L     IJLWKRG3,IJLKONT8(IJLWKRG3) GET ADDR OF ORIGIN       3-A
0027A6 4122 0000            00000  3648+         LA    IJLWKRG3,IJLKONT0(IJLWKRG3) OF F2 PARTITION        3-A
0027AA 4150 B29C            0277C  3649+         LA    IJLWKRGO,IJLZPBCK GET OUR ADDRESS              3-A
0027AE 1952                        3650+         CR    IJLWKRGO,IJLWKRG3 ARE WE IN BG PARITION       3-A
0027B0 4740 B2EE            027CE  3651+         BL    IJLZPFND YES                         3-A
0027B4 4144 0010            00010  3652+         LA    IJLWKRGE,IJLKNT16(IJLWKRGE) POINT TO F2 PIB          3-A
0027B8 4124 0010            00010  3653+         LA    IJLWKRG3,IJLKNT16(IJLWKRGE) POINT TO F1 PIB          3-A
0027BC 5822 0008            00008  3654+         L     IJLWKRG3,IJLKONT8(IJLWKRG3) GET ADDR OR ORIGIN       3-A
0027C0 4122 0000            00000  3655+         LA    IJLWKRG3,IJLKONT0(IJLWKRG3) OF F1 PARTITION        3-A
0027C4 1952                        3656+         CR    IJLWKRGO,IJLWKRG3 ARE WE IN F2 PARTITION       3-A
0027C6 4740 B2EE            027CE  3657+         BL    IJLZPFND YES                         3-A
0027CA 4144 0010            00010  3658+         LA    IJLWKRGE,IJLKNT16(IJLWKRGE) PT TO F1 PIB             3-A
0027CE                             3659+IJLZPFND EQU   * 3-A
0027CE 4324 000C            0000C  3660+         IC    IJLWKRG3,IJLKNT12(IJLWKRGE) GET PIB ASSGN FLAGS      3-A
0027D2 5420 B314            027F4  3661+         N     IJLWKRG3,IJLZMASK TURN OFF ALL BUT LOW 3 BITS 3-A
0027D6 1B55                        3662+         SR    IJLWKRGO,IJLWKRGO SET RETURN CODE OF 0        3-A
0027D8 4420 B30A            027EA  3663+         EX    IJLWKRG3,IJLZTSTO IS PUB OWNED BY THIS PARTN  3-A
0027DC 4710 B304            027E4  3664+         BO    IJLZGOBK YES                         3-A
0027E0 4150 0004            00004  3665+         LA    IJLWKRGO,IJLKONT4 SET RETURN CODE OF 4             3-A
0027E4 5820 B310            027F0  3666+IJLZGOBK L     IJLWKRG3,IJLZRTSV GET RETURN ADDRESS          3-A
0027E8 07F2                        3667+         BR    IJLWKRG3 RETURN TO CALLER            3-A
0027EA 9100 3007      00007        3668+IJLZTSTO TM    IJLKONT7(IJLPUBRG),IJLKTX00 PUB OWNED BY THIS PART.  3-A
0027EE 0000
0027F0 00000000                    3669+IJLZRTSV DC    F'0' SAVE AREA FOR RETURN ADDRESS          3-A
0027F4 00000007                    3670+IJLZMASK DC    X'00000007' MASK TO GET LOW 3 BITS PIB ASSGN FLAG 3-A



                                   3673+****   LOCAL 3277 ERROR RECOVERY AND SENSE ANALYSIS   ****          3-A
0027F8                             3674+IJLANREP EQU   * 3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   88


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0027F8 94F7 1015      00015        3675+         NI    IJLLCBAK,IJLKTXFF-IJLZIORQ TURN OFF I/O REQ FLAG     3-C
0027FC D501 B528 0044 02A08 00044  3676+         CLC   =XL2'0C00',IJLCSWS0 CE,DE STATUS                     3-A
002802 4770 B510            029F0  3677+         BNE   IJLZ1ZZ1 NO, ERROR IN ERP                 3-A
002806 D707 1020 1020 00020 00020  3678+         XC    IJLLCBC0,IJLLCBC0 CLEAR ERP SENSE CCW AREA         3-A
00280C 9104 D015      00015        3679+         TM    IJLDTFF2,B'00000100' IS ERP REQUESTED                3-A
002810 47E0 B398            02878  3680+         BNO   IJLZ1ZZ2 NO, POST I/O ERROR               3-A
002814 5840 1018            00018  3681+         L     IJLWKRGE,IJLLCBSW GET ADDR OF FAILING CCW          3-A
002818 4144 0000            00000  3682+         LA    IJLWKRGE,IJLKONT0(IJLWKRGE) CLEAR HIGH ORDER BYTE    3-A
00281C 4B40 B52C            02A0C  3683+         SH    IJLWKRGE,=H'8' BACK UP TO FAILING CCW           3-A
002820 9480 1018      00018        3684+         NI    IJLLCBSW,IJLKTX80 RESET MSG CODE, BUT NOT OBR/SDR   3-A
                                   3685+*                                  LINE COUNTED FLAG                3-A
002824 9582 101C      0001C        3686+         CLI   IJLLCBSW+IJLKONT4,IJLZ1S80+IJLZ1S02 A,UC STATUS     3-A
002828 4770 B35C            0283C  3687+         BNE   IJLANREQ NO, CHECK SENSE BYTE             3-A
00282C 9510 C010      00010        3688+         CLI   IJLDESN0,IJLEQCHK EQUIPMENT CHECK ONLY             3-A
002830 4780 B41C            028FC  3689+         BE    IJLZECMG YES, UPDATE EC SDR COUNTER       3-A
002834                             3690+IJLZIRU4 EQU   * 3-A
002834 9200 C010      00010        3691+         MVI   IJLDESN0,IJLKTX00 CLEAR SENSE BYTE                 3-A
002838 47F0 B404            028E4  3692+         B     IJLZIRU1 POST ASYNCH ERROR                3-A
00283C                             3693+IJLANREQ EQU   * 3-A
00283C 9140 C010      00010        3694+         TM    IJLDESN0,IJLINTVR IS INTERVENTION REQUIRED PRESENT 3-A
002840 4710 B3B4            02894  3695+         BO    IJLZZZIR YES, PROCESS IR                  3-A
002844 9514 C010      00010        3696+         CLI   IJLDESN0,IJLEQCHK+IJLZUNSY EC, US ONLY            3-A
002848 4780 B424            02904  3697+         BE    IJLZZZEC YES, PROCESS EC                  3-A
00284C 9120 C010      00010        3698+         TM    IJLDESN0,IJLBOCHK BUS OUT CHECK PRESENT            3-A
002850 4710 B42C            0290C  3699+         BO    IJLZZBOC YES, PROCESS BOC                 3-A
002854 9108 C010      00010        3700+         TM    IJLDESN0,IJLDTACK IS DATA CHECK PRESENT            3-A
002858 4710 B48C            0296C  3701+         BO    IJLZZZDC YES, PROCESS DC                  3-A
00285C 9502 C010      00010        3702+         CLI   IJLDESN0,IJLZCNCK CONTROL CHECK ONLY               3-A
002860 4780 B4C8            029A8  3703+         BE    IJLZZZCC YES, PROCESS CC                  3-A
002864 9580 C010      00010        3704+         CLI   IJLDESN0,IJLCOMRJ COMMAND REJECT ONLY              3-A
002868 4780 B4E0            029C0  3705+         BE    IJLZZZCR YES, PROCESS CR                  3-A
00286C 9501 C010      00010        3706+         CLI   IJLDESN0,IJLZOPCK OPERATION CHECK ONLY             3-A
002870 4780 B4F4            029D4  3707+         BE    IJLZZZOC YES, PROCESS OC                  3-A
002874 47F0 B4FC            029DC  3708+         B     IJLZNSNA CHECK FOR ERROR POSTING          3-A
002878                             3709+IJLZ1ZZ2 EQU   * 3-A
002878 9101 1010      00010        3710+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER              3-A
00287C 47E0 B3AC            0288C  3711+         BNO   IJLZNERP NO, POST I/O ERROR               3-A
002880 9108 101C      0001C        3712+         TM    IJLLCBSW+IJLKONT4,IJLZ1S08 CE PRESENT             3-A
002884 4710 B3AC            0288C  3713+         BO    IJLZNERP YES, POST I/O ERROR              3-A
002888 47F0 B3FC            028DC  3714+         B     IJLZIRU9 POST ASYNCHRONOUS ERROR          3-A

00288C                             3716+IJLZNERP EQU   * ERP NOT REQUESTED                               3-A
00288C 9241 C000      00000        3717+         MVI   IJLDEECB,IJLCIOER POST COMPLETION WITH I/O ERROR   3-A
002890 47F0 B282            02762  3718+         B     IJLZNCDE EXIT TO PRE-POSTED               3-A

002894                             3720+IJLZZZIR EQU   * INTERVENTION REQUIRED PROCESSOR                 3-A
002894 9503 4000      00000        3721+         CLI   IJLCCWCC,IJLZNOPC WAS LAST CCW A NOOP?              3-C
002898 4770 B3C4            028A4  3722+         BNE   IJLZIZIR NO, SKIP RD TI TEST                        3-C
00289C 9501 C005      00005        3723+         CLI   IJLDEOTC,IJLOTCRI WAS IT RD TI?                     3-C
0028A0 4780 B034            02514  3724+         BE    IJLZZNOP YES, IGNORE INT REQ                        3-C
0028A4                             3725+IJLZIZIR EQU   * 3-C
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   89


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0028A4 961E 1018      00018        3726+         OI    IJLLCBSW,IJLMSNVR SET IR MSG CODE IN LCB           3-A
0028A8 9540 C010      00010        3727+         CLI   IJLDESN0,IJLINTVR IR ONLY                          3-A
0028AC 4770 B3DC            028BC  3728+         BNE   IJLZIRS CHECK FOR IR,EC,US               3-A
0028B0 9502 101C      0001C        3729+         CLI   IJLLCBSW+IJLKONT4,IJLZ1S02 UNIT CHECK PRESENT      3-A
0028B4 4770 B3EC            028CC  3730+         BNE   IJLZIRUS NO, CHECK FOR PRINTER            3-A
0028B8 47F0 B27A            0275A  3731+         B     IJLZNX3L POST I/O ERROR                   3-A
0028BC                             3732+IJLZIRS  EQU   * 3-A
0028BC 9554 C010      00010        3733+         CLI   IJLDESN0,IJLINTVR+IJLEQCHK+IJLZUNSY IR,EC,US ONLY    3-A
0028C0 4770 B4FC            029DC  3734+         BNE   IJLZNSNA CHECK FOR ERROR POSTING          3-A
0028C4                             3735+IJLZIRU3 EQU   * 3-A
0028C4 9101 1010      00010        3736+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER              3-A
0028C8 47E0 B27E            0275E  3737+         BNO   IJLZNSNO NO, POST SNO                     3-A
0028CC                             3738+IJLZIRUS EQU   * 3-A
0028CC 9108 101C      0001C        3739+         TM    IJLLCBSW+IJLKONT4,IJLZ1S08 CE PRESENT             3-A
0028D0 4710 B27A            0275A  3740+         BO    IJLZNX3L YES, POST I/O ERROR              3-A
0028D4 9101 1010      00010        3741+         TM    IJLLCBFL,IJLB1053 DEVICE A PRINTER                 3-A
0028D8 47E0 B27A            0275A  3742+         BNO   IJLZNX3L NO, POST I/O ERROR               3-A
0028DC                             3743+IJLZIRU9 EQU   * 3-A
0028DC 947F 1015      00015        3744+         NI    IJLLCBAK,X'FF'-IJLZPBSY TURN OFF PRINTER BUSY FLAG   3-A
0028E0                             3745+IJLZIRU0 EQU   * 3-A
0028E0 9604 3006      00006        3746+         OI    IJLKONT6(IJLPUBRG),IJLZPBDE POST DE BIT IN PUB       3-A
0028E4                             3747+IJLZIRU1 EQU   * 3-A
0028E4 9640 1015      00015        3748+         OI    IJLLCBAK,IJLZBFCL SET ASYNCH ERROR FLAG            3-A
0028E8                             3749+IJLZIRU2 EQU   * 3-A
0028E8 D700 1018 1018 00018 00018  3750+         XC    IJLLCBSW(IJLKONT1),IJLLCBSW CLEAR MSG CODE         3-A
0028EE 9680 3006      00006        3751+         OI    IJLKONT6(IJLPUBRG),IJLZPBSZ POST PUB BUSY          3-A
0028F2 D201 0044 B52A 00044 02A0A  3752+         MVC   IJLCSWS0(IJLKONT2),=XL2'0080' SET PCI STATUS         3-A
0028F8 47F0 B292            02772  3753+         B     IJLZNTY4 RETURN TO SUPERVISOR + 4         3-A

0028FC                             3755+IJLZECMG EQU   * 3-A
0028FC 9200 C010      00010        3756+         MVI   IJLDESN0,IJLKTX00 CLEAR SENSE BYTE                 3-A
002900 47F0 B404            028E4  3757+         B     IJLZIRU1 SET ASYNCH ERROR                 3-A
002904                             3758+IJLZZZEC EQU   * EQUIPMENT CHECK PROCESSOR                       3-A
002904 961B 1018      00018        3759+         OI    IJLLCBSW,IJLMSEQC SET EC MSG CODE IN LCB           3-A
002908 47F0 B3E4            028C4  3760+         B     IJLZIRU3 CHECK FOR ERROR POSTING          3-A

00290C                             3762+IJLZZBOC EQU   * BUS OUT CHECK PROCESSOR                         3-A
00290C 961F 1018      00018        3763+         OI    IJLLCBSW,IJLMSBOC SET BOC MSG CODE IN LCB          3-A
002910 9502 101C      0001C        3764+         CLI   IJLLCBSW+IJLKONT4,IJLZ1S02 UNIT CHECK ONLY          3-A
002914 4770 B478            02958  3765+         BNE   IJLZNOUC NO                               3-A
002918                             3766+IJLZRTRY EQU   * 3-A
002918 D100 8C55 1016 02365 00016  3767+         MVN   IJLDIGIT,IJLLCBAR EXTRACT ERP COUNTER              3-A
00291E 9501 8C55      02365        3768+         CLI   IJLDIGIT,IJLKTX01 RETRY COUNT > 1                  3-A
002922 4720 B27A            0275A  3769+         BH    IJLZNX3L YES, POST I/O ERROR              3-A
002926 1B55                        3770+         SR    IJLWKRGO,IJLWKRGO CLEAR WORK REG                   3-A
002928 4350 1016            00016  3771+         IC    IJLWKRGO,IJLLCBAR GET RETRY COUNT PLUS OTHER DATA  3-A
00292C 4155 0001            00001  3772+         LA    IJLWKRGO,IJLKONT1(IJLWKRGO) UPDATE COUNTER         3-A
002930 4250 1016            00016  3773+         STC   IJLWKRGO,IJLLCBAR AND REPLACE IT         3-A
002934 950E C005      00005        3774+         CLI   IJLDEOTC,IJLOTCWS OPTYPE WRITE/ERASE               3-A
002938 4780 B46C            0294C  3775+         BE    IJLZRTR1 POINT TO WRITE/ERASE CCW         3-A
00293C 9512 C005      00005        3776+         CLI   IJLDEOTC,IJLOZWUS OP-TYPE WRITE UNPROT ERASE       3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   90


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

002940 4780 B46C            0294C  3777+         BE    IJLZRTR1 POINT TO WRITE UNPROT ERASE CCW  3-A
002944 4140 1028            00028  3778+         LA    IJLWKRGE,IJLLCBC1 ADDR OF CCW TO BE RETRIED        3-A
002948 47F0 B470            02950  3779+         B     IJLZRTR2 STORE CCW ADDR IN CCB            3-A
00294C                             3780+IJLZRTR1 EQU   * 3-A
00294C 4140 1030            00030  3781+         LA    IJLWKRGE,IJLLCBC1+IJLKONT8 ADDR OF CCW TO RETRY      3-A
002950                             3782+IJLZRTR2 EQU   * 3-A
002950 5040 1008            00008  3783+         ST    IJLWKRGE,IJLLCBCA-IJLKONT1 STORE IN CCB              3-A
002954 47F0 B296            02776  3784+         B     IJLZNTY0 RETRY I/O                        3-A
002958                             3785+IJLZNOUC EQU   * 3-A
002958 9501 4000      00000        3786+         CLI   IJLCCWCC,IJLKTX01 WRITE CCW                        3-A
00295C 4780 B438            02918  3787+         BE    IJLZRTRY YES, RETRY                       3-A
002960 9505 4000      00000        3788+         CLI   IJLCCWCC,IJLKTX05 ERASE/WRITE CCW                  3-A
002964 4770 B4FC            029DC  3789+         BNE   IJLZNSNA NO, CHECK FOR ERROR POSTING      3-A
002968 47F0 B438            02918  3790+         B     IJLZRTRY CHECK FOR RETRY                  3-A

00296C                             3792+IJLZZZDC EQU   * DATA CHECK PROCESSOR                            3-A
00296C 9620 1018      00018        3793+         OI    IJLLCBSW,IJLMSDTC SET DC MSG CODE IN LCB           3-A
002970 950C C010      00010        3794+         CLI   IJLDESN0,IJLDTACK+IJLZUNSY DC,US ONLY               3-A
002974 4770 B4AC            0298C  3795+         BNE   IJLZDCOL NO                                    3-A
002978 9101 1010      00010        3796+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER              3-A
00297C 4710 B3EC            028CC  3797+         BO    IJLZIRUS CHECK FOR ERROR POSTING          3-A
002980                             3798+IJLZ1ZZ3 EQU   * 3-A
002980 9505 4000      00000        3799+         CLI   IJLCCWCC,IJLKTX05 ERASE/WRITE CCW                  3-A
002984 4780 B438            02918  3800+         BE    IJLZRTRY YES, RETRY                       3-A
002988 47F0 B27A            0275A  3801+         B     IJLZNX3L NO, POST I/O ERROR               3-A
00298C                             3802+IJLZDCOL EQU   * 3-A
00298C 9508 C010      00010        3803+         CLI   IJLDESN0,IJLDTACK DATA CHECK ONLY                  3-A
002990 4770 B4FC            029DC  3804+         BNE   IJLZNSNA NO, CHECK FOR ERROR POSTING      3-A
002994 9101 1010      00010        3805+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER              3-A
002998 47E0 B4A0            02980  3806+         BNO   IJLZ1ZZ3 NO, CHECK FOR RETRY              3-A
00299C 9108 101C      0001C        3807+         TM    IJLLCBSW+IJLKONT4,IJLZ1S08 CE PRESENT             3-A
0029A0 4710 B4A0            02980  3808+         BO    IJLZ1ZZ3 YES, CHECK FOR RETRY             3-A
0029A4 47F0 B3FC            028DC  3809+         B     IJLZIRU9 POST ASYNCHRONOUS ERROR          3-A

0029A8                             3811+IJLZZZCC EQU   * CONTROL CHECK PROCESSOR                         3-A
0029A8 962B 1018      00018        3812+         OI    IJLLCBSW,IJLMZCCK SET CC MSG CODE IN LCB           3-A
0029AC 9101 1010      00010        3813+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER              3-A
0029B0 47E0 B438            02918  3814+         BNO   IJLZRTRY NO, RETRY                        3-A
0029B4 9108 101C      0001C        3815+         TM    IJLLCBSW+IJLKONT4,IJLZ1S08 CE PRESENT             3-A
0029B8 4710 B438            02918  3816+         BO    IJLZRTRY YES, RETRY                       3-A
0029BC 47F0 B3FC            028DC  3817+         B     IJLZIRU9 POST ASYNCHRONOUS ERROR          3-A

0029C0                             3819+IJLZZZCR EQU   * COMMAND REJECT PROCESSOR                        3-A
0029C0 9622 1018      00018        3820+         OI    IJLLCBSW,IJLMSCRJ SET CR MSG CODE IN LCB           3-A
0029C4                             3821+IJLZZCAN EQU   * 3-A
0029C4 9180 F0BC      00EE4        3822+         TM    IJLPRGSW,IJLBCNCL CANCEL = YES                     3-A
0029C8 47E0 B27A            0275A  3823+         BNO   IJLZNX3L NO, POST I/O ERROR               3-A
0029CC 9610 1010      00010        3824+         OI    IJLLCBFL,IJLLCBCN SET CANCEL FLAG IN LCB           3-A
0029D0 47F0 B27A            0275A  3825+         B     IJLZNX3L NO, POST I/O ERROR               3-A

0029D4                             3827+IJLZZZOC EQU   * OPERATION CHECK PROCESSOR                       3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   91


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

0029D4 962C 1018      00018        3828+         OI    IJLLCBSW,IJLMZOPC SET OC MSG CODE IN LCB           3-A
0029D8 47F0 B3EC            028CC  3829+         B     IJLZIRUS CHECK FOR ERROR POSTING          3-A

0029DC                             3831+IJLZNSNA EQU   * 3-A
0029DC 9108 101C      0001C        3832+         TM    IJLLCBSW+IJLKONT4,IJLZ1S08 CE PRESENT             3-A
0029E0 4710 B27E            0275E  3833+         BO    IJLZNSNO YES, POST SNO                    3-A
0029E4 9101 1010      00010        3834+         TM    IJLLCBFL,IJLB1053 DEVICE A PRINTER                 3-A
0029E8 47E0 B27E            0275E  3835+         BNO   IJLZNSNO NO, POST SNO                     3-A
0029EC 47F0 B3FC            028DC  3836+         B     IJLZIRU9 TURN OFF PRINTER BUSY            3-A
0029F0                             3837+IJLZ1ZZ1 EQU   * 3-A
0029F0 9101 1010      00010        3838+         TM    IJLLCBFL,IJLB1053 IS DEVICE A PRINTER              3-A
0029F4 47E0 B276            02756  3839+         BNO   IJLZNX2L NO, POST ERROR IN ERP            3-A
0029F8 9108 101C      0001C        3840+         TM    IJLLCBSW+IJLKONT4,IJLZ1S08 CE PRESENT             3-A
0029FC 4710 B276            02756  3841+         BO    IJLZNX2L YES, POST ERROR IN ERP           3-A
002A00 9620 C01D      0001D        3842+         OI    IJLDEEI,B'00100000' POST ERROR IN ERP FLAG           3-A
002A04 47F0 B3FC            028DC  3843+         B     IJLZIRU9 POST ASYNCHRONOUS ERROR          3-A
002A08                             3844+         LTORG  3-A
002A08 0C00                        3845                =XL2'0C00'
002A0A 0080                        3846                =XL2'0080'
002A0C 0008                        3847                =H'8'
002A0E 000000                      3848                =XL3'0'
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   92


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   3850+* DOS BTAM - 360N-CQ-469 BTBTEIH CHANGE LEVEL 3-B                   3-B
                                   3851+******** IJLBTEIH -- BTAM ERP INTERRUPTION HANDLER ********

                                   3853+*        RECEIVES CONTROL ON INTERRUPTIONS FOR TELECOMMUNICATIONS
                                   3854+*        STARTED BY BTAM ERROR RECOVERY PROCEDURES.

002A18                             3856+         USING IJLBTEIH,IJLBTERB

002A18                             3858+IJLBTEIH CSECT  UNIT EXCEPTION APPENDAGE
002A18 1888                        3859+         LR    IJLBTERB,IJLBTIAR SET UP IJLBTEIH ADDRESSABILITY
002A1A 904F 816C            02B84  3860+         STM   4,15,IJLERPSV
002A1E 58F0 81A0            02BB8  3861+         L     IJLBTBAS,=A(IJLBTM) SET UP BTMOD ADDRESSABILITY    3-A
002A22 9620 F0BC      00EE4        3862+         OI    IJLPRGSW,IJLBDSAB SET SWITCH TO SHOW RUNNING DISABLE
002A26 1811                        3863+         LR    IJLLCBRG,IJLCCBAR SET UP LCB ADDRESSABILITY
002A28 58C0 1010            00010  3864+         L     IJLDECBR,IJLLCBDE-1 SET UP DECB ADDRESSABILITY
002A2C 58D0 C008            00008  3865+         L     IJLDTFRG,IJLDEDFA-1 DTF ADDRESSABILITY
002A30 5840 0040            00040  3866+         L     IJLWKRGE,IJLCSWCA-1 ADDRESS OF LAST CCW+8
002A34 4144 0000            00000  3867+         LA    IJLWKRGE,0(IJLWKRGE) CLEAR SIGN FROM REGISTER.
002A38 4B40 81A4            02BBC  3868+         SH    IJLWKRGE,=H'8'
002A3C 9170 0044      00044        3869+         TM    IJLCSWS0,X'70' CHECK FOR SM,CUE OR BUSSY
002A40 4770 8142            02B5A  3870+         BNZ   IJLNTREO
002A44 950D 4000      00000        3871+         CLI   IJLCCWCC,X'0D' LAST COMMAND WRITE BREAK
002A48 4770 814C            02B64  3872+         BNE   IJLCRSKP
002A4C D501 81A6 0044 02BBE 00044  3873+         CLC   =XL2'0C00',IJLCSWS0 STATUS CE,DE ONLY
002A52 4780 808E            02AA6  3874+         BE    IJLRSTCP
002A56 9214 1018      00018        3875+IJLERPER MVI   IJLLCBSW,IJLMSERP PUT ERROR IN ERP CODE IN LCB
002A5A 9620 C01D      0001D        3876+         OI    IJLDEEI,B'00100000' POST ERROR WHILE IN ERP
002A5E D201 C012 101E 00012 0001E  3877+         MVC   IJLDERC,IJLLCBSW+6 POST RESIDUAL COUNT
002A64 5840 1018            00018  3878+         L     IJLWKRGE,IJLLCBSW GET ERROR CCW ADDRESS
002A68 4144 0000            00000  3879+         LA    IJLWKRGE,0(IJLWKRGE)
002A6C 4B40 81A4            02BBC  3880+         SH    IJLWKRGE,=H'8' BACK UP ONE CCW
002A70 D200 C014 4000 00014 00000  3881+         MVC   IJLDELCC,IJLCCWCC PUT LAST COMMAND CODE IN DECB
002A76 D200 C01C 4005 0001C 00005  3882+         MVC   IJLDETPC,IJLCCWTC PUT LAST TP CODE IN DECB
002A7C D201 C01E 101C 0001E 0001C  3883+         MVC   IJLDEST0(2),IJLLCBSW+4 ERROR STATUS IN DECB
002A82 D201 0044 81A8 00044 02BC0  3884+         MVC   IJLCSWS0(2),=XL2'0E00' SET STATUS TO CE,DE,UC
002A88 4140 F060            00E88  3885+         LA    IJLWKRGE,IJLMWAIT STORE ADDR  OF                    3-B
002A8C 5040 C000            00000  3886+         ST    IJLWKRGE,IJLDEECB MASTER WAIT IN ECB                3-B
002A90 9201 C000      00000        3887+         MVI   IJLDEECB,IJLKTX01 DELAY POSTING OF COMPLETION       3-B
002A94 94DF F0BC      00EE4        3888+         NI    IJLPRGSW,X'FF'-IJLBDSAB RESET DISABLE SWITCH
002A98 D202 100D 81AA 0000D 02BC2  3889+         MVC   IJLLCBAA,=AL3(IJLBTIH) RESTORE APPENDAGE ADDRESS
002A9E 984F 816C            02B84  3890+         LM    4,15,IJLERPSV RESTORE SUPERVISOR REGISTERS
002AA2 47F7 0004            00004  3891+         B     4(IJLSPVRR)

002AA6                             3893+IJLRSTCP EQU   *
002AA6 4140 1028            00028  3894+         LA    IJLWKRGE,IJLLCBC1 GET ADDRESS OF FIRST USER CCW
002AAA 9502 C005      00005        3895+         CLI   IJLDEOTC,IJLOTCWI LAST OPERATION WRITE INITIAL
002AAE 4770 8120            02B38  3896+         BNE   IJLRSCB1
002AB2 4144 0008            00008  3897+         LA    IJLWKRGE,8(IJLWKRGE) POINT WRITE ADDRESSING CHAR. CC
002AB6 4850 4006            00006  3898+         LH    IJLWKRGO,IJLCCWDC PICK UP ADDRESSING CHAR COUNT IN

                                   3900+* THE NEXT FOUR INSTRUCTIONS DYNAMICALLY CREATE THE DISPLACEMENT
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   93


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   3901+* FIELD OF FOUR TM INSTRUCTIONS

002ABA 4250 80BD            02AD5  3903+         STC   IJLWKRGO,IJLDTEO1+3
002ABE 4250 80C5            02ADD  3904+         STC   IJLWKRGO,IJLDTEO2+3
002AC2 4250 80E1            02AF9  3905+         STC   IJLWKRGO,IJLDTEO3+3
002AC6 4250 80EB            02B03  3906+         STC   IJLWKRGO,IJLDTEO4+3
002ACA 58E0 C014            00014  3907+         L     IJLALPTR,IJLDELEA-1 GET LIST ENTRY ADDRESS
002ACE 4155 0001            00001  3908+         LA    IJLWKRGO,1(IJLWKRGO) COMPUTE ENTRY WIDTH

                                   3910+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

002AD2 9140 E000      00000        3912+IJLDTEO1 TM    *-*(IJLALPTR),IJLBSKIP IS ENTRY SKIPPED
002AD6 4780 80D0            02AE8  3913+         BZ    IJLGEO34

                                   3915+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

002ADA 9180 E000      00000        3917+IJLDTEO2 TM    *-*(IJLALPTR),IJLBPEOL END OF LIST
002ADE 4710 8108            02B20  3918+         BO    IJLSTCCF
002AE2 1AE5                        3919+         AR    IJLALPTR,IJLWKRGO POINT TO NEXT ENTRY
002AE4 47F0 80BA            02AD2  3920+         B     IJLDTEO1

002AE8                             3922+IJLGEO34 EQU   * NON SKIP ENTRY FOUND
002AE8 50E0 C014            00014  3923+         ST    IJLALPTR,IJLDELEA-1 PUT ENTRY FIELD TO FIRST ENTRY
002AEC 50E0 C020            00020  3924+         ST    IJLALPTR,IJLDEAP-1 UPDATE POLLING POINTER
002AF0 D202 4001 C015 00001 00015  3925+         MVC   IJLCCWDA,IJLDELEA PUT ADDRESS IN CCW AS DATA ADDR

                                   3927+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

002AF6 9180 E000      00000        3929+IJLDTEO3 TM    *-*(IJLALPTR),IJLBPEOL CHECK FOR END OF LIST
002AFA 4710 8108            02B20  3930+         BO    IJLSTCCF
002AFE 1AE5                        3931+         AR    IJLALPTR,IJLWKRGO POINT TO NEXT ENTRY

                                   3933+* THE FOLLOWING TM INSTRUCTION HAS A DYNAMICALLY CREATED DISPLACEMENT

002B00 9140 E000      00000        3935+IJLDTEO4 TM    *-*(IJLALPTR),IJLBSKIP IS ENTRY SKIPPED
002B04 4780 80DE            02AF6  3936+         BZ    IJLDTEO3
002B08 4144 0008            00008  3937+         LA    IJLWKRGE,8(IJLWKRGE)
002B0C 9506 4005      00005        3938+         CLI   IJLCCWTC,IJLTRRWA READ RESPONSE TO ADDRESSING CCW
002B10 4780 8100            02B18  3939+         BE    *+8
002B14 4144 0008            00008  3940+         LA    IJLWKRGE,8(IJLWKRGE)
002B18 94BF 102C      0002C        3941+         NI    IJLLCBCF,X'FF'-X'40' TURN OFF CHAIN COMMAND FLAG
002B1C 47F0 811C            02B34  3942+         B     IJLRSCCB

002B20                             3944+IJLSTCCF EQU   * MULTI-ADDRESSING HAS NOT BEEN SPECIFIED
002B20 4144 0008            00008  3945+         LA    IJLWKRGE,8(IJLWKRGE)
002B24 9506 4005      00005        3946+         CLI   IJLCCWTC,IJLTRRWA READ RESPONSE TO ADDRESSING CCW
002B28 4780 8118            02B30  3947+         BE    *+8
002B2C 4144 0008            00008  3948+         LA    IJLWKRGE,8(IJLWKRGE)
002B30 9640 102C      0002C        3949+         OI    IJLLCBCF,X'40' SET CHAIN COMMAND FLAG ON
002B34                             3950+IJLRSCCB EQU   *
002B34 4140 1028            00028  3951+         LA    IJLWKRGE,IJLLCBC1 GET ADDRESS OF USER FIRST CCW
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   94


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

002B38 5040 1008            00008  3952+IJLRSCB1 ST    IJLWKRGE,IJLLCBCA-1 PUT START OF USER CCW'S IN CCB
002B3C D202 100D 81AA 0000D 02BC2  3953+         MVC   IJLLCBAA,=AL3(IJLBTIH) RESTORE APPENDAGE ADDRESS
002B42 D707 1018 1018 00018 00018  3954+         XC    IJLLCBSW,IJLLCBSW CLEAR ERP STATUS SAVE AREA
002B48 D707 1020 1020 00020 00020  3955+         XC    IJLLCBC0,IJLLCBC0 CLEAR ERP CCW AREA
002B4E 4350 1016            00016  3956+         IC    IJLWKRGO,IJLLCBAR GET RETRY COUNT
002B52 4155 0001            00001  3957+         LA    IJLWKRGO,1(IJLWKRGO)
002B56 4250 1016            00016  3958+         STC   IJLWKRGO,IJLLCBAR
002B5A                             3959+IJLNTREO EQU   *
002B5A 94DF F0BC      00EE4        3960+         NI    IJLPRGSW,X'FF'-IJLBDSAB RESET DISABLE SWITCH
002B5E 984F 816C            02B84  3961+         LM    4,15,IJLERPSV RESTORE SUPERVISOR REGISTERS
002B62 07F7                        3962+         BR    IJLSPVRR

002B64                             3964+IJLCRSKP EQU   * LAST COMMAND THAT ERP ISSUED WAS READ SKIP OR
002B64 5840 1018            00018  3965+         L     IJLWKRGE,IJLLCBSW GET ADDRESS OF CCW IN ERROR
002B68 4144 0000            00000  3966+         LA    IJLWKRGE,0(IJLWKRGE) CLEAR MSG BYTE
002B6C 4B40 81A4            02BBC  3967+         SH    IJLWKRGE,=H'8' BACK UP ONE CCW
002B70 9521 4005      00005        3968+         CLI   IJLCCWTC,IJLTRSET TP-CODE RESET
002B74 4780 8120            02B38  3969+         BE    IJLRSCB1
002B78 9503 4005      00005        3970+         CLI   IJLCCWTC,X'03' TP-CODE=03
002B7C 4780 808E            02AA6  3971+         BE    IJLRSTCP
002B80 47F0 811C            02B34  3972+         B     IJLRSCCB

002B84 FFFFFFFFFFFFFFFF            3974+IJLERPSV DC    12F'-1' ERP REGISTER SAVE AREA
002BB8                             3975+         LTORG
002BB8 00000E28                    3976                =A(IJLBTM)
002BBC 0008                        3977                =H'8'
002BBE 0C00                        3978                =XL2'0C00'
002BC0 0E00                        3979                =XL2'0E00'
002BC2 001710                      3980                =AL3(IJLBTIH)
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   95


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   3982+**********  DIAGNOSTIC WRITE/READ INTERRUPT HANDLER  ***************

                                   3984+*    RECIEVES CONTROL ON INTERRUPTS FROM BTAM ISSUED
                                   3985+*    DIAGNOSTIC WRITE/READ COMMANDS

002BC8                             3987+         USING IJLBTDIA,IJLBTDIB

002BC8                             3989+IJLBTDIA CSECT
002BC8 1888                        3990+         LR    IJLBTDIB,IJLBTIAR SET UP IJLBTDIA ADDRESSABILITY
002BCA 904F 80E8            02CB0  3991+         STM   4,15,IJLERSV1 SAVE SUPERVISOR REGISTERS
002BCE 58F0 8118            02CE0  3992+         L     IJLBTBAS,=A(IJLBTM) SET UP BTMOD ADDRESSABILITY    3-A
002BD2 9620 F0BC      00EE4        3993+         OI    IJLPRGSW,IJLBDSAB SET SWITCH TO SHOW RUNNING DISABLED
002BD6 1811                        3994+         LR    IJLLCBRG,IJLCCBAR SET UP LCB ADDRESSABILITY
002BD8 58C0 1010            00010  3995+         L     IJLDECBR,IJLLCBDE-1 SET UP DECB ADDRESSABILITY
002BDC 58D0 C008            00008  3996+         L     IJLDTFRG,IJLDEDFA-1 DTF ADDRESSABILITY
002BE0 5840 0040            00040  3997+         L     IJLWKRGE,IJLCSWCA-1 ADDRESS OF LAST CCW+8
002BE4 4144 0000            00000  3998+         LA    IJLWKRGE,0(IJLWKRGE)
002BE8 4B40 811C            02CE4  3999+         SH    IJLWKRGE,=H'8' BACK UP ONE CCW
002BEC D202 100D 8122 0000D 02CEA  4000+         MVC   IJLLCBAA,=AL3(IJLBTIH) RESTORE APPENDAGE ADDRESS
002BF2 9504 4000      00000        4001+         CLI   IJLCCWCC,X'04' WAS LAST COMMAND SENSE
002BF6 4780 8068            02C30  4002+         BE    IJLCEDEC
002BFA D501 811E 0044 02CE6 00044  4003+         CLC   =XL2'0C00',IJLCSWS0 CE,DE ONLY
002C00 4780 807E            02C46  4004+         BE    IJLPST1
002C04 D207 1020 F040 00020 00E68  4005+         MVC   IJLLCBC0,IJLSNSCW MOVE SENSE TO ERP CCW
002C0A 4150 1020            00020  4006+         LA    IJLWKRGO,IJLLCBC0
002C0E 5050 1008            00008  4007+         ST    IJLWKRGO,IJLLCBCA-1 ADDRESS OF SENSE TO LCB
002C12 4150 C011            00011  4008+         LA    IJLWKRGO,IJLDESN1 ADDRESS OF EXTRA SENSE FIELD
002C16 5050 80E4            02CAC  4009+         ST    IJLWKRGO,IJLFWWG1 HOLD IT IN TEMP
002C1A D202 1021 80E5 00021 02CAD  4010+         MVC   IJLLCBC0+1(3),IJLFWWG1+1 MOVE IT TO SENSE
002C20 D206 1019 0041 00019 00041  4011+         MVC   IJLLCBSW+1(7),IJLCSWCA
002C26 D202 100D 8125 0000D 02CED  4012+         MVC   IJLLCBAA,=AL3(IJLBTDIA)
002C2C 47F0 80C0            02C88  4013+         B     IJLNTRY5

002C30                             4015+IJLCEDEC EQU   *
002C30 D501 811E 0044 02CE6 00044  4016+         CLC   =XL2'0C00',IJLCSWS0 CE,DE ONLY
002C36 4780 807E            02C46  4017+         BE    IJLPST1
002C3A 9214 1018      00018        4018+         MVI   IJLLCBSW,IJLMSERP SET ERROR IN ERP CODE
002C3E 9620 C01D      0001D        4019+         OI    IJLDEEI,B'00100000' POST ERROR IN ERP BIT
002C42 47F0 8082            02C4A  4020+         B     IJLERXT5

002C46                             4022+IJLPST1  EQU   *
002C46 9220 1018      00018        4023+         MVI   IJLLCBSW,IJLMSDTC SET DATA CHECK MESSAGE CODE
002C4A                             4024+IJLERXT5 EQU   * 3-B
002C4A D201 C012 101E 00012 0001E  4025+         MVC   IJLDERC,IJLLCBSW+6 POST RESIDUAL COUNT
002C50 5840 1018            00018  4026+         L     IJLWKRGE,IJLLCBSW GET ERROR CCW ADDRESS
002C54 4144 0000            00000  4027+         LA    IJLWKRGE,0(IJLWKRGE)
002C58 4B40 811C            02CE4  4028+         SH    IJLWKRGE,=H'8' BACK UP ONE CCW
002C5C D200 C014 4000 00014 00000  4029+         MVC   IJLDELCC,IJLCCWCC PUT LAST COMMAND CODE IN DECB
002C62 D200 C01C 4005 0001C 00005  4030+         MVC   IJLDETPC,IJLCCWTC PUT LAST TP CODE IN DECB
002C68 D201 0044 8120 00044 02CE8  4031+         MVC   IJLCSWS0(2),=XL2'0E00' SET CE,DE,UC
002C6E 4140 F060            00E88  4032+         LA    IJLWKRGE,IJLMWAIT STORE ADDR OF                     3-B
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   96


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

002C72 5040 C000            00000  4033+         ST    IJLWKRGE,IJLDEECB MASTER WAIT  IN ECB               3-B
002C76 9201 C000      00000        4034+         MVI   IJLDEECB,IJLKTX01 DELAY POSTING OF COMPLETION       3-B
002C7A 94DF F0BC      00EE4        4035+         NI    IJLPRGSW,X'FF'-IJLBDSAB RESET DISABLE SWITCH
002C7E 984F 80E8            02CB0  4036+         LM    4,15,IJLERSV1 RESTORE SUPERVISOR REGISTERS
002C82 4177 0004            00004  4037+         LA    IJLSPVRR,4(IJLSPVRR) BUMP RETURN ADDRESS BY 4
002C86 07F7                        4038+         BR    IJLSPVRR

002C88                             4040+IJLNTRY5 EQU   *
002C88 D201 C012 0046 00012 00046  4041+         MVC   IJLDERC,IJLCSWBC MOVE RESIDUAL COUNT TO DECB
002C8E D200 C014 4000 00014 00000  4042+         MVC   IJLDELCC,IJLCCWCC MOVE LAST COMMAND CODE TO DECB
002C94 D200 C01C 4005 0001C 00005  4043+         MVC   IJLDETPC,IJLCCWTC MOVE LAST TP CODE TO DECB
002C9A D201 C01E 0044 0001E 00044  4044+         MVC   IJLDEST0(2),IJLCSWS0 POST STATUS IN DECB
002CA0 94DF F0BC      00EE4        4045+         NI    IJLPRGSW,X'FF'-IJLBDSAB RESET DISABLE SWITCH
002CA4 984F 80E8            02CB0  4046+         LM    4,15,IJLERSV1
002CA8 07F7                        4047+         BR    IJLSPVRR

002CAA 0000
002CAC FFFFFFFF                    4049+IJLFWWG1 DC    F'-1' FULL WORD SAVE AREA
002CB0 FFFFFFFFFFFFFFFF            4050+IJLERSV1 DC    12F'-1' REGISTER SAVE AREA
002CE0                             4051+         LTORG
002CE0 00000E28                    4052                =A(IJLBTM)
002CE4 0008                        4053                =H'8'
002CE6 0C00                        4054                =XL2'0C00'
002CE8 0E00                        4055                =XL2'0E00'
002CEA 001710                      4056                =AL3(IJLBTIH)
002CED 002BC8                      4057                =AL3(IJLBTDIA)
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   97


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   4059+* IBM SYSTEM/360 DISK OPERATING SYSTEM
                                   4060+* DOS BTAM - 360N-CQ-469 IJLBTMDS CHANGE LEVEL 3-B                  3-B

000000                             4062+IJLDTFBT DSECT  DTFBT LAYOUT

000000                             4064+IJLDTFNL DS    HL1 NUMBER OF LCB'S
000001                             4065+IJLDTFSL DS    YL1 SIZE OF EACH LCB
000002                             4066+IJLDTFFE DS    BL2 FEATURE(LINE GROUP OPTIONS)
000004                             4067+IJLDTFDX DS    0XL4 WTTA BYTES                                 3-2
000004                             4068+IJLDTIAM DS    XL1 IAM                                        3-2
000005                             4069+IJLDTWRU DS    XL1 WRU                                        3-2
000006                             4070+IJLDTEOM DS    XL1 EOM                                        3-2
000007                             4071+IJLDTEOT DS    XL1 EOT                                        3-2
000008                             4072+IJLDTFF1 DS    BL1 FLAG BYTE 1
000009                             4073+IJLDTFBA DS    VL3 BUFFER CONTROL BLOCK ADDRESS
00000C                             4074+IJLDTFDV DS    HL1 DEVICE CODE
00000D                             4075+IJLDTFMA DS    VL3 MODEL CCW TABLE ADDRESS
000010                             4076+IJLDTFDL DS    YL1 (DTF LENGTH)/16
000011                             4077+IJLDTFLA DS    VL3 LOGIC MODULE ADDRESS
000014                             4078+IJLDTFTU DS    YL1 DTF TYPE + CU CODE
000015                             4079+IJLDTFF2 DS    BL1 FLAG BYTE 2
000016                             4080+IJLDTFML DS    0H MESSAGE LENGTH                             3-2
000016                             4081+IJLDTMLY DS    H MONDLY (WTTA)                              3-2
000018                             4082+IJLDTRT2 DS    YL1 RETRY COUNT
000019                             4083+IJLDTSPC DS    VL3 ADDRESS OF TABLE OF SPECIAL CHARACTERS
00001C                             4084+IJLDTRT1 DS    YL1 2*RETRY COUNT
00001D                             4085+IJLDTFEB DS    VL3 LINE ERROR BLOCK ADDRESS
000020                             4086+         DS    XL1 RESERVED                      3-4
000021                             4087+IJLDTFTO DS    VL3 TABLE OF OFFSETS ADDRESS              3-4
000024                             4088+         DS    A RESERVED                              3-4
000028                             4089+IJLDTFHX EQU   *-IJLDTFNL
000028                             4090+IJLDTFRC DS    H RESIDUAL COUNT

000000                             4092+IJLLCB   DSECT  LINE CONTROL BLOCK LAYOUT

000000                             4094+IJLLCBRC DS    H RESIDUAL COUNT
000002                             4095+IJLLCBT  DS    0XL2 TRANSMISSION BYTES
000002                             4096+IJLLCBT0 DS    XL1 TRANSMISSION BYTE 0
000003                             4097+IJLLCBT1 DS    XL1 TRANSMISSION BYTE 1
000004                             4098+IJLLCBS  DS    0XL2 CSW STATUS BYTES
000004                             4099+IJLLCBS0 DS    XL1 CSW STATUS BYTE 0
000005                             4100+IJLLCBS1 DS    XL1 CSW STATUS BYTE 1
000006                             4101+IJLLCBLU DS    YL2 LOGICAL UNIT CLASS AND ORDER
000008                             4102+         DS    XL1 RESERVED,MUST ALWAYS BE 0
000009                             4103+IJLLCBCA DS    AL3 CHANNEL PROGRAM ADDRESS
00000C                             4104+IJLLCBT2 DS    XL1 TRANSMISSION BYTE 2
00000D                             4105+IJLLCBAA DS    VL3 APPENDAGE ADDRESS
000010                             4106+IJLLCBFL DS    XL1 FLAG BYTE OF LCB
000011                             4107+IJLLCBDE DS    AL3 DECB ADDRESS
000014                             4108+IJLLCBRL DS    HL1 RELATIVE LINE NUMBER
000015                             4109+IJLLCBAK DS    XL1 SND ACK AND RCV ACK
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   98


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000016                             4110+IJLLCBAR DS    XL1 ACK LMT AND RETRY COUNT
000017                             4111+IJLLCBSM DS    XL1 SET MODE
000018                             4112+IJLLCBHX EQU   *-IJLLCBRC
000018                             4113+IJLLCBSW DS    D ERP MESSAGE CODE AND STATUS SAVE AREA
000020                             4114+IJLLCBC0 DS    D CCW RESERVED FOR ERP AND ARU
000028                             4115+IJLLCBC1 DS    0D FIRST PROGRAM CCW IN LCB
000028                             4116+IJLLCBCC DS    XL1 COMMAND CODE
000029                             4117+IJLLCBDA DS    AL3 DATA ADDRESS
00002C                             4118+IJLLCBCF DS    XL1 CHANNEL FLAGS
00002D                             4119+IJLLCBTC DS    XL1 TELECOM PROG CODE
00002E                             4120+IJLLCBDC DS    H DATA COUNT
000030                             4121+         DS    7D BSC CCW AREA
000068                             4122+IJLLCBMK DS    XL1 MARKER INDICATOR
000069                             4123+IJLLCBTE DS    XL1 TOTAL USER RETRY COUNT
00006A                             4124+IJLLCBRT DS    XL1 USER RETRY COUNT
00006B                             4125+IJLLCBET DS    XL1 ERP RETRY COUNT
00006C                             4126+IJLLCBF1 DS    XL1 BSC ERP FLAG AREA
00006D                             4127+IJLLCBF2 DS    XL1 BSC FLAG 2
00006E                             4128+IJLLCBF3 DS    XL1 BSC FLAG 3
00006F                             4129+         DS    XL1 RESERVED
000070                             4130+IJLLCBC3 DS    3D BSC ERP CCW AREA
000088                             4131+IJLLCBLI DS    XL1 ID LENGTH-BSC2 ONLY                        3-A
000089                             4132+IJLLCBID DS    XL15 ID FIELD-BSC2 ONLY                         3-A

000000                             4134+IJLCCW   DSECT  CHANNEL CONTROL WORD LAYOUT

000000                             4136+IJLCCWCC DS    XL1 COMMAND CODE
000001                             4137+IJLCCWDA DS    AL3 DATA ADDRESS
000004                             4138+IJLCCWCF DS    XL1 CHANNEL FLAGS
000005                             4139+IJLCCWTC DS    XL1 TELECOM PROG CODE
000006                             4140+IJLCCWDC DS    H DATA COUNT

000000                             4142+IJLMCCW  DSECT  MODEL CCW LAYOUT

000000                             4144+IJLMCCW0 DS    XL1 COMMAND CODE
000001                             4145+IJLMCCW1 DS    XL1 CHANNEL FLAGS
000002                             4146+IJLMCCW2 DS    XL1 TELECOM PROG CODE
000003                             4147+IJLMCCW3 DS    XL1 PACKED INFORMATION

000000                             4149+IJLLERB  DSECT  LINE ERROR BLOCK

000000                             4151+IJLATRNS DS    F ACCUMULATOR, TRANSMISSIONS
000004                             4152+IJLADTCK DS    H ACCUMULATOR, DATA CHECKS
000006                             4153+IJLAINTV DS    H ACCUMULATOR, INTERVENTIONS
000008                             4154+IJLANTTO DS    H ACCUMULATOR, NONTEXT TIMEOUTS
00000A                             4155+IJLCTRNS DS    X COUNTER, TRANSMISSIONS
00000B                             4156+IJLCDTCK DS    X COUNTER, DATA CHECKS
00000C                             4157+IJLCINTV DS    X COUNTER, INTERVENTIONS
00000D                             4158+IJLCNTTO DS    X COUNTER, NONTEXT TIMEOUTS
00000E                             4159+IJLTTRNS DS    YL1 THRESHOLD, TRANSMISSIONS
00000F                             4160+IJLTDTCK DS    YL1 THRESHOLD, DATA CHECKS
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE   99


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000010                             4161+IJLTINTV DS    YL1 THRESHOLD, INTERVENTIONS
000011                             4162+IJLTNTTO DS    YL1 THRESHOLD, NONTEXT TIMEOUTS
000014                             4163+         DS    0F ALIGNMENT
000014                             4164+IJLLERBX EQU   *-IJLATRNS EXTENT OF LERB

000000                             4166+IJLBCB   DSECT  BUFFER CONTROL BLOCK LAYOUT

000000                             4168+IJLBCBOC DS    XL1 BCB OPEN COUNTER
000001                             4169+IJLBCBFA DS    AL3 FIRST AVAILABLE BUFFER
000004                             4170+IJLBCBNB DS    YL1 NUMBER OF BUFFERS IN POOL
000005                             4171+IJLBCBNA DS    YL1 NUMBER OF BUFFERS AVAILABLE
000006                             4172+IJLBCBBL DS    YL2 BUFFER LENGTH
000008                             4173+IJLBCBB1 DS    D BUFFER1 POSITION

000000                             4175+IJLBUF   DSECT  BUFFER LAYOUT

000000                             4177+IJLBUFC1 DS    0D FIRST CCW IN BUFFER
000000                             4178+IJLBUFCC DS    XL1 COMMAND CODE
000001                             4179+IJLBUFDA DS    AL3 DATA ADDRESS
000004                             4180+IJLBUFCF DS    XL1 CHANNEL FLAGS
000005                             4181+IJLBUFTP DS    XL1 TELECOM PROGRAMMING CODE
000006                             4182+IJLBUFDC DS    H DATA COUNT
000008                             4183+IJLBUFC2 DS    0D SECOND CCW IN BUFFER
000008                             4184+IJLBUFTC DS    XL1 TIC COMMAND
000009                             4185+IJLBUFCA DS    AL3 CHAIN ADDRESS
00000C                             4186+IJLBUFD0 DS    CL1 DATA BYTE 0

000000                             4188+IJLDECB  DSECT  DECB LAYOUT

000000                             4190+IJLDEECB DS    XL4 EVENT CONTROL BLOCK
000004                             4191+IJLDEOF1 DS    BL1 OPERATION FLAGS ONE
000005                             4192+IJLDEOTC DS    HL1 OPERATION TYPE CODE
000006                             4193+IJLDELGT DS    Y DATA LENGTH
000008                             4194+IJLDEORI DS    BL1 RESPONSE INFORMATION BYTE                     3-3
000009                             4195+IJLDEDFA DS    VL3 DTFBT ADDRESS
00000C                             4196+IJLSETMD DS    XL1 SET MODE BYTE
00000D                             4197+IJLDEIOA DS    AL3 INPUT/OUTPUT AREA ADDRESS
000010                             4198+IJLDESN0 DS    XL1 SENSE BYTE 0
000011                             4199+IJLDESN1 DS    XL1 SENSE BYTE 1
000012                             4200+IJLDERC  DS    H RESIDUAL COUNT
000014                             4201+IJLDELCC DS    XL1 LAST CHANNEL COMMAND
000015                             4202+IJLDELEA DS    AL3 LIST ENTRY ADDRESS
000018                             4203+IJLDEOF2 DS    BL1 OPERATION FLAGS TWO
000019                             4204+IJLDERLN DS    YL1 RELATIVE LINE NUMBER
00001A                             4205+IJLDERAD DS    XL1 RESPONSE TO ADDRESSING
00001B                             4206+IJLDERRC DS    XL1 RESPONSE TO REDUNDANCY CHECKS
00001C                             4207+IJLDETPC DS    XL1 TELECOMMUNICATION PROGRAM CODE
00001D                             4208+IJLDEEI  DS    XL1 ERROR INFORMATION FIELD
00001E                             4209+IJLDEST0 DS    XL1 STATUS BYTE 0
00001F                             4210+IJLDEST1 DS    XL1 STATUS BYTE 1
000020                             4211+IJLDERPL DS    XL1 RESERVED FOR RETURN CODE FOR RESETPL
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE  100


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000021                             4212+IJLDEAP  DS    AL3 ADDRESSING POINTER
000024                             4213+IJLDENDX DS    XL1 RESERVED FOR INDEX BYTE( START-STOP AUTOPOLL)
000025                             4214+IJLDEPP  DS    AL3 POLLING POINTER
000028                             4215+IJLDEOF3 DS    BL1 FLAG BYTE FOR DECB EXTENDED            3-3
000029                             4216+         DS    XL1 RESERVED                                3-3
00002A                             4217+IJLDECVL DS    H DECB EXTENDED LENGTH FIELD              3-3
00002C                             4218+         DS    XL1 RESERVED                                    3-3
00002D                             4219+IJLDECVA DS    AL3 AREA ADDRESS FOR DECB EXTENDED          3-3

000000                             4221+IJLTABLE DSECT  TABLE OF SPECIAL CHARACTERS LAYOUT

000000                             4223+         DS    HL1 NUMBER OF OFFSETS PLUS ONE
000001                             4224+         DS    19HL1 OFFSETS FOR EACH ENTRY IN TABLE                3-A
000014                             4225+IJLTCONT DS    HL1 COUNT BYTE FOR FIRST ENTRY
000015                             4226+IJLTACKN DS    HL4 ALTERNATING ACKNOWLEDGEMENTS ENTRY
000019                             4227+         DS    HL1
00001A                             4228+IJLTNAK  DS    HL1 NAK CHARACTER
00001B                             4229+         DS    HL1
00001C                             4230+IJLTENQ  DS    HL1 ENQ CHARACTER
00001D                             4231+         DS    HL1
00001E                             4232+IJLTDETX DS    HL2 DLE ETX SEQUENCE
000020                             4233+         DS    HL1
000021                             4234+IJLTDTB  DS    HL2 DLE ETB SEQUENCE
000023                             4235+         DS    HL1
000024                             4236+IJLTEOT  DS    HL1 EOT CHARACTER
000025                             4237+         DS    HL1
000026                             4238+IJLTWABT DS    HL2 WACK SEQUENCE                                   3-5
000028                             4239+         DS    HL1
000029                             4240+IJLTDEOT DS    HL2 DISCONNECT (DLE EOT) SEQUENCE
00002B                             4241+         DS    HL1
00002C                             4242+IJLTDENQ DS    HL2 DLE ENQ SEQUENCE
00002E                             4243+         DS    HL1
00002F                             4244+IJLTSOH  DS    HL1 SOH CHARACTER
000030                             4245+         DS    HL1
000031                             4246+IJLTDSTX DS    HL2 DLE STX SEQUENCE
000033                             4247+         DS    HL1
000034                             4248+IJLTSHPC DS    HL2 SOH %
000036                             4249+         DS    HL1 3-3
000037                             4250+IJLTRVI  DS    HL2 DLE RVI                                     3-3
000039                             4251+         DS    HL1 3-6
00003A                             4252+IJLTSOHC DS    HL3 SOH 0/0 C                                       3-6
00003D                             4253+         DS    HL1 3-6
00003E                             4254+IJLTSOHE DS    HL3 SOH 0/0 E                                       3-6
000041                             4255+         DS    HL1 3-6
000042                             4256+IJLTSOHS DS    HL3 SOH 0/0 S                                       3-6
000045                             4257+         DS    HL1 3-6
000046                             4258+IJLTSYN  DS    HL1 SYN                                             3-6
000047                             4259+         DS    HL1 3-A
000048                             4260+IJLTSOHR DS    HL3 SOH%R                                           3-A
00004B                             4261+         DS    HL1 3-A
00004C                             4262+IJLTSLAS DS    HL3 SOH%/                                           3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE  101


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

000000                             4264+IJLOFFST DSECT  FORMAT ANALYSIS OFFSETS

000000                             4266+IJLCD000 DS    XL1 SOH,STX,DLE-STX-------ETX,ETB
000001                             4267+IJLCD004 DS    XL1 SOH,STX,DLE-STX-------ENQ
000002                             4268+IJLCD008 DS    XL1 SOH,STX,DLE-STX-------
000003                             4269+IJLCD00C DS    XL1 STX-EOT
000004                             4270+IJLCD010 DS    XL1 SOH,STX,DLE-STX------EOT
000005                             4271+IJLCD014 DS    XL1 ----------------------ETB,ETX
000006                             4272+IJLCD018 DS    XL1 -----------------------
000007                             4273+IJLCD01C DS    XL1 ----------------------EOT
000008                             4274+IJLCD020 DS    XL1 ------ACK-0,ACK-1,NAK,DLE-?
000009                             4275+IJLCD024 DS    XL1 ACKO,ACK1
00000A                             4276+IJLCD028 DS    XL1 NAK
00000B                             4277+IJLCD02C DS    XL1 SOH,STX,DLE-STX-------ACK-0,ACK-1/NAK/DLE-?
00000C                             4278+IJLCD030 DS    XL1 WABT
00000D                             4279+IJLCD034 DS    XL1 EOT
00000E                             4280+IJLCD038 DS    XL1 ENQ
00000F                             4281+IJLCD03C DS    XL1 ----------------ENQ

000000                             4283+IJLCBTT  DSECT  USED BY BSC ON-LINE-TERMINAL TEXT             3-1
000000                             4284+IJLCBXX  DS    X TYPE OF TESTED REQUESTED               3-1
000001                             4285+IJLCBYY  DS    X NUMBER OF TRANSMISSIONS                3-1
000002                             4286+IJLCBNT  DS    X LENGTH OF TERMINAL ID FIELD            3-1
000003                             4287+IJLCBTI  DS    9X TERMINAL ID FIELD                      3-1
00000C                             4288+IJLCBTO  DS    X NUMBER OF TIME OUTS                    3-1
00000D                             4289+IJLCBNK  DS    X NUMBER OF MAK'S                        3-1
00000E                             4290+IJLCBLD  DS    X NUMBER OF LOST DATA                    3-1
00000F                             4291+IJLCBDC  DS    X NUMBER OF DATA CHECKS                  3-1
000010                             4292+IJLCBTC  DS    X NUMBER OF TRANSMISSIONS                    3-1
000011                             4293+IJLCBWK  DS    X RETRY AND WACK COUNTER                             3-6

000000                             4295+IJLSDRTB DSECT  SDR TABLE DSECT                                     3-5

000000                             4297+IJLSDRRL DS    YL1 RELATIVE LINE NUMBER                             3-5
000001                             4298+IJLSDRCU DS    XL2 CHANNEL & UNIT                                   3-5
000003                             4299+IJLSDRPC DS    XL4 POLLING OR ADDRESSING CHARACTERS                 3-5
000007                             4300+IJLSDRDV DS    XL1 DEVICE TYPE                                      3-5
000008                             4301+IJLSDRCH DS    XL1 CHARACTERISTICS                                  3-5
000009                             4302+IJLSDRCT DS    XL8 COUNTERS                                         3-5
000011                             4303+IJLSDRLG DS    XL2 RESERVED                                         3-5
000013                             4304+IJLSDRGD DS    XL1 GUARD                                            3-5

000000                             4306+IJLZRFDS DSECT  LOCAL 3277 RFT SAVEAREA IN IO BUFFER            3-A
000000                             4307+IJLZX    DS    XL1 XX VALUE                                        3-A
000001                             4308+IJLZY    DS    XL1 YY VALUE                                        3-A
000002                             4309+IJLZFRLN DS    XL1 'FROM' RLN                                      3-A
000003                             4310+         DS    X UNUSED                                          3-A
000004                             4311+IJLZXXE  DS    XL2 XX IN EBCDIC FROM ORIGINAL MSG                  3-A
000006                             4312+IJLZIOA  DS    XL3 I/O AREA ADDRESS                                3-A
000009                             4313+IJLZLEN  DS    XL2 I/O LENGTH                                      3-A
00000B                             4314+IJLZIRLN DS    XL1 INITIAL RLN                                     3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE  102


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

00000C                             4315+IJLZOF1  DS    XL1 DECB FLAG IJLDEOF1                              3-A
00000D                             4316+IJLZBEG  EQU   *-IJLZX DISPLACEMT TO BEG OF TEST PATTERN            3-A
00000D                             4317+IJLZPTLN DS    XL2 TEST PATTERN LENGTH                             3-A
00000F                             4318+IJLZPHDR DS    XL3 STX,ESC,COMMAND  HEADER                         3-A
000012                             4319+IJLZPAT  DS    X ACTUAL BEGINNING OF TEST PATTERN TEXT FOR LOC   3-A
       BTAM LOCAL 3270 SAMPLE PROGRAM - THE SUN'S LOCATION                                                     PAGE  103


  LOC  OBJECT CODE    ADDR1 ADDR2  STMT   SOURCE STATEMENT                                          FDOS CL3-10 03/29/70

                                   4321+*  RELINQUISH BTMOD ADDRESSABILITY

                                   4323+         DROP  IJLBTBAS
                                   4324+         DROP  IJLBTBA2 3-3
                                   4325+         DROP  IJLBTIHB
                                   4326+         DROP  IJLDTFRG
                                   4327+         DROP  IJLLCBRG
                                   4328+         DROP  IJLWKRGE
                                   4329+         DROP  IJLWKRGO
                                   4330+         DROP  IJLOFSTR

000000                             4332+ECLIPTIC CSECT  SEPASMB=NO, RESTORE USER CSECT
                                   4333          END
                                                 RELOCATION DICTIONARY                                          PAGE   1


 POS.ID   REL.ID   FLAGS   ADDRESS                                                                              03/29/70

   01       03      0C     000010
   01       03      0C     000284
   01       01      08     0005E5
   01       03      0C     0006F0
   01       01      0C     0006F4
   01       01      0C     0006F8
   01       01      0C     000724
   01       02      18     000781
   01       01      08     000784
   01       01      08     000787
   01       01      08     00078A
   01       02      18     000D5D
   03       04      18     000D8D
   03       05      18     000D91
   03       06      18     000DA1
   03       07      18     000DB5
   03       07      18     000DF5
   08       09      1C     001608
   0B       0B      08     002321
   0B       0B      08     002329
   0B       0B      08     002331
   0B       0B      08     002341
   0B       08      0C     002378
   0B       0E      0C     00237C
   0B       0D      0C     002384
   0B       0C      0C     002388
   0B       0F      08     0023AB
   0B       10      08     0023AE
   0F       08      0C     002BB8
   0F       0B      08     002BC2
   10       08      0C     002CE0
   10       0B      08     002CEA
   10       10      08     002CED



NO STATEMENTS FLAGGED IN THIS ASSEMBLY
// PAUSE
// EXEC LNKEDT

JOB  DEMOBTAM  03/29/70   DISK LINKAGE EDITOR DIAGNOSTIC OF INPUT

ACTION TAKEN  MAP
LIST   AUTOLINK   IJL0HZ
LIST   ENTRY
03/29/70   PHASE  XFR-AD  LOCORE  HICORE  DSK-AD   ESD TYPE  LABEL     LOADED  REL-FR

        PHASE***  006000  006000  008D0B  1B 06 4  CSECT     ECLIPTIC  006000  006000

                                                   CSECT     TERMS     006D80  006000

                                                   CSECT     IJLBTIH   007710  006000
                                                   *  ENTRY  IJLCNOER  0081E8
                                                   *  ENTRY  IJLCKIOE  0081D8
                                                   *  ENTRY  IJLCLEAR  00820A
                                                   *  ENTRY  IJLPOST   008214

                                                   CSECT     IJLBTM22  006E28  006000
                                                      ENTRY  IJLBTM    006E28
                                                   *  ENTRY  IJLCANCL  0075A0
                                                   *  ENTRY  IJLUSERB  0075C6
                                                   *  ENTRY  IJLUSER   0075CA
                                                   *  ENTRY  IJLPTLCB  007540
                                                   *  ENTRY  IJLMWAIT  006E88

                                                   CSECT     IJLSGEN   007618  006000

                                                   CSECT     IJLZ2NR2  0083B8  006000

                                                   CSECT     IJLTRSC1  008490  006000
                                                   *  ENTRY  IJLRSPCK  008490

                                                   CSECT     IJL277IP  0084E0  006000

                                                   CSECT     IJLBTEIH  008A18  006000

                                                   CSECT     IJLBTDIA  008BC8  006000

                                                   CSECT     IJL0HZ22  008CF0  008CF0
                                                      ENTRY  IJL0HZ    008CF0
                                                      ENTRY  IJL@0HZ   008CF0
// PAUSE CREATE TWO 3270 TERMINALS
// ASSGN SYS020,X'0A0'
// ASSGN SYS021,X'0A1'
// EXEC

EOJ DEMOBTAM                                                            12.18.05,DURATION 00.00.27